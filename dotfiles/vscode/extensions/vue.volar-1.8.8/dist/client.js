"use strict";var _u=Object.defineProperty;var cD=Object.getOwnPropertyDescriptor;var uD=Object.getOwnPropertyNames;var lD=Object.prototype.hasOwnProperty;var dD=(t,e)=>()=>(t&&(e=t(t=0)),e);var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fD=(t,e)=>{for(var n in e)_u(t,n,{get:e[n],enumerable:!0})},hD=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of uD(e))!lD.call(t,i)&&i!==n&&_u(t,i,{get:()=>e[i],enumerable:!(r=cD(e,i))||r.enumerable});return t};var wu=t=>hD(_u({},"__esModule",{value:!0}),t);var tn=w(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.asPromise=Ke.thenable=Ke.typedArray=Ke.stringArray=Ke.array=Ke.func=Ke.error=Ke.number=Ke.string=Ke.boolean=void 0;function pD(t){return t===!0||t===!1}Ke.boolean=pD;function Ug(t){return typeof t=="string"||t instanceof String}Ke.string=Ug;function gD(t){return typeof t=="number"||t instanceof Number}Ke.number=gD;function mD(t){return t instanceof Error}Ke.error=mD;function Bg(t){return typeof t=="function"}Ke.func=Bg;function Gg(t){return Array.isArray(t)}Ke.array=Gg;function vD(t){return Gg(t)&&t.every(e=>Ug(e))}Ke.stringArray=vD;function yD(t,e){return Array.isArray(t)&&t.every(e)}Ke.typedArray=yD;function Vg(t){return t&&Bg(t.then)}Ke.thenable=Vg;function CD(t){return t instanceof Promise?t:Vg(t)?new Promise((e,n)=>{t.then(r=>e(r),r=>n(r))}):Promise.resolve(t)}Ke.asPromise=CD});var Fi=w(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.stringArray=pt.array=pt.func=pt.error=pt.number=pt.string=pt.boolean=void 0;function _D(t){return t===!0||t===!1}pt.boolean=_D;function Xg(t){return typeof t=="string"||t instanceof String}pt.string=Xg;function wD(t){return typeof t=="number"||t instanceof Number}pt.number=wD;function bD(t){return t instanceof Error}pt.error=bD;function DD(t){return typeof t=="function"}pt.func=DD;function Jg(t){return Array.isArray(t)}pt.array=Jg;function RD(t){return Jg(t)&&t.every(e=>Xg(e))}pt.stringArray=RD});var Ku=w(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.Message=K.NotificationType9=K.NotificationType8=K.NotificationType7=K.NotificationType6=K.NotificationType5=K.NotificationType4=K.NotificationType3=K.NotificationType2=K.NotificationType1=K.NotificationType0=K.NotificationType=K.RequestType9=K.RequestType8=K.RequestType7=K.RequestType6=K.RequestType5=K.RequestType4=K.RequestType3=K.RequestType2=K.RequestType1=K.RequestType=K.RequestType0=K.AbstractMessageSignature=K.ParameterStructures=K.ResponseError=K.ErrorCodes=void 0;var Jr=Fi(),Yg;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Yg=K.ErrorCodes||(K.ErrorCodes={}));var To=class extends Error{constructor(e,n,r){super(n),this.code=Jr.number(e)?e:Yg.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,To.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};K.ResponseError=To;var it=class{constructor(e){this.kind=e}static is(e){return e===it.auto||e===it.byName||e===it.byPosition}toString(){return this.kind}};K.ParameterStructures=it;it.auto=new it("auto");it.byPosition=new it("byPosition");it.byName=new it("byName");var Fe=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return it.auto}};K.AbstractMessageSignature=Fe;var bu=class extends Fe{constructor(e){super(e,0)}};K.RequestType0=bu;var Du=class extends Fe{constructor(e,n=it.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};K.RequestType=Du;var Ru=class extends Fe{constructor(e,n=it.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};K.RequestType1=Ru;var Su=class extends Fe{constructor(e){super(e,2)}};K.RequestType2=Su;var Tu=class extends Fe{constructor(e){super(e,3)}};K.RequestType3=Tu;var Pu=class extends Fe{constructor(e){super(e,4)}};K.RequestType4=Pu;var qu=class extends Fe{constructor(e){super(e,5)}};K.RequestType5=qu;var xu=class extends Fe{constructor(e){super(e,6)}};K.RequestType6=xu;var ku=class extends Fe{constructor(e){super(e,7)}};K.RequestType7=ku;var Eu=class extends Fe{constructor(e){super(e,8)}};K.RequestType8=Eu;var Fu=class extends Fe{constructor(e){super(e,9)}};K.RequestType9=Fu;var Ou=class extends Fe{constructor(e,n=it.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};K.NotificationType=Ou;var Nu=class extends Fe{constructor(e){super(e,0)}};K.NotificationType0=Nu;var Iu=class extends Fe{constructor(e,n=it.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};K.NotificationType1=Iu;var Mu=class extends Fe{constructor(e){super(e,2)}};K.NotificationType2=Mu;var Lu=class extends Fe{constructor(e){super(e,3)}};K.NotificationType3=Lu;var Au=class extends Fe{constructor(e){super(e,4)}};K.NotificationType4=Au;var ju=class extends Fe{constructor(e){super(e,5)}};K.NotificationType5=ju;var Hu=class extends Fe{constructor(e){super(e,6)}};K.NotificationType6=Hu;var $u=class extends Fe{constructor(e){super(e,7)}};K.NotificationType7=$u;var Wu=class extends Fe{constructor(e){super(e,8)}};K.NotificationType8=Wu;var zu=class extends Fe{constructor(e){super(e,9)}};K.NotificationType9=zu;var SD;(function(t){function e(i){let o=i;return o&&Jr.string(o.method)&&(Jr.string(o.id)||Jr.number(o.id))}t.isRequest=e;function n(i){let o=i;return o&&Jr.string(o.method)&&i.id===void 0}t.isNotification=n;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(Jr.string(o.id)||Jr.number(o.id)||o.id===null)}t.isResponse=r})(SD=K.Message||(K.Message={}))});var Bu=w(tr=>{"use strict";var Qg;Object.defineProperty(tr,"__esModule",{value:!0});tr.LRUCache=tr.LinkedMap=tr.Touch=void 0;var bt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(bt=tr.Touch||(tr.Touch={}));var zs=class{constructor(){this[Qg]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=bt.None){let r=this._map.get(e);if(!!r)return n!==bt.None&&this.touch(r,n),r.value}set(e,n,r=bt.None){let i=this._map.get(e);if(i)i.value=n,r!==bt.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case bt.None:this.addItemLast(i);break;case bt.First:this.addItemFirst(i);break;case bt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Qg=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==bt.First&&n!==bt.Last)){if(n===bt.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===bt.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};tr.LinkedMap=zs;var Uu=class extends zs{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=bt.AsNew){return super.get(e,n)}peek(e){return super.get(e,bt.None)}set(e,n){return super.set(e,n,bt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};tr.LRUCache=Uu});var Zg=w(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.Disposable=void 0;var TD;(function(t){function e(n){return{dispose:n}}t.create=e})(TD=Po.Disposable||(Po.Disposable={}))});var Sr=w(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});var Gu;function Vu(){if(Gu===void 0)throw new Error("No runtime abstraction layer installed");return Gu}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Gu=n}t.install=e})(Vu||(Vu={}));Xu.default=Vu});var Ni=w(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.Emitter=Yr.Event=void 0;var PD=Sr(),qD;(function(t){let e={dispose(){}};t.None=function(){return e}})(qD=Yr.Event||(Yr.Event={}));var Ju=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=r.length;o<s;o++)try{n.push(r[o].apply(i[o],e))}catch(a){(0,PD.default)().console.error(a)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Oi=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Ju),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,n),i.dispose=Oi._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Yr.Emitter=Oi;Oi._noop=function(){}});var Us=w(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.CancellationTokenSource=Qr.CancellationToken=void 0;var xD=Sr(),kD=Fi(),Yu=Ni(),Qu;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Yu.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Yu.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||kD.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(Qu=Qr.CancellationToken||(Qr.CancellationToken={}));var ED=Object.freeze(function(t,e){let n=(0,xD.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Ks=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?ED:(this._emitter||(this._emitter=new Yu.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Zu=class{get token(){return this._token||(this._token=new Ks),this._token}cancel(){this._token?this._token.cancel():this._token=Qu.Cancelled}dispose(){this._token?this._token instanceof Ks&&this._token.dispose():this._token=Qu.None}};Qr.CancellationTokenSource=Zu});var em=w(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.SharedArrayReceiverStrategy=Ii.SharedArraySenderStrategy=void 0;var FD=Us(),qo;(function(t){t.Continue=0,t.Cancelled=1})(qo||(qo={}));var el=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=qo.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,qo.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Ii.SharedArraySenderStrategy=el;var tl=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===qo.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},nl=class{constructor(e){this.token=new tl(e)}cancel(){}dispose(){}},rl=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new FD.CancellationTokenSource:new nl(n)}};Ii.SharedArrayReceiverStrategy=rl});var ol=w(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Semaphore=void 0;var OD=Sr(),il=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,OD.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};Bs.Semaphore=il});var tm=w(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.ReadableStreamMessageReader=nr.AbstractMessageReader=nr.MessageReader=void 0;var al=Sr(),Mi=Fi(),sl=Ni(),ND=ol(),ID;(function(t){function e(n){let r=n;return r&&Mi.func(r.listen)&&Mi.func(r.dispose)&&Mi.func(r.onError)&&Mi.func(r.onClose)&&Mi.func(r.onPartialMessage)}t.is=e})(ID=nr.MessageReader||(nr.MessageReader={}));var Gs=class{constructor(){this.errorEmitter=new sl.Emitter,this.closeEmitter=new sl.Emitter,this.partialMessageEmitter=new sl.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Mi.string(e.message)?e.message:"unknown"}`)}};nr.AbstractMessageReader=Gs;var cl;(function(t){function e(n){let r,i,o,s=new Map,a,c=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(o=n.contentDecoder,s.set(o.name,o)),n.contentDecoders!==void 0)for(let l of n.contentDecoders)s.set(l.name,l);if(n.contentTypeDecoder!==void 0&&(a=n.contentTypeDecoder,c.set(a.name,a)),n.contentTypeDecoders!==void 0)for(let l of n.contentTypeDecoders)c.set(l.name,l)}return a===void 0&&(a=(0,al.default)().applicationJson.decoder,c.set(a.name,a)),{charset:r,contentDecoder:o,contentDecoders:s,contentTypeDecoder:a,contentTypeDecoders:c}}t.fromOptions=e})(cl||(cl={}));var ul=class extends Gs{constructor(e,n){super(),this.readable=e,this.options=cl.fromOptions(n),this.buffer=(0,al.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new ND.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error("Header must provide a Content-Length property."));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,al.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};nr.ReadableStreamMessageReader=ul});var om=w(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.WriteableStreamMessageWriter=rr.AbstractMessageWriter=rr.MessageWriter=void 0;var nm=Sr(),xo=Fi(),MD=ol(),rm=Ni(),LD="Content-Length: ",im=`\r
`,AD;(function(t){function e(n){let r=n;return r&&xo.func(r.dispose)&&xo.func(r.onClose)&&xo.func(r.onError)&&xo.func(r.write)}t.is=e})(AD=rr.MessageWriter||(rr.MessageWriter={}));var Vs=class{constructor(){this.errorEmitter=new rm.Emitter,this.closeEmitter=new rm.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${xo.string(e.message)?e.message:"unknown"}`)}};rr.AbstractMessageWriter=Vs;var ll;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,nm.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,nm.default)().applicationJson.encoder}}t.fromOptions=e})(ll||(ll={}));var dl=class extends Vs{constructor(e,n){super(),this.writable=e,this.options=ll.fromOptions(n),this.errorCount=0,this.writeSemaphore=new MD.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(LD,r.byteLength.toString(),im),i.push(im),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};rr.WriteableStreamMessageWriter=dl});var sm=w(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.AbstractMessageBuffer=void 0;var jD=13,HD=10,$D=`\r
`,fl=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let l=this._chunks[r];i=0;t:for(;i<l.length;){switch(l[i]){case jD:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case HD:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}o+=l.byteLength,r++}if(n!==4)return;let s=this._read(o+i),a=new Map,c=this.toString(s,"ascii").split($D);if(c.length<2)return a;for(let l=0;l<c.length-2;l++){let d=c[l],p=d.indexOf(":");if(p===-1)throw new Error("Message header must separate key and value using :");let f=d.substr(0,p),g=d.substr(p+1).trim();a.set(e?f.toLowerCase():f,g)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],s=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,s}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let s=o.slice(0,e);n.set(s,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else n.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return n}};Xs.AbstractMessageBuffer=fl});var hm=w(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.createMessageConnection=W.ConnectionOptions=W.MessageStrategy=W.CancellationStrategy=W.CancellationSenderStrategy=W.CancellationReceiverStrategy=W.RequestCancellationReceiverStrategy=W.IdCancellationReceiverStrategy=W.ConnectionStrategy=W.ConnectionError=W.ConnectionErrors=W.LogTraceNotification=W.SetTraceNotification=W.TraceFormat=W.TraceValues=W.Trace=W.NullLogger=W.ProgressType=W.ProgressToken=void 0;var am=Sr(),Ae=Fi(),G=Ku(),cm=Bu(),ko=Ni(),hl=Us(),Fo;(function(t){t.type=new G.NotificationType("$/cancelRequest")})(Fo||(Fo={}));var um;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(um=W.ProgressToken||(W.ProgressToken={}));var Eo;(function(t){t.type=new G.NotificationType("$/progress")})(Eo||(Eo={}));var pl=class{constructor(){}};W.ProgressType=pl;var gl;(function(t){function e(n){return Ae.func(n)}t.is=e})(gl||(gl={}));W.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var De;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(De=W.Trace||(W.Trace={}));var WD;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(WD=W.TraceValues||(W.TraceValues={}));(function(t){function e(r){if(!Ae.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(De=W.Trace||(W.Trace={}));var Cn;(function(t){t.Text="text",t.JSON="json"})(Cn=W.TraceFormat||(W.TraceFormat={}));(function(t){function e(n){return Ae.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Cn=W.TraceFormat||(W.TraceFormat={}));var lm;(function(t){t.type=new G.NotificationType("$/setTrace")})(lm=W.SetTraceNotification||(W.SetTraceNotification={}));var ml;(function(t){t.type=new G.NotificationType("$/logTrace")})(ml=W.LogTraceNotification||(W.LogTraceNotification={}));var Js;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Js=W.ConnectionErrors||(W.ConnectionErrors={}));var Tr=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,Tr.prototype)}};W.ConnectionError=Tr;var dm;(function(t){function e(n){let r=n;return r&&Ae.func(r.cancelUndispatched)}t.is=e})(dm=W.ConnectionStrategy||(W.ConnectionStrategy={}));var Cl;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Ae.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ae.func(r.dispose))}t.is=e})(Cl=W.IdCancellationReceiverStrategy||(W.IdCancellationReceiverStrategy={}));var fm;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Ae.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ae.func(r.dispose))}t.is=e})(fm=W.RequestCancellationReceiverStrategy||(W.RequestCancellationReceiverStrategy={}));var vl;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new hl.CancellationTokenSource}});function e(n){return Cl.is(n)||fm.is(n)}t.is=e})(vl=W.CancellationReceiverStrategy||(W.CancellationReceiverStrategy={}));var yl;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Fo.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Ae.func(r.sendCancellation)&&Ae.func(r.cleanup)}t.is=e})(yl=W.CancellationSenderStrategy||(W.CancellationSenderStrategy={}));var _l;(function(t){t.Message=Object.freeze({receiver:vl.Message,sender:yl.Message});function e(n){let r=n;return r&&vl.is(r.receiver)&&yl.is(r.sender)}t.is=e})(_l=W.CancellationStrategy||(W.CancellationStrategy={}));var wl;(function(t){function e(n){let r=n;return r&&Ae.func(r.handleMessage)}t.is=e})(wl=W.MessageStrategy||(W.MessageStrategy={}));var zD;(function(t){function e(n){let r=n;return r&&(_l.is(r.cancellationStrategy)||dm.is(r.connectionStrategy)||wl.is(r.messageStrategy))}t.is=e})(zD=W.ConnectionOptions||(W.ConnectionOptions={}));var _n;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(_n||(_n={}));function KD(t,e,n,r){let i=n!==void 0?n:W.NullLogger,o=0,s=0,a=0,c="2.0",l,d=new Map,p,f=new Map,g=new Map,m,b=new cm.LinkedMap,R=new Map,q=new Set,y=new Map,C=De.Off,T=Cn.Text,z,X=_n.New,B=new ko.Emitter,re=new ko.Emitter,de=new ko.Emitter,wt=new ko.Emitter,ht=new ko.Emitter,Et=r&&r.cancellationStrategy?r.cancellationStrategy:_l.Message;function br(_){if(_===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+_.toString()}function An(_){return _===null?"res-unknown-"+(++a).toString():"res-"+_.toString()}function Ft(){return"not-"+(++s).toString()}function Ht(_,k){G.Message.isRequest(k)?_.set(br(k.id),k):G.Message.isResponse(k)?_.set(An(k.id),k):_.set(Ft(),k)}function Dr(_){}function Ve(){return X===_n.Listening}function mn(){return X===_n.Closed}function Zt(){return X===_n.Disposed}function zr(){(X===_n.New||X===_n.Listening)&&(X=_n.Closed,re.fire(void 0))}function vn(_){B.fire([_,void 0,void 0])}function Do(_){B.fire(_)}t.onClose(zr),t.onError(vn),e.onClose(zr),e.onError(Do);function Si(){m||b.size===0||(m=(0,am.default)().timer.setImmediate(()=>{m=void 0,Ur()}))}function Kr(_){G.Message.isRequest(_)?Ro(_):G.Message.isNotification(_)?Pi(_):G.Message.isResponse(_)?Ti(_):So(_)}function Ur(){if(b.size===0)return;let _=b.shift();try{let k=r?.messageStrategy;wl.is(k)?k.handleMessage(_,Kr):Kr(_)}finally{Si()}}let Br=_=>{try{if(G.Message.isNotification(_)&&_.method===Fo.type.method){let k=_.params.id,N=br(k),A=b.get(N);if(G.Message.isRequest(A)){let ge=r?.connectionStrategy,Re=ge&&ge.cancelUndispatched?ge.cancelUndispatched(A,Dr):void 0;if(Re&&(Re.error!==void 0||Re.result!==void 0)){b.delete(N),y.delete(k),Re.id=A.id,jn(Re,_.method,Date.now()),e.write(Re).catch(()=>i.error("Sending response for canceled message failed."));return}}let ye=y.get(k);if(ye!==void 0){ye.cancel(),$t(_);return}else q.add(k)}Ht(b,_)}finally{Si()}};function Ro(_){if(Zt())return;function k(ie,we,h){let P={jsonrpc:c,id:_.id};ie instanceof G.ResponseError?P.error=ie.toJson():P.result=ie===void 0?null:ie,jn(P,we,h),e.write(P).catch(()=>i.error("Sending response failed."))}function N(ie,we,h){let P={jsonrpc:c,id:_.id,error:ie.toJson()};jn(P,we,h),e.write(P).catch(()=>i.error("Sending response failed."))}function A(ie,we,h){ie===void 0&&(ie=null);let P={jsonrpc:c,id:_.id,result:ie};jn(P,we,h),e.write(P).catch(()=>i.error("Sending response failed."))}xi(_);let ye=d.get(_.method),ge,Re;ye&&(ge=ye.type,Re=ye.handler);let Ee=Date.now();if(Re||l){let ie=_.id??String(Date.now()),we=Cl.is(Et.receiver)?Et.receiver.createCancellationTokenSource(ie):Et.receiver.createCancellationTokenSource(_);_.id!==null&&q.has(_.id)&&we.cancel(),_.id!==null&&y.set(ie,we);try{let h;if(Re)if(_.params===void 0){if(ge!==void 0&&ge.numberOfParams!==0){N(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${_.method} defines ${ge.numberOfParams} params but received none.`),_.method,Ee);return}h=Re(we.token)}else if(Array.isArray(_.params)){if(ge!==void 0&&ge.parameterStructures===G.ParameterStructures.byName){N(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${_.method} defines parameters by name but received parameters by position`),_.method,Ee);return}h=Re(..._.params,we.token)}else{if(ge!==void 0&&ge.parameterStructures===G.ParameterStructures.byPosition){N(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${_.method} defines parameters by position but received parameters by name`),_.method,Ee);return}h=Re(_.params,we.token)}else l&&(h=l(_.method,_.params,we.token));let P=h;h?P.then?P.then(I=>{y.delete(ie),k(I,_.method,Ee)},I=>{y.delete(ie),I instanceof G.ResponseError?N(I,_.method,Ee):I&&Ae.string(I.message)?N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${_.method} failed with message: ${I.message}`),_.method,Ee):N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${_.method} failed unexpectedly without providing any details.`),_.method,Ee)}):(y.delete(ie),k(h,_.method,Ee)):(y.delete(ie),A(h,_.method,Ee))}catch(h){y.delete(ie),h instanceof G.ResponseError?k(h,_.method,Ee):h&&Ae.string(h.message)?N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${_.method} failed with message: ${h.message}`),_.method,Ee):N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${_.method} failed unexpectedly without providing any details.`),_.method,Ee)}}else N(new G.ResponseError(G.ErrorCodes.MethodNotFound,`Unhandled method ${_.method}`),_.method,Ee)}function Ti(_){if(!Zt())if(_.id===null)_.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(_.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let k=_.id,N=R.get(k);if(Gr(_,N),N!==void 0){R.delete(k);try{if(_.error){let A=_.error;N.reject(new G.ResponseError(A.code,A.message,A.data))}else if(_.result!==void 0)N.resolve(_.result);else throw new Error("Should never happen.")}catch(A){A.message?i.error(`Response handler '${N.method}' failed with message: ${A.message}`):i.error(`Response handler '${N.method}' failed unexpectedly.`)}}}}function Pi(_){if(Zt())return;let k,N;if(_.method===Fo.type.method){let A=_.params.id;q.delete(A),$t(_);return}else{let A=f.get(_.method);A&&(N=A.handler,k=A.type)}if(N||p)try{if($t(_),N)if(_.params===void 0)k!==void 0&&k.numberOfParams!==0&&k.parameterStructures!==G.ParameterStructures.byName&&i.error(`Notification ${_.method} defines ${k.numberOfParams} params but received none.`),N();else if(Array.isArray(_.params)){let A=_.params;_.method===Eo.type.method&&A.length===2&&um.is(A[0])?N({token:A[0],value:A[1]}):(k!==void 0&&(k.parameterStructures===G.ParameterStructures.byName&&i.error(`Notification ${_.method} defines parameters by name but received parameters by position`),k.numberOfParams!==_.params.length&&i.error(`Notification ${_.method} defines ${k.numberOfParams} params but received ${A.length} arguments`)),N(...A))}else k!==void 0&&k.parameterStructures===G.ParameterStructures.byPosition&&i.error(`Notification ${_.method} defines parameters by position but received parameters by name`),N(_.params);else p&&p(_.method,_.params)}catch(A){A.message?i.error(`Notification handler '${_.method}' failed with message: ${A.message}`):i.error(`Notification handler '${_.method}' failed unexpectedly.`)}else de.fire(_)}function So(_){if(!_){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(_,null,4)}`);let k=_;if(Ae.string(k.id)||Ae.number(k.id)){let N=k.id,A=R.get(N);A&&A.reject(new Error("The received response has neither a result nor an error property."))}}function st(_){if(_!=null)switch(C){case De.Verbose:return JSON.stringify(_,null,4);case De.Compact:return JSON.stringify(_);default:return}}function qi(_){if(!(C===De.Off||!z))if(T===Cn.Text){let k;(C===De.Verbose||C===De.Compact)&&_.params&&(k=`Params: ${st(_.params)}

`),z.log(`Sending request '${_.method} - (${_.id})'.`,k)}else et("send-request",_)}function Rr(_){if(!(C===De.Off||!z))if(T===Cn.Text){let k;(C===De.Verbose||C===De.Compact)&&(_.params?k=`Params: ${st(_.params)}

`:k=`No parameters provided.

`),z.log(`Sending notification '${_.method}'.`,k)}else et("send-notification",_)}function jn(_,k,N){if(!(C===De.Off||!z))if(T===Cn.Text){let A;(C===De.Verbose||C===De.Compact)&&(_.error&&_.error.data?A=`Error data: ${st(_.error.data)}

`:_.result?A=`Result: ${st(_.result)}

`:_.error===void 0&&(A=`No result returned.

`)),z.log(`Sending response '${k} - (${_.id})'. Processing request took ${Date.now()-N}ms`,A)}else et("send-response",_)}function xi(_){if(!(C===De.Off||!z))if(T===Cn.Text){let k;(C===De.Verbose||C===De.Compact)&&_.params&&(k=`Params: ${st(_.params)}

`),z.log(`Received request '${_.method} - (${_.id})'.`,k)}else et("receive-request",_)}function $t(_){if(!(C===De.Off||!z||_.method===ml.type.method))if(T===Cn.Text){let k;(C===De.Verbose||C===De.Compact)&&(_.params?k=`Params: ${st(_.params)}

`:k=`No parameters provided.

`),z.log(`Received notification '${_.method}'.`,k)}else et("receive-notification",_)}function Gr(_,k){if(!(C===De.Off||!z))if(T===Cn.Text){let N;if((C===De.Verbose||C===De.Compact)&&(_.error&&_.error.data?N=`Error data: ${st(_.error.data)}

`:_.result?N=`Result: ${st(_.result)}

`:_.error===void 0&&(N=`No result returned.

`)),k){let A=_.error?` Request failed: ${_.error.message} (${_.error.code}).`:"";z.log(`Received response '${k.method} - (${_.id})' in ${Date.now()-k.timerStart}ms.${A}`,N)}else z.log(`Received response ${_.id} without active response promise.`,N)}else et("receive-response",_)}function et(_,k){if(!z||C===De.Off)return;let N={isLSPMessage:!0,type:_,message:k,timestamp:Date.now()};z.log(N)}function Zn(){if(mn())throw new Tr(Js.Closed,"Connection is closed.");if(Zt())throw new Tr(Js.Disposed,"Connection is disposed.")}function Wt(){if(Ve())throw new Tr(Js.AlreadyListening,"Connection is already listening")}function Vr(){if(!Ve())throw new Error("Call listen() first.")}function er(_){return _===void 0?null:_}function Xr(_){if(_!==null)return _}function ki(_){return _!=null&&!Array.isArray(_)&&typeof _=="object"}function en(_,k){switch(_){case G.ParameterStructures.auto:return ki(k)?Xr(k):[er(k)];case G.ParameterStructures.byName:if(!ki(k))throw new Error("Received parameters by name but param is not an object literal.");return Xr(k);case G.ParameterStructures.byPosition:return[er(k)];default:throw new Error(`Unknown parameter structure ${_.toString()}`)}}function Ei(_,k){let N,A=_.numberOfParams;switch(A){case 0:N=void 0;break;case 1:N=en(_.parameterStructures,k[0]);break;default:N=[];for(let ye=0;ye<k.length&&ye<A;ye++)N.push(er(k[ye]));if(k.length<A)for(let ye=k.length;ye<A;ye++)N.push(null);break}return N}let yn={sendNotification:(_,...k)=>{Zn();let N,A;if(Ae.string(_)){N=_;let ge=k[0],Re=0,Ee=G.ParameterStructures.auto;G.ParameterStructures.is(ge)&&(Re=1,Ee=ge);let ie=k.length,we=ie-Re;switch(we){case 0:A=void 0;break;case 1:A=en(Ee,k[Re]);break;default:if(Ee===G.ParameterStructures.byName)throw new Error(`Received ${we} parameters for 'by Name' notification parameter structure.`);A=k.slice(Re,ie).map(h=>er(h));break}}else{let ge=k;N=_.method,A=Ei(_,ge)}let ye={jsonrpc:c,method:N,params:A};return Rr(ye),e.write(ye).catch(ge=>{throw i.error("Sending notification failed."),ge})},onNotification:(_,k)=>{Zn();let N;return Ae.func(_)?p=_:k&&(Ae.string(_)?(N=_,f.set(_,{type:void 0,handler:k})):(N=_.method,f.set(_.method,{type:_,handler:k}))),{dispose:()=>{N!==void 0?f.delete(N):p=void 0}}},onProgress:(_,k,N)=>{if(g.has(k))throw new Error(`Progress handler for token ${k} already registered`);return g.set(k,N),{dispose:()=>{g.delete(k)}}},sendProgress:(_,k,N)=>yn.sendNotification(Eo.type,{token:k,value:N}),onUnhandledProgress:wt.event,sendRequest:(_,...k)=>{Zn(),Vr();let N,A,ye;if(Ae.string(_)){N=_;let ie=k[0],we=k[k.length-1],h=0,P=G.ParameterStructures.auto;G.ParameterStructures.is(ie)&&(h=1,P=ie);let I=k.length;hl.CancellationToken.is(we)&&(I=I-1,ye=we);let ne=I-h;switch(ne){case 0:A=void 0;break;case 1:A=en(P,k[h]);break;default:if(P===G.ParameterStructures.byName)throw new Error(`Received ${ne} parameters for 'by Name' request parameter structure.`);A=k.slice(h,I).map(Ce=>er(Ce));break}}else{let ie=k;N=_.method,A=Ei(_,ie);let we=_.numberOfParams;ye=hl.CancellationToken.is(ie[we])?ie[we]:void 0}let ge=o++,Re;ye&&(Re=ye.onCancellationRequested(()=>{let ie=Et.sender.sendCancellation(yn,ge);return ie===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ge}`),Promise.resolve()):ie.catch(()=>{i.log(`Sending cancellation messages for id ${ge} failed`)})}));let Ee={jsonrpc:c,id:ge,method:N,params:A};return qi(Ee),typeof Et.sender.enableCancellation=="function"&&Et.sender.enableCancellation(Ee),new Promise(async(ie,we)=>{let h=ne=>{ie(ne),Et.sender.cleanup(ge),Re?.dispose()},P=ne=>{we(ne),Et.sender.cleanup(ge),Re?.dispose()},I={method:N,timerStart:Date.now(),resolve:h,reject:P};try{await e.write(Ee),R.set(ge,I)}catch(ne){throw i.error("Sending request failed."),I.reject(new G.ResponseError(G.ErrorCodes.MessageWriteError,ne.message?ne.message:"Unknown reason")),ne}})},onRequest:(_,k)=>{Zn();let N=null;return gl.is(_)?(N=void 0,l=_):Ae.string(_)?(N=null,k!==void 0&&(N=_,d.set(_,{handler:k,type:void 0}))):k!==void 0&&(N=_.method,d.set(_.method,{type:_,handler:k})),{dispose:()=>{N!==null&&(N!==void 0?d.delete(N):l=void 0)}}},hasPendingResponse:()=>R.size>0,trace:async(_,k,N)=>{let A=!1,ye=Cn.Text;N!==void 0&&(Ae.boolean(N)?A=N:(A=N.sendNotification||!1,ye=N.traceFormat||Cn.Text)),C=_,T=ye,C===De.Off?z=void 0:z=k,A&&!mn()&&!Zt()&&await yn.sendNotification(lm.type,{value:De.toString(_)})},onError:B.event,onClose:re.event,onUnhandledNotification:de.event,onDispose:ht.event,end:()=>{e.end()},dispose:()=>{if(Zt())return;X=_n.Disposed,ht.fire(void 0);let _=new G.ResponseError(G.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let k of R.values())k.reject(_);R=new Map,y=new Map,q=new Set,b=new cm.LinkedMap,Ae.func(e.dispose)&&e.dispose(),Ae.func(t.dispose)&&t.dispose()},listen:()=>{Zn(),Wt(),X=_n.Listening,t.listen(Br)},inspect:()=>{(0,am.default)().console.log("inspect")}};return yn.onNotification(ml.type,_=>{if(C===De.Off||!z)return;let k=C===De.Verbose||C===De.Compact;z.log(_.message,k?_.verbose:void 0)}),yn.onNotification(Eo.type,_=>{let k=g.get(_.token);k?k(_.value):wt.fire(_)}),yn}W.createMessageConnection=KD});var Ys=w(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.ProgressType=x.ProgressToken=x.createMessageConnection=x.NullLogger=x.ConnectionOptions=x.ConnectionStrategy=x.AbstractMessageBuffer=x.WriteableStreamMessageWriter=x.AbstractMessageWriter=x.MessageWriter=x.ReadableStreamMessageReader=x.AbstractMessageReader=x.MessageReader=x.SharedArrayReceiverStrategy=x.SharedArraySenderStrategy=x.CancellationToken=x.CancellationTokenSource=x.Emitter=x.Event=x.Disposable=x.LRUCache=x.Touch=x.LinkedMap=x.ParameterStructures=x.NotificationType9=x.NotificationType8=x.NotificationType7=x.NotificationType6=x.NotificationType5=x.NotificationType4=x.NotificationType3=x.NotificationType2=x.NotificationType1=x.NotificationType0=x.NotificationType=x.ErrorCodes=x.ResponseError=x.RequestType9=x.RequestType8=x.RequestType7=x.RequestType6=x.RequestType5=x.RequestType4=x.RequestType3=x.RequestType2=x.RequestType1=x.RequestType0=x.RequestType=x.Message=x.RAL=void 0;x.MessageStrategy=x.CancellationStrategy=x.CancellationSenderStrategy=x.CancellationReceiverStrategy=x.ConnectionError=x.ConnectionErrors=x.LogTraceNotification=x.SetTraceNotification=x.TraceFormat=x.TraceValues=x.Trace=void 0;var Pe=Ku();Object.defineProperty(x,"Message",{enumerable:!0,get:function(){return Pe.Message}});Object.defineProperty(x,"RequestType",{enumerable:!0,get:function(){return Pe.RequestType}});Object.defineProperty(x,"RequestType0",{enumerable:!0,get:function(){return Pe.RequestType0}});Object.defineProperty(x,"RequestType1",{enumerable:!0,get:function(){return Pe.RequestType1}});Object.defineProperty(x,"RequestType2",{enumerable:!0,get:function(){return Pe.RequestType2}});Object.defineProperty(x,"RequestType3",{enumerable:!0,get:function(){return Pe.RequestType3}});Object.defineProperty(x,"RequestType4",{enumerable:!0,get:function(){return Pe.RequestType4}});Object.defineProperty(x,"RequestType5",{enumerable:!0,get:function(){return Pe.RequestType5}});Object.defineProperty(x,"RequestType6",{enumerable:!0,get:function(){return Pe.RequestType6}});Object.defineProperty(x,"RequestType7",{enumerable:!0,get:function(){return Pe.RequestType7}});Object.defineProperty(x,"RequestType8",{enumerable:!0,get:function(){return Pe.RequestType8}});Object.defineProperty(x,"RequestType9",{enumerable:!0,get:function(){return Pe.RequestType9}});Object.defineProperty(x,"ResponseError",{enumerable:!0,get:function(){return Pe.ResponseError}});Object.defineProperty(x,"ErrorCodes",{enumerable:!0,get:function(){return Pe.ErrorCodes}});Object.defineProperty(x,"NotificationType",{enumerable:!0,get:function(){return Pe.NotificationType}});Object.defineProperty(x,"NotificationType0",{enumerable:!0,get:function(){return Pe.NotificationType0}});Object.defineProperty(x,"NotificationType1",{enumerable:!0,get:function(){return Pe.NotificationType1}});Object.defineProperty(x,"NotificationType2",{enumerable:!0,get:function(){return Pe.NotificationType2}});Object.defineProperty(x,"NotificationType3",{enumerable:!0,get:function(){return Pe.NotificationType3}});Object.defineProperty(x,"NotificationType4",{enumerable:!0,get:function(){return Pe.NotificationType4}});Object.defineProperty(x,"NotificationType5",{enumerable:!0,get:function(){return Pe.NotificationType5}});Object.defineProperty(x,"NotificationType6",{enumerable:!0,get:function(){return Pe.NotificationType6}});Object.defineProperty(x,"NotificationType7",{enumerable:!0,get:function(){return Pe.NotificationType7}});Object.defineProperty(x,"NotificationType8",{enumerable:!0,get:function(){return Pe.NotificationType8}});Object.defineProperty(x,"NotificationType9",{enumerable:!0,get:function(){return Pe.NotificationType9}});Object.defineProperty(x,"ParameterStructures",{enumerable:!0,get:function(){return Pe.ParameterStructures}});var bl=Bu();Object.defineProperty(x,"LinkedMap",{enumerable:!0,get:function(){return bl.LinkedMap}});Object.defineProperty(x,"LRUCache",{enumerable:!0,get:function(){return bl.LRUCache}});Object.defineProperty(x,"Touch",{enumerable:!0,get:function(){return bl.Touch}});var UD=Zg();Object.defineProperty(x,"Disposable",{enumerable:!0,get:function(){return UD.Disposable}});var pm=Ni();Object.defineProperty(x,"Event",{enumerable:!0,get:function(){return pm.Event}});Object.defineProperty(x,"Emitter",{enumerable:!0,get:function(){return pm.Emitter}});var gm=Us();Object.defineProperty(x,"CancellationTokenSource",{enumerable:!0,get:function(){return gm.CancellationTokenSource}});Object.defineProperty(x,"CancellationToken",{enumerable:!0,get:function(){return gm.CancellationToken}});var mm=em();Object.defineProperty(x,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return mm.SharedArraySenderStrategy}});Object.defineProperty(x,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return mm.SharedArrayReceiverStrategy}});var Dl=tm();Object.defineProperty(x,"MessageReader",{enumerable:!0,get:function(){return Dl.MessageReader}});Object.defineProperty(x,"AbstractMessageReader",{enumerable:!0,get:function(){return Dl.AbstractMessageReader}});Object.defineProperty(x,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Dl.ReadableStreamMessageReader}});var Rl=om();Object.defineProperty(x,"MessageWriter",{enumerable:!0,get:function(){return Rl.MessageWriter}});Object.defineProperty(x,"AbstractMessageWriter",{enumerable:!0,get:function(){return Rl.AbstractMessageWriter}});Object.defineProperty(x,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Rl.WriteableStreamMessageWriter}});var BD=sm();Object.defineProperty(x,"AbstractMessageBuffer",{enumerable:!0,get:function(){return BD.AbstractMessageBuffer}});var ct=hm();Object.defineProperty(x,"ConnectionStrategy",{enumerable:!0,get:function(){return ct.ConnectionStrategy}});Object.defineProperty(x,"ConnectionOptions",{enumerable:!0,get:function(){return ct.ConnectionOptions}});Object.defineProperty(x,"NullLogger",{enumerable:!0,get:function(){return ct.NullLogger}});Object.defineProperty(x,"createMessageConnection",{enumerable:!0,get:function(){return ct.createMessageConnection}});Object.defineProperty(x,"ProgressToken",{enumerable:!0,get:function(){return ct.ProgressToken}});Object.defineProperty(x,"ProgressType",{enumerable:!0,get:function(){return ct.ProgressType}});Object.defineProperty(x,"Trace",{enumerable:!0,get:function(){return ct.Trace}});Object.defineProperty(x,"TraceValues",{enumerable:!0,get:function(){return ct.TraceValues}});Object.defineProperty(x,"TraceFormat",{enumerable:!0,get:function(){return ct.TraceFormat}});Object.defineProperty(x,"SetTraceNotification",{enumerable:!0,get:function(){return ct.SetTraceNotification}});Object.defineProperty(x,"LogTraceNotification",{enumerable:!0,get:function(){return ct.LogTraceNotification}});Object.defineProperty(x,"ConnectionErrors",{enumerable:!0,get:function(){return ct.ConnectionErrors}});Object.defineProperty(x,"ConnectionError",{enumerable:!0,get:function(){return ct.ConnectionError}});Object.defineProperty(x,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return ct.CancellationReceiverStrategy}});Object.defineProperty(x,"CancellationSenderStrategy",{enumerable:!0,get:function(){return ct.CancellationSenderStrategy}});Object.defineProperty(x,"CancellationStrategy",{enumerable:!0,get:function(){return ct.CancellationStrategy}});Object.defineProperty(x,"MessageStrategy",{enumerable:!0,get:function(){return ct.MessageStrategy}});var GD=Sr();x.RAL=GD.default});var Cm=w(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var vm=require("util"),ir=Ys(),Li=class extends ir.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Li.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new vm.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Li.emptyBuffer=Buffer.allocUnsafe(0);var Sl=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ir.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ir.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ir.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),ir.Disposable.create(()=>this.stream.off("data",e))}},Tl=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ir.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ir.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ir.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let o=s=>{s==null?r():i(s)};typeof e=="string"?this.stream.write(e,n,o):this.stream.write(e,o)})}end(){this.stream.end()}},ym=Object.freeze({messageBuffer:Object.freeze({create:t=>new Li(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new vm.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new Sl(t),asWritableStream:t=>new Tl(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Pl(){return ym}(function(t){function e(){ir.RAL.install(ym)}t.install=e})(Pl||(Pl={}));ql.default=Pl});var ti=w(ce=>{"use strict";var VD=ce&&ce.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),XD=ce&&ce.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&VD(e,t,n)};Object.defineProperty(ce,"__esModule",{value:!0});ce.createMessageConnection=ce.createServerSocketTransport=ce.createClientSocketTransport=ce.createServerPipeTransport=ce.createClientPipeTransport=ce.generateRandomPipeName=ce.StreamMessageWriter=ce.StreamMessageReader=ce.SocketMessageWriter=ce.SocketMessageReader=ce.PortMessageWriter=ce.PortMessageReader=ce.IPCMessageWriter=ce.IPCMessageReader=void 0;var Ai=Cm();Ai.default.install();var _m=require("path"),JD=require("os"),YD=require("crypto"),ea=require("net"),Kt=Ys();XD(Ys(),ce);var xl=class extends Kt.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Kt.Disposable.create(()=>this.process.off("message",e))}};ce.IPCMessageReader=xl;var kl=class extends Kt.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ce.IPCMessageWriter=kl;var El=class extends Kt.AbstractMessageReader{constructor(e){super(),this.onData=new Kt.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};ce.PortMessageReader=El;var Fl=class extends Kt.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ce.PortMessageWriter=Fl;var Zr=class extends Kt.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,Ai.default)().stream.asReadableStream(e),n)}};ce.SocketMessageReader=Zr;var ei=class extends Kt.WriteableStreamMessageWriter{constructor(e,n){super((0,Ai.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ce.SocketMessageWriter=ei;var Qs=class extends Kt.ReadableStreamMessageReader{constructor(e,n){super((0,Ai.default)().stream.asReadableStream(e),n)}};ce.StreamMessageReader=Qs;var Zs=class extends Kt.WriteableStreamMessageWriter{constructor(e,n){super((0,Ai.default)().stream.asWritableStream(e),n)}};ce.StreamMessageWriter=Zs;var wm=process.env.XDG_RUNTIME_DIR,QD=new Map([["linux",107],["darwin",103]]);function ZD(){let t=(0,YD.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;wm?e=_m.join(wm,`vscode-ipc-${t}.sock`):e=_m.join(JD.tmpdir(),`vscode-${t}.sock`);let n=QD.get(process.platform);return n!==void 0&&e.length>n&&(0,Ai.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}ce.generateRandomPipeName=ZD;function eR(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let s=(0,ea.createServer)(a=>{s.close(),n([new Zr(a,e),new ei(a,e)])});s.on("error",o),s.listen(t,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}ce.createClientPipeTransport=eR;function tR(t,e="utf-8"){let n=(0,ea.createConnection)(t);return[new Zr(n,e),new ei(n,e)]}ce.createServerPipeTransport=tR;function nR(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let s=(0,ea.createServer)(a=>{s.close(),n([new Zr(a,e),new ei(a,e)])});s.on("error",o),s.listen(t,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}ce.createClientSocketTransport=nR;function rR(t,e="utf-8"){let n=(0,ea.createConnection)(t,"127.0.0.1");return[new Zr(n,e),new ei(n,e)]}ce.createServerSocketTransport=rR;function iR(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function oR(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function sR(t,e,n,r){n||(n=Kt.NullLogger);let i=iR(t)?new Qs(t):t,o=oR(e)?new Zs(e):e;return Kt.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Kt.createMessageConnection)(i,o,n,r)}ce.createMessageConnection=sR});var Ol=w((yN,bm)=>{"use strict";bm.exports=ti()});var ua={};fD(ua,{AnnotatedTextEdit:()=>or,ChangeAnnotation:()=>ni,ChangeAnnotationIdentifier:()=>ut,CodeAction:()=>hd,CodeActionContext:()=>fd,CodeActionKind:()=>dd,CodeActionTriggerKind:()=>jo,CodeDescription:()=>zl,CodeLens:()=>pd,Color:()=>ra,ColorInformation:()=>Ll,ColorPresentation:()=>Al,Command:()=>ri,CompletionItem:()=>Zl,CompletionItemKind:()=>Gl,CompletionItemLabelDetails:()=>Ql,CompletionItemTag:()=>Xl,CompletionList:()=>ed,CreateFile:()=>ji,DeleteFile:()=>$i,Diagnostic:()=>Io,DiagnosticRelatedInformation:()=>ia,DiagnosticSeverity:()=>$l,DiagnosticTag:()=>Wl,DocumentHighlight:()=>od,DocumentHighlightKind:()=>id,DocumentLink:()=>md,DocumentSymbol:()=>ld,DocumentUri:()=>Nl,EOL:()=>cR,FoldingRange:()=>Hl,FoldingRangeKind:()=>jl,FormattingOptions:()=>gd,Hover:()=>td,InlayHint:()=>Sd,InlayHintKind:()=>aa,InlayHintLabelPart:()=>ca,InlineValueContext:()=>Rd,InlineValueEvaluatableExpression:()=>Dd,InlineValueText:()=>wd,InlineValueVariableLookup:()=>bd,InsertReplaceEdit:()=>Jl,InsertTextFormat:()=>Vl,InsertTextMode:()=>Yl,Location:()=>No,LocationLink:()=>Ml,MarkedString:()=>Ao,MarkupContent:()=>Wi,MarkupKind:()=>sa,OptionalVersionedTextDocumentIdentifier:()=>Lo,ParameterInformation:()=>nd,Position:()=>nn,Range:()=>Ue,RenameFile:()=>Hi,SelectionRange:()=>vd,SemanticTokenModifiers:()=>Cd,SemanticTokenTypes:()=>yd,SemanticTokens:()=>_d,SignatureInformation:()=>rd,SymbolInformation:()=>cd,SymbolKind:()=>sd,SymbolTag:()=>ad,TextDocument:()=>Pd,TextDocumentEdit:()=>Mo,TextDocumentIdentifier:()=>Kl,TextDocumentItem:()=>Bl,TextEdit:()=>Wn,URI:()=>na,VersionedTextDocumentIdentifier:()=>Ul,WorkspaceChange:()=>aR,WorkspaceEdit:()=>oa,WorkspaceFolder:()=>Td,WorkspaceSymbol:()=>ud,integer:()=>Il,uinteger:()=>Oo});var Nl,na,Il,Oo,nn,Ue,No,Ml,ra,Ll,Al,jl,Hl,ia,$l,Wl,zl,Io,ri,Wn,ni,ut,or,Mo,ji,Hi,$i,oa,ta,Dm,aR,Kl,Ul,Lo,Bl,sa,Wi,Gl,Vl,Xl,Jl,Yl,Ql,Zl,ed,Ao,td,nd,rd,id,od,sd,ad,cd,ud,ld,dd,jo,fd,hd,pd,gd,md,vd,yd,Cd,_d,wd,bd,Dd,Rd,aa,ca,Sd,Td,cR,Pd,uR,S,la=dD(()=>{"use strict";(function(t){function e(n){return typeof n=="string"}t.is=e})(Nl||(Nl={}));(function(t){function e(n){return typeof n=="string"}t.is=e})(na||(na={}));(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(Il||(Il={}));(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(Oo||(Oo={}));(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=Oo.MAX_VALUE),i===Number.MAX_VALUE&&(i=Oo.MAX_VALUE),{line:r,character:i}}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&S.uinteger(i.line)&&S.uinteger(i.character)}t.is=n})(nn||(nn={}));(function(t){function e(r,i,o,s){if(S.uinteger(r)&&S.uinteger(i)&&S.uinteger(o)&&S.uinteger(s))return{start:nn.create(r,i),end:nn.create(o,s)};if(nn.is(r)&&nn.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(o,", ").concat(s,"]"))}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&nn.is(i.start)&&nn.is(i.end)}t.is=n})(Ue||(Ue={}));(function(t){function e(r,i){return{uri:r,range:i}}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&Ue.is(i.range)&&(S.string(i.uri)||S.undefined(i.uri))}t.is=n})(No||(No={}));(function(t){function e(r,i,o,s){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:s}}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&Ue.is(i.targetRange)&&S.string(i.targetUri)&&Ue.is(i.targetSelectionRange)&&(Ue.is(i.originSelectionRange)||S.undefined(i.originSelectionRange))}t.is=n})(Ml||(Ml={}));(function(t){function e(r,i,o,s){return{red:r,green:i,blue:o,alpha:s}}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&S.numberRange(i.red,0,1)&&S.numberRange(i.green,0,1)&&S.numberRange(i.blue,0,1)&&S.numberRange(i.alpha,0,1)}t.is=n})(ra||(ra={}));(function(t){function e(r,i){return{range:r,color:i}}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&Ue.is(i.range)&&ra.is(i.color)}t.is=n})(Ll||(Ll={}));(function(t){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&S.string(i.label)&&(S.undefined(i.textEdit)||Wn.is(i))&&(S.undefined(i.additionalTextEdits)||S.typedArray(i.additionalTextEdits,Wn.is))}t.is=n})(Al||(Al={}));(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(jl||(jl={}));(function(t){function e(r,i,o,s,a,c){var l={startLine:r,endLine:i};return S.defined(o)&&(l.startCharacter=o),S.defined(s)&&(l.endCharacter=s),S.defined(a)&&(l.kind=a),S.defined(c)&&(l.collapsedText=c),l}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&S.uinteger(i.startLine)&&S.uinteger(i.startLine)&&(S.undefined(i.startCharacter)||S.uinteger(i.startCharacter))&&(S.undefined(i.endCharacter)||S.uinteger(i.endCharacter))&&(S.undefined(i.kind)||S.string(i.kind))}t.is=n})(Hl||(Hl={}));(function(t){function e(r,i){return{location:r,message:i}}t.create=e;function n(r){var i=r;return S.defined(i)&&No.is(i.location)&&S.string(i.message)}t.is=n})(ia||(ia={}));(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})($l||($l={}));(function(t){t.Unnecessary=1,t.Deprecated=2})(Wl||(Wl={}));(function(t){function e(n){var r=n;return S.objectLiteral(r)&&S.string(r.href)}t.is=e})(zl||(zl={}));(function(t){function e(r,i,o,s,a,c){var l={range:r,message:i};return S.defined(o)&&(l.severity=o),S.defined(s)&&(l.code=s),S.defined(a)&&(l.source=a),S.defined(c)&&(l.relatedInformation=c),l}t.create=e;function n(r){var i,o=r;return S.defined(o)&&Ue.is(o.range)&&S.string(o.message)&&(S.number(o.severity)||S.undefined(o.severity))&&(S.integer(o.code)||S.string(o.code)||S.undefined(o.code))&&(S.undefined(o.codeDescription)||S.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(S.string(o.source)||S.undefined(o.source))&&(S.undefined(o.relatedInformation)||S.typedArray(o.relatedInformation,ia.is))}t.is=n})(Io||(Io={}));(function(t){function e(r,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a={title:r,command:i};return S.defined(o)&&o.length>0&&(a.arguments=o),a}t.create=e;function n(r){var i=r;return S.defined(i)&&S.string(i.title)&&S.string(i.command)}t.is=n})(ri||(ri={}));(function(t){function e(o,s){return{range:o,newText:s}}t.replace=e;function n(o,s){return{range:{start:o,end:o},newText:s}}t.insert=n;function r(o){return{range:o,newText:""}}t.del=r;function i(o){var s=o;return S.objectLiteral(s)&&S.string(s.newText)&&Ue.is(s.range)}t.is=i})(Wn||(Wn={}));(function(t){function e(r,i,o){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),o!==void 0&&(s.description=o),s}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&S.string(i.label)&&(S.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(S.string(i.description)||i.description===void 0)}t.is=n})(ni||(ni={}));(function(t){function e(n){var r=n;return S.string(r)}t.is=e})(ut||(ut={}));(function(t){function e(o,s,a){return{range:o,newText:s,annotationId:a}}t.replace=e;function n(o,s,a){return{range:{start:o,end:o},newText:s,annotationId:a}}t.insert=n;function r(o,s){return{range:o,newText:"",annotationId:s}}t.del=r;function i(o){var s=o;return Wn.is(s)&&(ni.is(s.annotationId)||ut.is(s.annotationId))}t.is=i})(or||(or={}));(function(t){function e(r,i){return{textDocument:r,edits:i}}t.create=e;function n(r){var i=r;return S.defined(i)&&Lo.is(i.textDocument)&&Array.isArray(i.edits)}t.is=n})(Mo||(Mo={}));(function(t){function e(r,i,o){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&S.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||S.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||S.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ut.is(i.annotationId))}t.is=n})(ji||(ji={}));(function(t){function e(r,i,o,s){var a={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(a.options=o),s!==void 0&&(a.annotationId=s),a}t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&S.string(i.oldUri)&&S.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||S.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||S.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ut.is(i.annotationId))}t.is=n})(Hi||(Hi={}));(function(t){function e(r,i,o){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&S.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||S.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||S.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||ut.is(i.annotationId))}t.is=n})($i||($i={}));(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return S.string(i.kind)?ji.is(i)||Hi.is(i)||$i.is(i):Mo.is(i)}))}t.is=e})(oa||(oa={}));ta=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return t.prototype.insert=function(e,n,r){var i,o;if(r===void 0?i=Wn.insert(e,n):ut.is(r)?(o=r,i=or.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=or.insert(e,n,o)),this.edits.push(i),o!==void 0)return o},t.prototype.replace=function(e,n,r){var i,o;if(r===void 0?i=Wn.replace(e,n):ut.is(r)?(o=r,i=or.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=or.replace(e,n,o)),this.edits.push(i),o!==void 0)return o},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Wn.del(e):ut.is(n)?(i=n,r=or.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=or.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Dm=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(ut.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),aR=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Dm(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(Mo.is(r)){var i=new ta(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new ta(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(Lo.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],o={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(o),r=new ta(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new ta(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Dm,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ni.is(n)||ut.is(n)?i=n:r=n;var o,s;if(i===void 0?o=ji.create(e,r):(s=ut.is(i)?i:this._changeAnnotations.manage(i),o=ji.create(e,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ni.is(r)||ut.is(r)?o=r:i=r;var s,a;if(o===void 0?s=Hi.create(e,n,i):(a=ut.is(o)?o:this._changeAnnotations.manage(o),s=Hi.create(e,n,i,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ni.is(n)||ut.is(n)?i=n:r=n;var o,s;if(i===void 0?o=$i.create(e,r):(s=ut.is(i)?i:this._changeAnnotations.manage(i),o=$i.create(e,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},t}();(function(t){function e(r){return{uri:r}}t.create=e;function n(r){var i=r;return S.defined(i)&&S.string(i.uri)}t.is=n})(Kl||(Kl={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return S.defined(i)&&S.string(i.uri)&&S.integer(i.version)}t.is=n})(Ul||(Ul={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return S.defined(i)&&S.string(i.uri)&&(i.version===null||S.integer(i.version))}t.is=n})(Lo||(Lo={}));(function(t){function e(r,i,o,s){return{uri:r,languageId:i,version:o,text:s}}t.create=e;function n(r){var i=r;return S.defined(i)&&S.string(i.uri)&&S.string(i.languageId)&&S.integer(i.version)&&S.string(i.text)}t.is=n})(Bl||(Bl={}));(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){var r=n;return r===t.PlainText||r===t.Markdown}t.is=e})(sa||(sa={}));(function(t){function e(n){var r=n;return S.objectLiteral(n)&&sa.is(r.kind)&&S.string(r.value)}t.is=e})(Wi||(Wi={}));(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Gl||(Gl={}));(function(t){t.PlainText=1,t.Snippet=2})(Vl||(Vl={}));(function(t){t.Deprecated=1})(Xl||(Xl={}));(function(t){function e(r,i,o){return{newText:r,insert:i,replace:o}}t.create=e;function n(r){var i=r;return i&&S.string(i.newText)&&Ue.is(i.insert)&&Ue.is(i.replace)}t.is=n})(Jl||(Jl={}));(function(t){t.asIs=1,t.adjustIndentation=2})(Yl||(Yl={}));(function(t){function e(n){var r=n;return r&&(S.string(r.detail)||r.detail===void 0)&&(S.string(r.description)||r.description===void 0)}t.is=e})(Ql||(Ql={}));(function(t){function e(n){return{label:n}}t.create=e})(Zl||(Zl={}));(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}t.create=e})(ed||(ed={}));(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function n(r){var i=r;return S.string(i)||S.objectLiteral(i)&&S.string(i.language)&&S.string(i.value)}t.is=n})(Ao||(Ao={}));(function(t){function e(n){var r=n;return!!r&&S.objectLiteral(r)&&(Wi.is(r.contents)||Ao.is(r.contents)||S.typedArray(r.contents,Ao.is))&&(n.range===void 0||Ue.is(n.range))}t.is=e})(td||(td={}));(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}t.create=e})(nd||(nd={}));(function(t){function e(n,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s={label:n};return S.defined(r)&&(s.documentation=r),S.defined(i)?s.parameters=i:s.parameters=[],s}t.create=e})(rd||(rd={}));(function(t){t.Text=1,t.Read=2,t.Write=3})(id||(id={}));(function(t){function e(n,r){var i={range:n};return S.number(r)&&(i.kind=r),i}t.create=e})(od||(od={}));(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(sd||(sd={}));(function(t){t.Deprecated=1})(ad||(ad={}));(function(t){function e(n,r,i,o,s){var a={name:n,kind:r,location:{uri:o,range:i}};return s&&(a.containerName=s),a}t.create=e})(cd||(cd={}));(function(t){function e(n,r,i,o){return o!==void 0?{name:n,kind:r,location:{uri:i,range:o}}:{name:n,kind:r,location:{uri:i}}}t.create=e})(ud||(ud={}));(function(t){function e(r,i,o,s,a,c){var l={name:r,detail:i,kind:o,range:s,selectionRange:a};return c!==void 0&&(l.children=c),l}t.create=e;function n(r){var i=r;return i&&S.string(i.name)&&S.number(i.kind)&&Ue.is(i.range)&&Ue.is(i.selectionRange)&&(i.detail===void 0||S.string(i.detail))&&(i.deprecated===void 0||S.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=n})(ld||(ld={}));(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(dd||(dd={}));(function(t){t.Invoked=1,t.Automatic=2})(jo||(jo={}));(function(t){function e(r,i,o){var s={diagnostics:r};return i!=null&&(s.only=i),o!=null&&(s.triggerKind=o),s}t.create=e;function n(r){var i=r;return S.defined(i)&&S.typedArray(i.diagnostics,Io.is)&&(i.only===void 0||S.typedArray(i.only,S.string))&&(i.triggerKind===void 0||i.triggerKind===jo.Invoked||i.triggerKind===jo.Automatic)}t.is=n})(fd||(fd={}));(function(t){function e(r,i,o){var s={title:r},a=!0;return typeof i=="string"?(a=!1,s.kind=i):ri.is(i)?s.command=i:s.edit=i,a&&o!==void 0&&(s.kind=o),s}t.create=e;function n(r){var i=r;return i&&S.string(i.title)&&(i.diagnostics===void 0||S.typedArray(i.diagnostics,Io.is))&&(i.kind===void 0||S.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||ri.is(i.command))&&(i.isPreferred===void 0||S.boolean(i.isPreferred))&&(i.edit===void 0||oa.is(i.edit))}t.is=n})(hd||(hd={}));(function(t){function e(r,i){var o={range:r};return S.defined(i)&&(o.data=i),o}t.create=e;function n(r){var i=r;return S.defined(i)&&Ue.is(i.range)&&(S.undefined(i.command)||ri.is(i.command))}t.is=n})(pd||(pd={}));(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}t.create=e;function n(r){var i=r;return S.defined(i)&&S.uinteger(i.tabSize)&&S.boolean(i.insertSpaces)}t.is=n})(gd||(gd={}));(function(t){function e(r,i,o){return{range:r,target:i,data:o}}t.create=e;function n(r){var i=r;return S.defined(i)&&Ue.is(i.range)&&(S.undefined(i.target)||S.string(i.target))}t.is=n})(md||(md={}));(function(t){function e(r,i){return{range:r,parent:i}}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&Ue.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=n})(vd||(vd={}));(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(yd||(yd={}));(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Cd||(Cd={}));(function(t){function e(n){var r=n;return S.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(_d||(_d={}));(function(t){function e(r,i){return{range:r,text:i}}t.create=e;function n(r){var i=r;return i!=null&&Ue.is(i.range)&&S.string(i.text)}t.is=n})(wd||(wd={}));(function(t){function e(r,i,o){return{range:r,variableName:i,caseSensitiveLookup:o}}t.create=e;function n(r){var i=r;return i!=null&&Ue.is(i.range)&&S.boolean(i.caseSensitiveLookup)&&(S.string(i.variableName)||i.variableName===void 0)}t.is=n})(bd||(bd={}));(function(t){function e(r,i){return{range:r,expression:i}}t.create=e;function n(r){var i=r;return i!=null&&Ue.is(i.range)&&(S.string(i.expression)||i.expression===void 0)}t.is=n})(Dd||(Dd={}));(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}t.create=e;function n(r){var i=r;return S.defined(i)&&Ue.is(r.stoppedLocation)}t.is=n})(Rd||(Rd={}));(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}t.is=e})(aa||(aa={}));(function(t){function e(r){return{value:r}}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&(i.tooltip===void 0||S.string(i.tooltip)||Wi.is(i.tooltip))&&(i.location===void 0||No.is(i.location))&&(i.command===void 0||ri.is(i.command))}t.is=n})(ca||(ca={}));(function(t){function e(r,i,o){var s={position:r,label:i};return o!==void 0&&(s.kind=o),s}t.create=e;function n(r){var i=r;return S.objectLiteral(i)&&nn.is(i.position)&&(S.string(i.label)||S.typedArray(i.label,ca.is))&&(i.kind===void 0||aa.is(i.kind))&&i.textEdits===void 0||S.typedArray(i.textEdits,Wn.is)&&(i.tooltip===void 0||S.string(i.tooltip)||Wi.is(i.tooltip))&&(i.paddingLeft===void 0||S.boolean(i.paddingLeft))&&(i.paddingRight===void 0||S.boolean(i.paddingRight))}t.is=n})(Sd||(Sd={}));(function(t){function e(n){var r=n;return S.objectLiteral(r)&&na.is(r.uri)&&S.string(r.name)}t.is=e})(Td||(Td={}));cR=[`
`,`\r
`,"\r"];(function(t){function e(o,s,a,c){return new uR(o,s,a,c)}t.create=e;function n(o){var s=o;return!!(S.defined(s)&&S.string(s.uri)&&(S.undefined(s.languageId)||S.string(s.languageId))&&S.uinteger(s.lineCount)&&S.func(s.getText)&&S.func(s.positionAt)&&S.func(s.offsetAt))}t.is=n;function r(o,s){for(var a=o.getText(),c=i(s,function(m,b){var R=m.range.start.line-b.range.start.line;return R===0?m.range.start.character-b.range.start.character:R}),l=a.length,d=c.length-1;d>=0;d--){var p=c[d],f=o.offsetAt(p.range.start),g=o.offsetAt(p.range.end);if(g<=l)a=a.substring(0,f)+p.newText+a.substring(g,a.length);else throw new Error("Overlapping edit");l=f}return a}t.applyEdits=r;function i(o,s){if(o.length<=1)return o;var a=o.length/2|0,c=o.slice(0,a),l=o.slice(a);i(c,s),i(l,s);for(var d=0,p=0,f=0;d<c.length&&p<l.length;){var g=s(c[d],l[p]);g<=0?o[f++]=c[d++]:o[f++]=l[p++]}for(;d<c.length;)o[f++]=c[d++];for(;p<l.length;)o[f++]=l[p++];return o}})(Pd||(Pd={}));uR=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var o=n.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return nn.create(0,e);for(;r<i;){var o=Math.floor((r+i)/2);n[o]>e?i=o:r=o+1}var s=r-1;return nn.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}();(function(t){var e=Object.prototype.toString;function n(g){return typeof g<"u"}t.defined=n;function r(g){return typeof g>"u"}t.undefined=r;function i(g){return g===!0||g===!1}t.boolean=i;function o(g){return e.call(g)==="[object String]"}t.string=o;function s(g){return e.call(g)==="[object Number]"}t.number=s;function a(g,m,b){return e.call(g)==="[object Number]"&&m<=g&&g<=b}t.numberRange=a;function c(g){return e.call(g)==="[object Number]"&&-2147483648<=g&&g<=2147483647}t.integer=c;function l(g){return e.call(g)==="[object Number]"&&0<=g&&g<=2147483647}t.uinteger=l;function d(g){return e.call(g)==="[object Function]"}t.func=d;function p(g){return g!==null&&typeof g=="object"}t.objectLiteral=p;function f(g,m){return Array.isArray(g)&&g.every(m)}t.typedArray=f})(S||(S={}))});var je=w(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.ProtocolNotificationType=Dt.ProtocolNotificationType0=Dt.ProtocolRequestType=Dt.ProtocolRequestType0=Dt.RegistrationType=Dt.MessageDirection=void 0;var zi=ti(),lR;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(lR=Dt.MessageDirection||(Dt.MessageDirection={}));var qd=class{constructor(e){this.method=e}};Dt.RegistrationType=qd;var xd=class extends zi.RequestType0{constructor(e){super(e)}};Dt.ProtocolRequestType0=xd;var kd=class extends zi.RequestType{constructor(e){super(e,zi.ParameterStructures.byName)}};Dt.ProtocolRequestType=kd;var Ed=class extends zi.NotificationType0{constructor(e){super(e)}};Dt.ProtocolNotificationType0=Ed;var Fd=class extends zi.NotificationType{constructor(e){super(e,zi.ParameterStructures.byName)}};Dt.ProtocolNotificationType=Fd});var da=w(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.objectLiteral=Xe.typedArray=Xe.stringArray=Xe.array=Xe.func=Xe.error=Xe.number=Xe.string=Xe.boolean=void 0;function dR(t){return t===!0||t===!1}Xe.boolean=dR;function Rm(t){return typeof t=="string"||t instanceof String}Xe.string=Rm;function fR(t){return typeof t=="number"||t instanceof Number}Xe.number=fR;function hR(t){return t instanceof Error}Xe.error=hR;function pR(t){return typeof t=="function"}Xe.func=pR;function Sm(t){return Array.isArray(t)}Xe.array=Sm;function gR(t){return Sm(t)&&t.every(e=>Rm(e))}Xe.stringArray=gR;function mR(t,e){return Array.isArray(t)&&t.every(e)}Xe.typedArray=mR;function vR(t){return t!==null&&typeof t=="object"}Xe.objectLiteral=vR});var Pm=w(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.ImplementationRequest=void 0;var Tm=je(),yR;(function(t){t.method="textDocument/implementation",t.messageDirection=Tm.MessageDirection.clientToServer,t.type=new Tm.ProtocolRequestType(t.method)})(yR=Ho.ImplementationRequest||(Ho.ImplementationRequest={}))});var xm=w($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.TypeDefinitionRequest=void 0;var qm=je(),CR;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=qm.MessageDirection.clientToServer,t.type=new qm.ProtocolRequestType(t.method)})(CR=$o.TypeDefinitionRequest||($o.TypeDefinitionRequest={}))});var km=w(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.DidChangeWorkspaceFoldersNotification=Pr.WorkspaceFoldersRequest=void 0;var fa=je(),_R;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=fa.MessageDirection.serverToClient,t.type=new fa.ProtocolRequestType0(t.method)})(_R=Pr.WorkspaceFoldersRequest||(Pr.WorkspaceFoldersRequest={}));var wR;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=fa.MessageDirection.clientToServer,t.type=new fa.ProtocolNotificationType(t.method)})(wR=Pr.DidChangeWorkspaceFoldersNotification||(Pr.DidChangeWorkspaceFoldersNotification={}))});var Fm=w(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.ConfigurationRequest=void 0;var Em=je(),bR;(function(t){t.method="workspace/configuration",t.messageDirection=Em.MessageDirection.serverToClient,t.type=new Em.ProtocolRequestType(t.method)})(bR=Wo.ConfigurationRequest||(Wo.ConfigurationRequest={}))});var Om=w(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.ColorPresentationRequest=qr.DocumentColorRequest=void 0;var ha=je(),DR;(function(t){t.method="textDocument/documentColor",t.messageDirection=ha.MessageDirection.clientToServer,t.type=new ha.ProtocolRequestType(t.method)})(DR=qr.DocumentColorRequest||(qr.DocumentColorRequest={}));var RR;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=ha.MessageDirection.clientToServer,t.type=new ha.ProtocolRequestType(t.method)})(RR=qr.ColorPresentationRequest||(qr.ColorPresentationRequest={}))});var Im=w(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.FoldingRangeRequest=void 0;var Nm=je(),SR;(function(t){t.method="textDocument/foldingRange",t.messageDirection=Nm.MessageDirection.clientToServer,t.type=new Nm.ProtocolRequestType(t.method)})(SR=zo.FoldingRangeRequest||(zo.FoldingRangeRequest={}))});var Lm=w(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.DeclarationRequest=void 0;var Mm=je(),TR;(function(t){t.method="textDocument/declaration",t.messageDirection=Mm.MessageDirection.clientToServer,t.type=new Mm.ProtocolRequestType(t.method)})(TR=Ko.DeclarationRequest||(Ko.DeclarationRequest={}))});var jm=w(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.SelectionRangeRequest=void 0;var Am=je(),PR;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Am.MessageDirection.clientToServer,t.type=new Am.ProtocolRequestType(t.method)})(PR=Uo.SelectionRangeRequest||(Uo.SelectionRangeRequest={}))});var Hm=w(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.WorkDoneProgressCancelNotification=wn.WorkDoneProgressCreateRequest=wn.WorkDoneProgress=void 0;var qR=ti(),pa=je(),xR;(function(t){t.type=new qR.ProgressType;function e(n){return n===t.type}t.is=e})(xR=wn.WorkDoneProgress||(wn.WorkDoneProgress={}));var kR;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=pa.MessageDirection.serverToClient,t.type=new pa.ProtocolRequestType(t.method)})(kR=wn.WorkDoneProgressCreateRequest||(wn.WorkDoneProgressCreateRequest={}));var ER;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=pa.MessageDirection.clientToServer,t.type=new pa.ProtocolNotificationType(t.method)})(ER=wn.WorkDoneProgressCancelNotification||(wn.WorkDoneProgressCancelNotification={}))});var $m=w(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.CallHierarchyOutgoingCallsRequest=bn.CallHierarchyIncomingCallsRequest=bn.CallHierarchyPrepareRequest=void 0;var Ki=je(),FR;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Ki.MessageDirection.clientToServer,t.type=new Ki.ProtocolRequestType(t.method)})(FR=bn.CallHierarchyPrepareRequest||(bn.CallHierarchyPrepareRequest={}));var OR;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Ki.MessageDirection.clientToServer,t.type=new Ki.ProtocolRequestType(t.method)})(OR=bn.CallHierarchyIncomingCallsRequest||(bn.CallHierarchyIncomingCallsRequest={}));var NR;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Ki.MessageDirection.clientToServer,t.type=new Ki.ProtocolRequestType(t.method)})(NR=bn.CallHierarchyOutgoingCallsRequest||(bn.CallHierarchyOutgoingCallsRequest={}))});var Wm=w(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.SemanticTokensRefreshRequest=Je.SemanticTokensRangeRequest=Je.SemanticTokensDeltaRequest=Je.SemanticTokensRequest=Je.SemanticTokensRegistrationType=Je.TokenFormat=void 0;var sr=je(),IR;(function(t){t.Relative="relative"})(IR=Je.TokenFormat||(Je.TokenFormat={}));var ga;(function(t){t.method="textDocument/semanticTokens",t.type=new sr.RegistrationType(t.method)})(ga=Je.SemanticTokensRegistrationType||(Je.SemanticTokensRegistrationType={}));var MR;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=sr.MessageDirection.clientToServer,t.type=new sr.ProtocolRequestType(t.method),t.registrationMethod=ga.method})(MR=Je.SemanticTokensRequest||(Je.SemanticTokensRequest={}));var LR;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=sr.MessageDirection.clientToServer,t.type=new sr.ProtocolRequestType(t.method),t.registrationMethod=ga.method})(LR=Je.SemanticTokensDeltaRequest||(Je.SemanticTokensDeltaRequest={}));var AR;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=sr.MessageDirection.clientToServer,t.type=new sr.ProtocolRequestType(t.method),t.registrationMethod=ga.method})(AR=Je.SemanticTokensRangeRequest||(Je.SemanticTokensRangeRequest={}));var jR;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=sr.MessageDirection.serverToClient,t.type=new sr.ProtocolRequestType0(t.method)})(jR=Je.SemanticTokensRefreshRequest||(Je.SemanticTokensRefreshRequest={}))});var Km=w(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.ShowDocumentRequest=void 0;var zm=je(),HR;(function(t){t.method="window/showDocument",t.messageDirection=zm.MessageDirection.serverToClient,t.type=new zm.ProtocolRequestType(t.method)})(HR=Bo.ShowDocumentRequest||(Bo.ShowDocumentRequest={}))});var Bm=w(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.LinkedEditingRangeRequest=void 0;var Um=je(),$R;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Um.MessageDirection.clientToServer,t.type=new Um.ProtocolRequestType(t.method)})($R=Go.LinkedEditingRangeRequest||(Go.LinkedEditingRangeRequest={}))});var Gm=w(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.WillDeleteFilesRequest=He.DidDeleteFilesNotification=He.DidRenameFilesNotification=He.WillRenameFilesRequest=He.DidCreateFilesNotification=He.WillCreateFilesRequest=He.FileOperationPatternKind=void 0;var rn=je(),WR;(function(t){t.file="file",t.folder="folder"})(WR=He.FileOperationPatternKind||(He.FileOperationPatternKind={}));var zR;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(zR=He.WillCreateFilesRequest||(He.WillCreateFilesRequest={}));var KR;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolNotificationType(t.method)})(KR=He.DidCreateFilesNotification||(He.DidCreateFilesNotification={}));var UR;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(UR=He.WillRenameFilesRequest||(He.WillRenameFilesRequest={}));var BR;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolNotificationType(t.method)})(BR=He.DidRenameFilesNotification||(He.DidRenameFilesNotification={}));var GR;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolNotificationType(t.method)})(GR=He.DidDeleteFilesNotification||(He.DidDeleteFilesNotification={}));var VR;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(VR=He.WillDeleteFilesRequest||(He.WillDeleteFilesRequest={}))});var Xm=w(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.MonikerRequest=Dn.MonikerKind=Dn.UniquenessLevel=void 0;var Vm=je(),XR;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(XR=Dn.UniquenessLevel||(Dn.UniquenessLevel={}));var JR;(function(t){t.$import="import",t.$export="export",t.local="local"})(JR=Dn.MonikerKind||(Dn.MonikerKind={}));var YR;(function(t){t.method="textDocument/moniker",t.messageDirection=Vm.MessageDirection.clientToServer,t.type=new Vm.ProtocolRequestType(t.method)})(YR=Dn.MonikerRequest||(Dn.MonikerRequest={}))});var Jm=w(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.TypeHierarchySubtypesRequest=Rn.TypeHierarchySupertypesRequest=Rn.TypeHierarchyPrepareRequest=void 0;var Ui=je(),QR;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Ui.MessageDirection.clientToServer,t.type=new Ui.ProtocolRequestType(t.method)})(QR=Rn.TypeHierarchyPrepareRequest||(Rn.TypeHierarchyPrepareRequest={}));var ZR;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Ui.MessageDirection.clientToServer,t.type=new Ui.ProtocolRequestType(t.method)})(ZR=Rn.TypeHierarchySupertypesRequest||(Rn.TypeHierarchySupertypesRequest={}));var eS;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Ui.MessageDirection.clientToServer,t.type=new Ui.ProtocolRequestType(t.method)})(eS=Rn.TypeHierarchySubtypesRequest||(Rn.TypeHierarchySubtypesRequest={}))});var Ym=w(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.InlineValueRefreshRequest=xr.InlineValueRequest=void 0;var ma=je(),tS;(function(t){t.method="textDocument/inlineValue",t.messageDirection=ma.MessageDirection.clientToServer,t.type=new ma.ProtocolRequestType(t.method)})(tS=xr.InlineValueRequest||(xr.InlineValueRequest={}));var nS;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=ma.MessageDirection.serverToClient,t.type=new ma.ProtocolRequestType0(t.method)})(nS=xr.InlineValueRefreshRequest||(xr.InlineValueRefreshRequest={}))});var Qm=w(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.InlayHintRefreshRequest=Sn.InlayHintResolveRequest=Sn.InlayHintRequest=void 0;var Bi=je(),rS;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Bi.MessageDirection.clientToServer,t.type=new Bi.ProtocolRequestType(t.method)})(rS=Sn.InlayHintRequest||(Sn.InlayHintRequest={}));var iS;(function(t){t.method="inlayHint/resolve",t.messageDirection=Bi.MessageDirection.clientToServer,t.type=new Bi.ProtocolRequestType(t.method)})(iS=Sn.InlayHintResolveRequest||(Sn.InlayHintResolveRequest={}));var oS;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Bi.MessageDirection.serverToClient,t.type=new Bi.ProtocolRequestType0(t.method)})(oS=Sn.InlayHintRefreshRequest||(Sn.InlayHintRefreshRequest={}))});var ev=w(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.DiagnosticRefreshRequest=lt.WorkspaceDiagnosticRequest=lt.DocumentDiagnosticRequest=lt.DocumentDiagnosticReportKind=lt.DiagnosticServerCancellationData=void 0;var Zm=ti(),sS=da(),Gi=je(),aS;(function(t){function e(n){let r=n;return r&&sS.boolean(r.retriggerRequest)}t.is=e})(aS=lt.DiagnosticServerCancellationData||(lt.DiagnosticServerCancellationData={}));var cS;(function(t){t.Full="full",t.Unchanged="unchanged"})(cS=lt.DocumentDiagnosticReportKind||(lt.DocumentDiagnosticReportKind={}));var uS;(function(t){t.method="textDocument/diagnostic",t.messageDirection=Gi.MessageDirection.clientToServer,t.type=new Gi.ProtocolRequestType(t.method),t.partialResult=new Zm.ProgressType})(uS=lt.DocumentDiagnosticRequest||(lt.DocumentDiagnosticRequest={}));var lS;(function(t){t.method="workspace/diagnostic",t.messageDirection=Gi.MessageDirection.clientToServer,t.type=new Gi.ProtocolRequestType(t.method),t.partialResult=new Zm.ProgressType})(lS=lt.WorkspaceDiagnosticRequest||(lt.WorkspaceDiagnosticRequest={}));var dS;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=Gi.MessageDirection.serverToClient,t.type=new Gi.ProtocolRequestType0(t.method)})(dS=lt.DiagnosticRefreshRequest||(lt.DiagnosticRefreshRequest={}))});var rv=w(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.DidCloseNotebookDocumentNotification=he.DidSaveNotebookDocumentNotification=he.DidChangeNotebookDocumentNotification=he.NotebookCellArrayChange=he.DidOpenNotebookDocumentNotification=he.NotebookDocumentSyncRegistrationType=he.NotebookDocument=he.NotebookCell=he.ExecutionSummary=he.NotebookCellKind=void 0;var Vo=(la(),wu(ua)),Tn=da(),zn=je(),tv;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(tv=he.NotebookCellKind||(he.NotebookCellKind={}));var nv;(function(t){function e(i,o){let s={executionOrder:i};return(o===!0||o===!1)&&(s.success=o),s}t.create=e;function n(i){let o=i;return Tn.objectLiteral(o)&&Vo.uinteger.is(o.executionOrder)&&(o.success===void 0||Tn.boolean(o.success))}t.is=n;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}t.equals=r})(nv=he.ExecutionSummary||(he.ExecutionSummary={}));var Od;(function(t){function e(o,s){return{kind:o,document:s}}t.create=e;function n(o){let s=o;return Tn.objectLiteral(s)&&tv.is(s.kind)&&Vo.DocumentUri.is(s.document)&&(s.metadata===void 0||Tn.objectLiteral(s.metadata))}t.is=n;function r(o,s){let a=new Set;return o.document!==s.document&&a.add("document"),o.kind!==s.kind&&a.add("kind"),o.executionSummary!==s.executionSummary&&a.add("executionSummary"),(o.metadata!==void 0||s.metadata!==void 0)&&!i(o.metadata,s.metadata)&&a.add("metadata"),(o.executionSummary!==void 0||s.executionSummary!==void 0)&&!nv.equals(o.executionSummary,s.executionSummary)&&a.add("executionSummary"),a}t.diff=r;function i(o,s){if(o===s)return!0;if(o==null||s===null||s===void 0||typeof o!=typeof s||typeof o!="object")return!1;let a=Array.isArray(o),c=Array.isArray(s);if(a!==c)return!1;if(a&&c){if(o.length!==s.length)return!1;for(let l=0;l<o.length;l++)if(!i(o[l],s[l]))return!1}if(Tn.objectLiteral(o)&&Tn.objectLiteral(s)){let l=Object.keys(o),d=Object.keys(s);if(l.length!==d.length||(l.sort(),d.sort(),!i(l,d)))return!1;for(let p=0;p<l.length;p++){let f=l[p];if(!i(o[f],s[f]))return!1}}return!0}})(Od=he.NotebookCell||(he.NotebookCell={}));var fS;(function(t){function e(r,i,o,s){return{uri:r,notebookType:i,version:o,cells:s}}t.create=e;function n(r){let i=r;return Tn.objectLiteral(i)&&Tn.string(i.uri)&&Vo.integer.is(i.version)&&Tn.typedArray(i.cells,Od.is)}t.is=n})(fS=he.NotebookDocument||(he.NotebookDocument={}));var Xo;(function(t){t.method="notebookDocument/sync",t.messageDirection=zn.MessageDirection.clientToServer,t.type=new zn.RegistrationType(t.method)})(Xo=he.NotebookDocumentSyncRegistrationType||(he.NotebookDocumentSyncRegistrationType={}));var hS;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=zn.MessageDirection.clientToServer,t.type=new zn.ProtocolNotificationType(t.method),t.registrationMethod=Xo.method})(hS=he.DidOpenNotebookDocumentNotification||(he.DidOpenNotebookDocumentNotification={}));var pS;(function(t){function e(r){let i=r;return Tn.objectLiteral(i)&&Vo.uinteger.is(i.start)&&Vo.uinteger.is(i.deleteCount)&&(i.cells===void 0||Tn.typedArray(i.cells,Od.is))}t.is=e;function n(r,i,o){let s={start:r,deleteCount:i};return o!==void 0&&(s.cells=o),s}t.create=n})(pS=he.NotebookCellArrayChange||(he.NotebookCellArrayChange={}));var gS;(function(t){t.method="notebookDocument/didChange",t.messageDirection=zn.MessageDirection.clientToServer,t.type=new zn.ProtocolNotificationType(t.method),t.registrationMethod=Xo.method})(gS=he.DidChangeNotebookDocumentNotification||(he.DidChangeNotebookDocumentNotification={}));var mS;(function(t){t.method="notebookDocument/didSave",t.messageDirection=zn.MessageDirection.clientToServer,t.type=new zn.ProtocolNotificationType(t.method),t.registrationMethod=Xo.method})(mS=he.DidSaveNotebookDocumentNotification||(he.DidSaveNotebookDocumentNotification={}));var vS;(function(t){t.method="notebookDocument/didClose",t.messageDirection=zn.MessageDirection.clientToServer,t.type=new zn.ProtocolNotificationType(t.method),t.registrationMethod=Xo.method})(vS=he.DidCloseNotebookDocumentNotification||(he.DidCloseNotebookDocumentNotification={}))});var fv=w(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.WorkspaceSymbolRequest=v.CodeActionResolveRequest=v.CodeActionRequest=v.DocumentSymbolRequest=v.DocumentHighlightRequest=v.ReferencesRequest=v.DefinitionRequest=v.SignatureHelpRequest=v.SignatureHelpTriggerKind=v.HoverRequest=v.CompletionResolveRequest=v.CompletionRequest=v.CompletionTriggerKind=v.PublishDiagnosticsNotification=v.WatchKind=v.RelativePattern=v.FileChangeType=v.DidChangeWatchedFilesNotification=v.WillSaveTextDocumentWaitUntilRequest=v.WillSaveTextDocumentNotification=v.TextDocumentSaveReason=v.DidSaveTextDocumentNotification=v.DidCloseTextDocumentNotification=v.DidChangeTextDocumentNotification=v.TextDocumentContentChangeEvent=v.DidOpenTextDocumentNotification=v.TextDocumentSyncKind=v.TelemetryEventNotification=v.LogMessageNotification=v.ShowMessageRequest=v.ShowMessageNotification=v.MessageType=v.DidChangeConfigurationNotification=v.ExitNotification=v.ShutdownRequest=v.InitializedNotification=v.InitializeErrorCodes=v.InitializeRequest=v.WorkDoneProgressOptions=v.TextDocumentRegistrationOptions=v.StaticRegistrationOptions=v.PositionEncodingKind=v.FailureHandlingKind=v.ResourceOperationKind=v.UnregistrationRequest=v.RegistrationRequest=v.DocumentSelector=v.NotebookCellTextDocumentFilter=v.NotebookDocumentFilter=v.TextDocumentFilter=void 0;v.TypeHierarchySubtypesRequest=v.TypeHierarchyPrepareRequest=v.MonikerRequest=v.MonikerKind=v.UniquenessLevel=v.WillDeleteFilesRequest=v.DidDeleteFilesNotification=v.WillRenameFilesRequest=v.DidRenameFilesNotification=v.WillCreateFilesRequest=v.DidCreateFilesNotification=v.FileOperationPatternKind=v.LinkedEditingRangeRequest=v.ShowDocumentRequest=v.SemanticTokensRegistrationType=v.SemanticTokensRefreshRequest=v.SemanticTokensRangeRequest=v.SemanticTokensDeltaRequest=v.SemanticTokensRequest=v.TokenFormat=v.CallHierarchyPrepareRequest=v.CallHierarchyOutgoingCallsRequest=v.CallHierarchyIncomingCallsRequest=v.WorkDoneProgressCancelNotification=v.WorkDoneProgressCreateRequest=v.WorkDoneProgress=v.SelectionRangeRequest=v.DeclarationRequest=v.FoldingRangeRequest=v.ColorPresentationRequest=v.DocumentColorRequest=v.ConfigurationRequest=v.DidChangeWorkspaceFoldersNotification=v.WorkspaceFoldersRequest=v.TypeDefinitionRequest=v.ImplementationRequest=v.ApplyWorkspaceEditRequest=v.ExecuteCommandRequest=v.PrepareRenameRequest=v.RenameRequest=v.PrepareSupportDefaultBehavior=v.DocumentOnTypeFormattingRequest=v.DocumentRangeFormattingRequest=v.DocumentFormattingRequest=v.DocumentLinkResolveRequest=v.DocumentLinkRequest=v.CodeLensRefreshRequest=v.CodeLensResolveRequest=v.CodeLensRequest=v.WorkspaceSymbolResolveRequest=void 0;v.DidCloseNotebookDocumentNotification=v.DidSaveNotebookDocumentNotification=v.DidChangeNotebookDocumentNotification=v.NotebookCellArrayChange=v.DidOpenNotebookDocumentNotification=v.NotebookDocumentSyncRegistrationType=v.NotebookDocument=v.NotebookCell=v.ExecutionSummary=v.NotebookCellKind=v.DiagnosticRefreshRequest=v.WorkspaceDiagnosticRequest=v.DocumentDiagnosticRequest=v.DocumentDiagnosticReportKind=v.DiagnosticServerCancellationData=v.InlayHintRefreshRequest=v.InlayHintResolveRequest=v.InlayHintRequest=v.InlineValueRefreshRequest=v.InlineValueRequest=v.TypeHierarchySupertypesRequest=void 0;var O=je(),iv=(la(),wu(ua)),dt=da(),yS=Pm();Object.defineProperty(v,"ImplementationRequest",{enumerable:!0,get:function(){return yS.ImplementationRequest}});var CS=xm();Object.defineProperty(v,"TypeDefinitionRequest",{enumerable:!0,get:function(){return CS.TypeDefinitionRequest}});var ov=km();Object.defineProperty(v,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return ov.WorkspaceFoldersRequest}});Object.defineProperty(v,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return ov.DidChangeWorkspaceFoldersNotification}});var _S=Fm();Object.defineProperty(v,"ConfigurationRequest",{enumerable:!0,get:function(){return _S.ConfigurationRequest}});var sv=Om();Object.defineProperty(v,"DocumentColorRequest",{enumerable:!0,get:function(){return sv.DocumentColorRequest}});Object.defineProperty(v,"ColorPresentationRequest",{enumerable:!0,get:function(){return sv.ColorPresentationRequest}});var wS=Im();Object.defineProperty(v,"FoldingRangeRequest",{enumerable:!0,get:function(){return wS.FoldingRangeRequest}});var bS=Lm();Object.defineProperty(v,"DeclarationRequest",{enumerable:!0,get:function(){return bS.DeclarationRequest}});var DS=jm();Object.defineProperty(v,"SelectionRangeRequest",{enumerable:!0,get:function(){return DS.SelectionRangeRequest}});var Nd=Hm();Object.defineProperty(v,"WorkDoneProgress",{enumerable:!0,get:function(){return Nd.WorkDoneProgress}});Object.defineProperty(v,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Nd.WorkDoneProgressCreateRequest}});Object.defineProperty(v,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Nd.WorkDoneProgressCancelNotification}});var Id=$m();Object.defineProperty(v,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Id.CallHierarchyIncomingCallsRequest}});Object.defineProperty(v,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Id.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(v,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Id.CallHierarchyPrepareRequest}});var Vi=Wm();Object.defineProperty(v,"TokenFormat",{enumerable:!0,get:function(){return Vi.TokenFormat}});Object.defineProperty(v,"SemanticTokensRequest",{enumerable:!0,get:function(){return Vi.SemanticTokensRequest}});Object.defineProperty(v,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Vi.SemanticTokensDeltaRequest}});Object.defineProperty(v,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Vi.SemanticTokensRangeRequest}});Object.defineProperty(v,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Vi.SemanticTokensRefreshRequest}});Object.defineProperty(v,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Vi.SemanticTokensRegistrationType}});var RS=Km();Object.defineProperty(v,"ShowDocumentRequest",{enumerable:!0,get:function(){return RS.ShowDocumentRequest}});var SS=Bm();Object.defineProperty(v,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return SS.LinkedEditingRangeRequest}});var ii=Gm();Object.defineProperty(v,"FileOperationPatternKind",{enumerable:!0,get:function(){return ii.FileOperationPatternKind}});Object.defineProperty(v,"DidCreateFilesNotification",{enumerable:!0,get:function(){return ii.DidCreateFilesNotification}});Object.defineProperty(v,"WillCreateFilesRequest",{enumerable:!0,get:function(){return ii.WillCreateFilesRequest}});Object.defineProperty(v,"DidRenameFilesNotification",{enumerable:!0,get:function(){return ii.DidRenameFilesNotification}});Object.defineProperty(v,"WillRenameFilesRequest",{enumerable:!0,get:function(){return ii.WillRenameFilesRequest}});Object.defineProperty(v,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return ii.DidDeleteFilesNotification}});Object.defineProperty(v,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return ii.WillDeleteFilesRequest}});var Md=Xm();Object.defineProperty(v,"UniquenessLevel",{enumerable:!0,get:function(){return Md.UniquenessLevel}});Object.defineProperty(v,"MonikerKind",{enumerable:!0,get:function(){return Md.MonikerKind}});Object.defineProperty(v,"MonikerRequest",{enumerable:!0,get:function(){return Md.MonikerRequest}});var Ld=Jm();Object.defineProperty(v,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ld.TypeHierarchyPrepareRequest}});Object.defineProperty(v,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Ld.TypeHierarchySubtypesRequest}});Object.defineProperty(v,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Ld.TypeHierarchySupertypesRequest}});var av=Ym();Object.defineProperty(v,"InlineValueRequest",{enumerable:!0,get:function(){return av.InlineValueRequest}});Object.defineProperty(v,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return av.InlineValueRefreshRequest}});var Ad=Qm();Object.defineProperty(v,"InlayHintRequest",{enumerable:!0,get:function(){return Ad.InlayHintRequest}});Object.defineProperty(v,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Ad.InlayHintResolveRequest}});Object.defineProperty(v,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Ad.InlayHintRefreshRequest}});var Jo=ev();Object.defineProperty(v,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Jo.DiagnosticServerCancellationData}});Object.defineProperty(v,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Jo.DocumentDiagnosticReportKind}});Object.defineProperty(v,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Jo.DocumentDiagnosticRequest}});Object.defineProperty(v,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Jo.WorkspaceDiagnosticRequest}});Object.defineProperty(v,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Jo.DiagnosticRefreshRequest}});var Kn=rv();Object.defineProperty(v,"NotebookCellKind",{enumerable:!0,get:function(){return Kn.NotebookCellKind}});Object.defineProperty(v,"ExecutionSummary",{enumerable:!0,get:function(){return Kn.ExecutionSummary}});Object.defineProperty(v,"NotebookCell",{enumerable:!0,get:function(){return Kn.NotebookCell}});Object.defineProperty(v,"NotebookDocument",{enumerable:!0,get:function(){return Kn.NotebookDocument}});Object.defineProperty(v,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Kn.NotebookDocumentSyncRegistrationType}});Object.defineProperty(v,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Kn.DidOpenNotebookDocumentNotification}});Object.defineProperty(v,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Kn.NotebookCellArrayChange}});Object.defineProperty(v,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Kn.DidChangeNotebookDocumentNotification}});Object.defineProperty(v,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Kn.DidSaveNotebookDocumentNotification}});Object.defineProperty(v,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Kn.DidCloseNotebookDocumentNotification}});var cv;(function(t){function e(n){let r=n;return dt.string(r.language)||dt.string(r.scheme)||dt.string(r.pattern)}t.is=e})(cv=v.TextDocumentFilter||(v.TextDocumentFilter={}));var uv;(function(t){function e(n){let r=n;return dt.objectLiteral(r)&&(dt.string(r.notebookType)||dt.string(r.scheme)||dt.string(r.pattern))}t.is=e})(uv=v.NotebookDocumentFilter||(v.NotebookDocumentFilter={}));var lv;(function(t){function e(n){let r=n;return dt.objectLiteral(r)&&(dt.string(r.notebook)||uv.is(r.notebook))&&(r.language===void 0||dt.string(r.language))}t.is=e})(lv=v.NotebookCellTextDocumentFilter||(v.NotebookCellTextDocumentFilter={}));var dv;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!dt.string(r)&&!cv.is(r)&&!lv.is(r))return!1;return!0}t.is=e})(dv=v.DocumentSelector||(v.DocumentSelector={}));var TS;(function(t){t.method="client/registerCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(TS=v.RegistrationRequest||(v.RegistrationRequest={}));var PS;(function(t){t.method="client/unregisterCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(PS=v.UnregistrationRequest||(v.UnregistrationRequest={}));var qS;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(qS=v.ResourceOperationKind||(v.ResourceOperationKind={}));var xS;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(xS=v.FailureHandlingKind||(v.FailureHandlingKind={}));var kS;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(kS=v.PositionEncodingKind||(v.PositionEncodingKind={}));var ES;(function(t){function e(n){let r=n;return r&&dt.string(r.id)&&r.id.length>0}t.hasId=e})(ES=v.StaticRegistrationOptions||(v.StaticRegistrationOptions={}));var FS;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||dv.is(r.documentSelector))}t.is=e})(FS=v.TextDocumentRegistrationOptions||(v.TextDocumentRegistrationOptions={}));var OS;(function(t){function e(r){let i=r;return dt.objectLiteral(i)&&(i.workDoneProgress===void 0||dt.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&dt.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(OS=v.WorkDoneProgressOptions||(v.WorkDoneProgressOptions={}));var NS;(function(t){t.method="initialize",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(NS=v.InitializeRequest||(v.InitializeRequest={}));var IS;(function(t){t.unknownProtocolVersion=1})(IS=v.InitializeErrorCodes||(v.InitializeErrorCodes={}));var MS;(function(t){t.method="initialized",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(MS=v.InitializedNotification||(v.InitializedNotification={}));var LS;(function(t){t.method="shutdown",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType0(t.method)})(LS=v.ShutdownRequest||(v.ShutdownRequest={}));var AS;(function(t){t.method="exit",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType0(t.method)})(AS=v.ExitNotification||(v.ExitNotification={}));var jS;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(jS=v.DidChangeConfigurationNotification||(v.DidChangeConfigurationNotification={}));var HS;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(HS=v.MessageType||(v.MessageType={}));var $S;(function(t){t.method="window/showMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})($S=v.ShowMessageNotification||(v.ShowMessageNotification={}));var WS;(function(t){t.method="window/showMessageRequest",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(WS=v.ShowMessageRequest||(v.ShowMessageRequest={}));var zS;(function(t){t.method="window/logMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(zS=v.LogMessageNotification||(v.LogMessageNotification={}));var KS;(function(t){t.method="telemetry/event",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(KS=v.TelemetryEventNotification||(v.TelemetryEventNotification={}));var US;(function(t){t.None=0,t.Full=1,t.Incremental=2})(US=v.TextDocumentSyncKind||(v.TextDocumentSyncKind={}));var BS;(function(t){t.method="textDocument/didOpen",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(BS=v.DidOpenTextDocumentNotification||(v.DidOpenTextDocumentNotification={}));var GS;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(GS=v.TextDocumentContentChangeEvent||(v.TextDocumentContentChangeEvent={}));var VS;(function(t){t.method="textDocument/didChange",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(VS=v.DidChangeTextDocumentNotification||(v.DidChangeTextDocumentNotification={}));var XS;(function(t){t.method="textDocument/didClose",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(XS=v.DidCloseTextDocumentNotification||(v.DidCloseTextDocumentNotification={}));var JS;(function(t){t.method="textDocument/didSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(JS=v.DidSaveTextDocumentNotification||(v.DidSaveTextDocumentNotification={}));var YS;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(YS=v.TextDocumentSaveReason||(v.TextDocumentSaveReason={}));var QS;(function(t){t.method="textDocument/willSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(QS=v.WillSaveTextDocumentNotification||(v.WillSaveTextDocumentNotification={}));var ZS;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(ZS=v.WillSaveTextDocumentWaitUntilRequest||(v.WillSaveTextDocumentWaitUntilRequest={}));var eT;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(eT=v.DidChangeWatchedFilesNotification||(v.DidChangeWatchedFilesNotification={}));var tT;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(tT=v.FileChangeType||(v.FileChangeType={}));var nT;(function(t){function e(n){let r=n;return dt.objectLiteral(r)&&(iv.URI.is(r.baseUri)||iv.WorkspaceFolder.is(r.baseUri))&&dt.string(r.pattern)}t.is=e})(nT=v.RelativePattern||(v.RelativePattern={}));var rT;(function(t){t.Create=1,t.Change=2,t.Delete=4})(rT=v.WatchKind||(v.WatchKind={}));var iT;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(iT=v.PublishDiagnosticsNotification||(v.PublishDiagnosticsNotification={}));var oT;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(oT=v.CompletionTriggerKind||(v.CompletionTriggerKind={}));var sT;(function(t){t.method="textDocument/completion",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(sT=v.CompletionRequest||(v.CompletionRequest={}));var aT;(function(t){t.method="completionItem/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(aT=v.CompletionResolveRequest||(v.CompletionResolveRequest={}));var cT;(function(t){t.method="textDocument/hover",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(cT=v.HoverRequest||(v.HoverRequest={}));var uT;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(uT=v.SignatureHelpTriggerKind||(v.SignatureHelpTriggerKind={}));var lT;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(lT=v.SignatureHelpRequest||(v.SignatureHelpRequest={}));var dT;(function(t){t.method="textDocument/definition",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(dT=v.DefinitionRequest||(v.DefinitionRequest={}));var fT;(function(t){t.method="textDocument/references",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(fT=v.ReferencesRequest||(v.ReferencesRequest={}));var hT;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(hT=v.DocumentHighlightRequest||(v.DocumentHighlightRequest={}));var pT;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(pT=v.DocumentSymbolRequest||(v.DocumentSymbolRequest={}));var gT;(function(t){t.method="textDocument/codeAction",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(gT=v.CodeActionRequest||(v.CodeActionRequest={}));var mT;(function(t){t.method="codeAction/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(mT=v.CodeActionResolveRequest||(v.CodeActionResolveRequest={}));var vT;(function(t){t.method="workspace/symbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(vT=v.WorkspaceSymbolRequest||(v.WorkspaceSymbolRequest={}));var yT;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(yT=v.WorkspaceSymbolResolveRequest||(v.WorkspaceSymbolResolveRequest={}));var CT;(function(t){t.method="textDocument/codeLens",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(CT=v.CodeLensRequest||(v.CodeLensRequest={}));var _T;(function(t){t.method="codeLens/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(_T=v.CodeLensResolveRequest||(v.CodeLensResolveRequest={}));var wT;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType0(t.method)})(wT=v.CodeLensRefreshRequest||(v.CodeLensRefreshRequest={}));var bT;(function(t){t.method="textDocument/documentLink",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(bT=v.DocumentLinkRequest||(v.DocumentLinkRequest={}));var DT;(function(t){t.method="documentLink/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(DT=v.DocumentLinkResolveRequest||(v.DocumentLinkResolveRequest={}));var RT;(function(t){t.method="textDocument/formatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(RT=v.DocumentFormattingRequest||(v.DocumentFormattingRequest={}));var ST;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(ST=v.DocumentRangeFormattingRequest||(v.DocumentRangeFormattingRequest={}));var TT;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(TT=v.DocumentOnTypeFormattingRequest||(v.DocumentOnTypeFormattingRequest={}));var PT;(function(t){t.Identifier=1})(PT=v.PrepareSupportDefaultBehavior||(v.PrepareSupportDefaultBehavior={}));var qT;(function(t){t.method="textDocument/rename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(qT=v.RenameRequest||(v.RenameRequest={}));var xT;(function(t){t.method="textDocument/prepareRename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(xT=v.PrepareRenameRequest||(v.PrepareRenameRequest={}));var kT;(function(t){t.method="workspace/executeCommand",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(kT=v.ExecuteCommandRequest||(v.ExecuteCommandRequest={}));var ET;(function(t){t.method="workspace/applyEdit",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType("workspace/applyEdit")})(ET=v.ApplyWorkspaceEditRequest||(v.ApplyWorkspaceEditRequest={}))});var pv=w(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.createProtocolConnection=void 0;var hv=ti();function FT(t,e,n,r){return hv.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,hv.createMessageConnection)(t,e,n,r)}va.createProtocolConnection=FT});var gv=w(Rt=>{"use strict";var OT=Rt&&Rt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ya=Rt&&Rt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&OT(e,t,n)};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.LSPErrorCodes=Rt.createProtocolConnection=void 0;ya(ti(),Rt);ya((la(),wu(ua)),Rt);ya(je(),Rt);ya(fv(),Rt);var NT=pv();Object.defineProperty(Rt,"createProtocolConnection",{enumerable:!0,get:function(){return NT.createProtocolConnection}});var IT;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(IT=Rt.LSPErrorCodes||(Rt.LSPErrorCodes={}))});var j=w(Un=>{"use strict";var MT=Un&&Un.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),mv=Un&&Un.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&MT(e,t,n)};Object.defineProperty(Un,"__esModule",{value:!0});Un.createProtocolConnection=void 0;var LT=Ol();mv(Ol(),Un);mv(gv(),Un);function AT(t,e,n,r){return(0,LT.createMessageConnection)(t,e,n,r)}Un.createProtocolConnection=AT});var Ca=w(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.forEach=gt.mapAsync=gt.map=gt.clearTestMode=gt.setTestMode=gt.Semaphore=gt.Delayer=void 0;var Qo=j(),jd=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=(0,Qo.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};gt.Delayer=jd;var Hd=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Qo.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};gt.Semaphore=Hd;var $d=!1;function jT(){$d=!0}gt.setTestMode=jT;function HT(){$d=!1}gt.clearTestMode=HT;var vv=15,Yo=class{constructor(e=vv){this.yieldAfter=$d===!0?Math.max(e,2):Math.max(e,vv),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,n=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||n<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function $T(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),o=new Yo(r?.yieldAfter);function s(c){o.start();for(let l=c;l<t.length;l++)if(i[l]=e(t[l]),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),l+1;return-1}let a=s(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(c=>{(0,Qo.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}gt.map=$T;async function WT(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),o=new Yo(r?.yieldAfter);async function s(c){o.start();for(let l=c;l<t.length;l++)if(i[l]=await e(t[l],n),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),l+1;return-1}let a=await s(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(c=>{(0,Qo.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}gt.mapAsync=WT;async function zT(t,e,n,r){if(t.length===0)return;let i=new Yo(r?.yieldAfter);function o(a){i.start();for(let c=a;c<t.length;c++)if(e(t[c]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),c+1;return-1}let s=o(0);for(;s!==-1&&!(n!==void 0&&n.isCancellationRequested);)s=await new Promise(a=>{(0,Qo.RAL)().timer.setImmediate(()=>{a(o(s))})})}gt.forEach=zT});var Kd=w(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});var KT=require("vscode"),Wd=class extends KT.CompletionItem{constructor(e){super(e)}};zd.default=Wd});var Gd=w(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});var UT=require("vscode"),Ud=class extends UT.CodeLens{constructor(e){super(e)}};Bd.default=Ud});var Jd=w(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});var BT=require("vscode"),Vd=class extends BT.DocumentLink{constructor(e,n){super(e,n)}};Xd.default=Vd});var Zd=w(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});var GT=require("vscode"),Yd=class extends GT.CodeAction{constructor(e,n){super(e),this.data=n}};Qd.default=Yd});var nf=w(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.ProtocolDiagnostic=oi.DiagnosticCode=void 0;var VT=require("vscode"),ef=tn(),XT;(function(t){function e(n){let r=n;return r!=null&&(ef.number(r.value)||ef.string(r.value))&&ef.string(r.target)}t.is=e})(XT=oi.DiagnosticCode||(oi.DiagnosticCode={}));var tf=class extends VT.Diagnostic{constructor(e,n,r,i){super(e,n,r),this.data=i,this.hasDiagnosticCode=!1}};oi.ProtocolDiagnostic=tf});var sf=w(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});var JT=require("vscode"),rf=class extends JT.CallHierarchyItem{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,s),a!==void 0&&(this.data=a)}};of.default=rf});var uf=w(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});var YT=require("vscode"),af=class extends YT.TypeHierarchyItem{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,s),a!==void 0&&(this.data=a)}};cf.default=af});var ff=w(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});var _a=require("vscode"),lf=class extends _a.SymbolInformation{constructor(e,n,r,i,o){let s=!(i instanceof _a.Uri);super(e,n,r,s?i:new _a.Location(i,new _a.Range(0,0,0,0))),this.hasRange=s,o!==void 0&&(this.data=o)}};df.default=lf});var gf=w(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});var QT=require("vscode"),hf=class extends QT.InlayHint{constructor(e,n,r){super(e,n,r)}};pf.default=hf});var _v=w(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.createConverter=void 0;var Ye=require("vscode"),Q=j(),Xi=tn(),yv=Ca(),ZT=Kd(),eP=Gd(),tP=Jd(),nP=Zd(),Cv=nf(),rP=sf(),iP=uf(),oP=ff(),sP=gf(),mf;(function(t){function e(n){let r=n;return r&&!!r.inserting&&!!r.replacing}t.is=e})(mf||(mf={}));function aP(t){let n=t||(h=>h.toString());function r(h){return n(h)}function i(h){return{uri:n(h.uri)}}function o(h){return{uri:n(h.uri),languageId:h.languageId,version:h.version,text:h.getText()}}function s(h){return{uri:n(h.uri),version:h.version}}function a(h){return{textDocument:o(h)}}function c(h){let P=h;return!!P.document&&!!P.contentChanges}function l(h){let P=h;return!!P.uri&&!!P.version}function d(h,P,I){if(l(h))return{textDocument:{uri:n(h.uri),version:h.version},contentChanges:[{text:h.getText()}]};if(c(h)){let ne=P,Ce=I;return{textDocument:{uri:n(ne),version:Ce},contentChanges:h.contentChanges.map(zt=>{let Hn=zt.range;return{range:{start:{line:Hn.start.line,character:Hn.start.character},end:{line:Hn.end.line,character:Hn.end.character}},rangeLength:zt.rangeLength,text:zt.text}})}}else throw Error("Unsupported text document change parameter")}function p(h){return{textDocument:i(h)}}function f(h,P=!1){let I={textDocument:i(h)};return P&&(I.text=h.getText()),I}function g(h){switch(h){case Ye.TextDocumentSaveReason.Manual:return Q.TextDocumentSaveReason.Manual;case Ye.TextDocumentSaveReason.AfterDelay:return Q.TextDocumentSaveReason.AfterDelay;case Ye.TextDocumentSaveReason.FocusOut:return Q.TextDocumentSaveReason.FocusOut}return Q.TextDocumentSaveReason.Manual}function m(h){return{textDocument:i(h.document),reason:g(h.reason)}}function b(h){return{files:h.files.map(P=>({uri:n(P)}))}}function R(h){return{files:h.files.map(P=>({oldUri:n(P.oldUri),newUri:n(P.newUri)}))}}function q(h){return{files:h.files.map(P=>({uri:n(P)}))}}function y(h){return{files:h.files.map(P=>({uri:n(P)}))}}function C(h){return{files:h.files.map(P=>({oldUri:n(P.oldUri),newUri:n(P.newUri)}))}}function T(h){return{files:h.files.map(P=>({uri:n(P)}))}}function z(h,P){return{textDocument:i(h),position:Ft(P)}}function X(h){switch(h){case Ye.CompletionTriggerKind.TriggerCharacter:return Q.CompletionTriggerKind.TriggerCharacter;case Ye.CompletionTriggerKind.TriggerForIncompleteCompletions:return Q.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return Q.CompletionTriggerKind.Invoked}}function B(h,P,I){return{textDocument:i(h),position:Ft(P),context:{triggerKind:X(I.triggerKind),triggerCharacter:I.triggerCharacter}}}function re(h){switch(h){case Ye.SignatureHelpTriggerKind.Invoke:return Q.SignatureHelpTriggerKind.Invoked;case Ye.SignatureHelpTriggerKind.TriggerCharacter:return Q.SignatureHelpTriggerKind.TriggerCharacter;case Ye.SignatureHelpTriggerKind.ContentChange:return Q.SignatureHelpTriggerKind.ContentChange}}function de(h){return{label:h.label}}function wt(h){return h.map(de)}function ht(h){return{label:h.label,parameters:wt(h.parameters)}}function Et(h){return h.map(ht)}function br(h){return h===void 0?h:{signatures:Et(h.signatures),activeSignature:h.activeSignature,activeParameter:h.activeParameter}}function An(h,P,I){return{textDocument:i(h),position:Ft(P),context:{isRetrigger:I.isRetrigger,triggerCharacter:I.triggerCharacter,triggerKind:re(I.triggerKind),activeSignatureHelp:br(I.activeSignatureHelp)}}}function Ft(h){return{line:h.line,character:h.character}}function Ht(h){return h==null?h:{line:h.line>Q.uinteger.MAX_VALUE?Q.uinteger.MAX_VALUE:h.line,character:h.character>Q.uinteger.MAX_VALUE?Q.uinteger.MAX_VALUE:h.character}}function Dr(h,P){return yv.map(h,Ht,P)}function Ve(h){return h==null?h:{start:Ht(h.start),end:Ht(h.end)}}function mn(h){return h==null?h:Q.Location.create(r(h.uri),Ve(h.range))}function Zt(h){switch(h){case Ye.DiagnosticSeverity.Error:return Q.DiagnosticSeverity.Error;case Ye.DiagnosticSeverity.Warning:return Q.DiagnosticSeverity.Warning;case Ye.DiagnosticSeverity.Information:return Q.DiagnosticSeverity.Information;case Ye.DiagnosticSeverity.Hint:return Q.DiagnosticSeverity.Hint}}function zr(h){if(!h)return;let P=[];for(let I of h){let ne=vn(I);ne!==void 0&&P.push(ne)}return P.length>0?P:void 0}function vn(h){switch(h){case Ye.DiagnosticTag.Unnecessary:return Q.DiagnosticTag.Unnecessary;case Ye.DiagnosticTag.Deprecated:return Q.DiagnosticTag.Deprecated;default:return}}function Do(h){return{message:h.message,location:mn(h.location)}}function Si(h){return h.map(Do)}function Kr(h){if(h!=null)return Xi.number(h)||Xi.string(h)?h:{value:h.value,target:r(h.target)}}function Ur(h){let P=Q.Diagnostic.create(Ve(h.range),h.message),I=h instanceof Cv.ProtocolDiagnostic?h:void 0;I!==void 0&&I.data!==void 0&&(P.data=I.data);let ne=Kr(h.code);return Cv.DiagnosticCode.is(ne)?I!==void 0&&I.hasDiagnosticCode?P.code=ne:(P.code=ne.value,P.codeDescription={href:ne.target}):P.code=ne,Xi.number(h.severity)&&(P.severity=Zt(h.severity)),Array.isArray(h.tags)&&(P.tags=zr(h.tags)),h.relatedInformation&&(P.relatedInformation=Si(h.relatedInformation)),h.source&&(P.source=h.source),P}function Br(h,P){return h==null?h:yv.map(h,Ur,P)}function Ro(h,P){switch(h){case"$string":return P;case Q.MarkupKind.PlainText:return{kind:h,value:P};case Q.MarkupKind.Markdown:return{kind:h,value:P.value};default:return`Unsupported Markup content received. Kind is: ${h}`}}function Ti(h){switch(h){case Ye.CompletionItemTag.Deprecated:return Q.CompletionItemTag.Deprecated}}function Pi(h){if(h===void 0)return h;let P=[];for(let I of h){let ne=Ti(I);ne!==void 0&&P.push(ne)}return P}function So(h,P){return P!==void 0?P:h+1}function st(h,P=!1){let I,ne;Xi.string(h.label)?I=h.label:(I=h.label.label,P&&(h.label.detail!==void 0||h.label.description!==void 0)&&(ne={detail:h.label.detail,description:h.label.description}));let Ce={label:I};ne!==void 0&&(Ce.labelDetails=ne);let rt=h instanceof ZT.default?h:void 0;h.detail&&(Ce.detail=h.detail),h.documentation&&(!rt||rt.documentationFormat==="$string"?Ce.documentation=h.documentation:Ce.documentation=Ro(rt.documentationFormat,h.documentation)),h.filterText&&(Ce.filterText=h.filterText),qi(Ce,h),Xi.number(h.kind)&&(Ce.kind=So(h.kind,rt&&rt.originalItemKind)),h.sortText&&(Ce.sortText=h.sortText),h.additionalTextEdits&&(Ce.additionalTextEdits=xi(h.additionalTextEdits)),h.commitCharacters&&(Ce.commitCharacters=h.commitCharacters.slice()),h.command&&(Ce.command=en(h.command)),(h.preselect===!0||h.preselect===!1)&&(Ce.preselect=h.preselect);let zt=Pi(h.tags);if(rt){if(rt.data!==void 0&&(Ce.data=rt.data),rt.deprecated===!0||rt.deprecated===!1){if(rt.deprecated===!0&&zt!==void 0&&zt.length>0){let Hn=zt.indexOf(Ye.CompletionItemTag.Deprecated);Hn!==-1&&zt.splice(Hn,1)}Ce.deprecated=rt.deprecated}rt.insertTextMode!==void 0&&(Ce.insertTextMode=rt.insertTextMode)}return zt!==void 0&&zt.length>0&&(Ce.tags=zt),Ce.insertTextMode===void 0&&h.keepWhitespace===!0&&(Ce.insertTextMode=Q.InsertTextMode.adjustIndentation),Ce}function qi(h,P){let I=Q.InsertTextFormat.PlainText,ne,Ce;P.textEdit?(ne=P.textEdit.newText,Ce=P.textEdit.range):P.insertText instanceof Ye.SnippetString?(I=Q.InsertTextFormat.Snippet,ne=P.insertText.value):ne=P.insertText,P.range&&(Ce=P.range),h.insertTextFormat=I,P.fromEdit&&ne!==void 0&&Ce!==void 0?h.textEdit=Rr(ne,Ce):h.insertText=ne}function Rr(h,P){return mf.is(P)?Q.InsertReplaceEdit.create(h,Ve(P.inserting),Ve(P.replacing)):{newText:h,range:Ve(P)}}function jn(h){return{range:Ve(h.range),newText:h.newText}}function xi(h){return h==null?h:h.map(jn)}function $t(h){return h<=Ye.SymbolKind.TypeParameter?h+1:Q.SymbolKind.Property}function Gr(h){return h}function et(h){return h.map(Gr)}function Zn(h,P,I){return{textDocument:i(h),position:Ft(P),context:{includeDeclaration:I.includeDeclaration}}}async function Wt(h,P){let I=Q.CodeAction.create(h.title);if(h instanceof nP.default&&h.data!==void 0&&(I.data=h.data),h.kind!==void 0&&(I.kind=Xr(h.kind)),h.diagnostics!==void 0&&(I.diagnostics=await Br(h.diagnostics,P)),h.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return h.command!==void 0&&(I.command=en(h.command)),h.isPreferred!==void 0&&(I.isPreferred=h.isPreferred),h.disabled!==void 0&&(I.disabled={reason:h.disabled.reason}),I}async function Vr(h,P){if(h==null)return h;let I;return h.only&&Xi.string(h.only.value)&&(I=[h.only.value]),Q.CodeActionContext.create(await Br(h.diagnostics,P),I,er(h.triggerKind))}function er(h){switch(h){case Ye.CodeActionTriggerKind.Invoke:return Q.CodeActionTriggerKind.Invoked;case Ye.CodeActionTriggerKind.Automatic:return Q.CodeActionTriggerKind.Automatic;default:return}}function Xr(h){if(h!=null)return h.value}function ki(h){return h==null?h:Q.InlineValueContext.create(h.frameId,Ve(h.stoppedLocation))}function en(h){let P=Q.Command.create(h.title,h.command);return h.arguments&&(P.arguments=h.arguments),P}function Ei(h){let P=Q.CodeLens.create(Ve(h.range));return h.command&&(P.command=en(h.command)),h instanceof eP.default&&h.data&&(P.data=h.data),P}function yn(h,P){let I={tabSize:h.tabSize,insertSpaces:h.insertSpaces};return P.trimTrailingWhitespace&&(I.trimTrailingWhitespace=!0),P.trimFinalNewlines&&(I.trimFinalNewlines=!0),P.insertFinalNewline&&(I.insertFinalNewline=!0),I}function _(h){return{textDocument:i(h)}}function k(h){return{textDocument:i(h)}}function N(h){let P=Q.DocumentLink.create(Ve(h.range));h.target&&(P.target=r(h.target)),h.tooltip!==void 0&&(P.tooltip=h.tooltip);let I=h instanceof tP.default?h:void 0;return I&&I.data&&(P.data=I.data),P}function A(h){return{textDocument:i(h)}}function ye(h){let P={name:h.name,kind:$t(h.kind),uri:r(h.uri),range:Ve(h.range),selectionRange:Ve(h.selectionRange)};return h.detail!==void 0&&h.detail.length>0&&(P.detail=h.detail),h.tags!==void 0&&(P.tags=et(h.tags)),h instanceof rP.default&&h.data!==void 0&&(P.data=h.data),P}function ge(h){let P={name:h.name,kind:$t(h.kind),uri:r(h.uri),range:Ve(h.range),selectionRange:Ve(h.selectionRange)};return h.detail!==void 0&&h.detail.length>0&&(P.detail=h.detail),h.tags!==void 0&&(P.tags=et(h.tags)),h instanceof iP.default&&h.data!==void 0&&(P.data=h.data),P}function Re(h){let P=h instanceof oP.default?{name:h.name,kind:$t(h.kind),location:h.hasRange?mn(h.location):{uri:n(h.location.uri)},data:h.data}:{name:h.name,kind:$t(h.kind),location:mn(h.location)};return h.tags!==void 0&&(P.tags=et(h.tags)),h.containerName!==""&&(P.containerName=h.containerName),P}function Ee(h){let P=typeof h.label=="string"?h.label:h.label.map(ie),I=Q.InlayHint.create(Ht(h.position),P);return h.kind!==void 0&&(I.kind=h.kind),h.textEdits!==void 0&&(I.textEdits=xi(h.textEdits)),h.tooltip!==void 0&&(I.tooltip=we(h.tooltip)),h.paddingLeft!==void 0&&(I.paddingLeft=h.paddingLeft),h.paddingRight!==void 0&&(I.paddingRight=h.paddingRight),h instanceof sP.default&&h.data!==void 0&&(I.data=h.data),I}function ie(h){let P=Q.InlayHintLabelPart.create(h.value);return h.location!==void 0&&(P.location=mn(h.location)),h.command!==void 0&&(P.command=en(h.command)),h.tooltip!==void 0&&(P.tooltip=we(h.tooltip)),P}function we(h){return typeof h=="string"?h:{kind:Q.MarkupKind.Markdown,value:h.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:a,asChangeTextDocumentParams:d,asCloseTextDocumentParams:p,asSaveTextDocumentParams:f,asWillSaveTextDocumentParams:m,asDidCreateFilesParams:b,asDidRenameFilesParams:R,asDidDeleteFilesParams:q,asWillCreateFilesParams:y,asWillRenameFilesParams:C,asWillDeleteFilesParams:T,asTextDocumentPositionParams:z,asCompletionParams:B,asSignatureHelpParams:An,asWorkerPosition:Ft,asRange:Ve,asPosition:Ht,asPositions:Dr,asLocation:mn,asDiagnosticSeverity:Zt,asDiagnosticTag:vn,asDiagnostic:Ur,asDiagnostics:Br,asCompletionItem:st,asTextEdit:jn,asSymbolKind:$t,asSymbolTag:Gr,asSymbolTags:et,asReferenceParams:Zn,asCodeAction:Wt,asCodeActionContext:Vr,asInlineValueContext:ki,asCommand:en,asCodeLens:Ei,asFormattingOptions:yn,asDocumentSymbolParams:_,asCodeLensParams:k,asDocumentLink:N,asDocumentLinkParams:A,asCallHierarchyItem:ye,asTypeHierarchyItem:ge,asInlayHint:Ee,asWorkspaceSymbol:Re}}wa.createConverter=aP});var Dv=w(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.createConverter=void 0;var L=require("vscode"),V=j(),on=tn(),me=Ca(),cP=Kd(),uP=Gd(),lP=Jd(),dP=Zd(),wv=nf(),fP=sf(),hP=uf(),pP=ff(),gP=gf(),bv=j(),ba;(function(t){function e(n){let r=n;return r&&on.string(r.language)&&on.string(r.value)}t.is=e})(ba||(ba={}));function mP(t,e,n){let i=t||(u=>L.Uri.parse(u));function o(u){return i(u)}function s(u){let D=[];for(let E of u)if(typeof E=="string")D.push(E);else if(bv.NotebookCellTextDocumentFilter.is(E))if(typeof E.notebook=="string")D.push({notebookType:E.notebook,language:E.language});else{let U=E.notebook.notebookType??"*";D.push({notebookType:U,scheme:E.notebook.scheme,pattern:E.notebook.pattern,language:E.language})}else bv.TextDocumentFilter.is(E)&&D.push({language:E.language,scheme:E.scheme,pattern:E.pattern});return D}async function a(u,D){return me.map(u,l,D)}function c(u){let D=new Array(u.length);for(let E=0;E<u.length;E++)D[E]=l(u[E]);return D}function l(u){let D=new wv.ProtocolDiagnostic(m(u.range),u.message,R(u.severity),u.data);if(u.code!==void 0){if(typeof u.code=="string"||typeof u.code=="number")V.CodeDescription.is(u.codeDescription)?D.code={value:u.code,target:o(u.codeDescription.href)}:D.code=u.code;else if(wv.DiagnosticCode.is(u.code)){D.hasDiagnosticCode=!0;let E=u.code;D.code={value:E.value,target:o(E.target)}}}return u.source&&(D.source=u.source),u.relatedInformation&&(D.relatedInformation=d(u.relatedInformation)),Array.isArray(u.tags)&&(D.tags=p(u.tags)),D}function d(u){let D=new Array(u.length);for(let E=0;E<u.length;E++){let U=u[E];D[E]=new L.DiagnosticRelatedInformation(vn(U.location),U.message)}return D}function p(u){if(!u)return;let D=[];for(let E of u){let U=f(E);U!==void 0&&D.push(U)}return D.length>0?D:void 0}function f(u){switch(u){case V.DiagnosticTag.Unnecessary:return L.DiagnosticTag.Unnecessary;case V.DiagnosticTag.Deprecated:return L.DiagnosticTag.Deprecated;default:return}}function g(u){return u?new L.Position(u.line,u.character):void 0}function m(u){return u?new L.Range(u.start.line,u.start.character,u.end.line,u.end.character):void 0}async function b(u,D){return me.map(u,E=>new L.Range(E.start.line,E.start.character,E.end.line,E.end.character),D)}function R(u){if(u==null)return L.DiagnosticSeverity.Error;switch(u){case V.DiagnosticSeverity.Error:return L.DiagnosticSeverity.Error;case V.DiagnosticSeverity.Warning:return L.DiagnosticSeverity.Warning;case V.DiagnosticSeverity.Information:return L.DiagnosticSeverity.Information;case V.DiagnosticSeverity.Hint:return L.DiagnosticSeverity.Hint}return L.DiagnosticSeverity.Error}function q(u){if(on.string(u))return C(u);if(ba.is(u))return C().appendCodeblock(u.value,u.language);if(Array.isArray(u)){let D=[];for(let E of u){let U=C();ba.is(E)?U.appendCodeblock(E.value,E.language):U.appendMarkdown(E),D.push(U)}return D}else return C(u)}function y(u){if(on.string(u))return u;switch(u.kind){case V.MarkupKind.Markdown:return C(u.value);case V.MarkupKind.PlainText:return u.value;default:return`Unsupported Markup content received. Kind is: ${u.kind}`}}function C(u){let D;if(u===void 0||typeof u=="string")D=new L.MarkdownString(u);else switch(u.kind){case V.MarkupKind.Markdown:D=new L.MarkdownString(u.value);break;case V.MarkupKind.PlainText:D=new L.MarkdownString,D.appendText(u.value);break;default:D=new L.MarkdownString,D.appendText(`Unsupported Markup content received. Kind is: ${u.kind}`);break}return D.isTrusted=e,D.supportHtml=n,D}function T(u){if(!!u)return new L.Hover(q(u.contents),m(u.range))}async function z(u,D,E){if(!u)return;if(Array.isArray(u))return me.map(u,$n=>wt($n,D),E);let U=u,{defaultRange:Ot,commitCharacters:at}=X(U,D),be=await me.map(U.items,$n=>wt($n,at,Ot,U.itemDefaults?.insertTextMode,U.itemDefaults?.insertTextFormat,U.itemDefaults?.data),E);return new L.CompletionList(be,U.isIncomplete)}function X(u,D){let E=u.itemDefaults?.editRange,U=u.itemDefaults?.commitCharacters??D;return V.Range.is(E)?{defaultRange:m(E),commitCharacters:U}:E!==void 0?{defaultRange:{inserting:m(E.insert),replacing:m(E.replace)},commitCharacters:U}:{defaultRange:void 0,commitCharacters:U}}function B(u){return V.CompletionItemKind.Text<=u&&u<=V.CompletionItemKind.TypeParameter?[u-1,void 0]:[L.CompletionItemKind.Text,u]}function re(u){switch(u){case V.CompletionItemTag.Deprecated:return L.CompletionItemTag.Deprecated}}function de(u){if(u==null)return[];let D=[];for(let E of u){let U=re(E);U!==void 0&&D.push(U)}return D}function wt(u,D,E,U,Ot,at){let be=de(u.tags),$n=ht(u),Se=new cP.default($n);u.detail&&(Se.detail=u.detail),u.documentation&&(Se.documentation=y(u.documentation),Se.documentationFormat=on.string(u.documentation)?"$string":u.documentation.kind),u.filterText&&(Se.filterText=u.filterText);let Ws=Et(u,E,Ot);if(Ws&&(Se.insertText=Ws.text,Se.range=Ws.range,Se.fromEdit=Ws.fromEdit),on.number(u.kind)){let[aD,Kg]=B(u.kind);Se.kind=aD,Kg&&(Se.originalItemKind=Kg)}u.sortText&&(Se.sortText=u.sortText),u.additionalTextEdits&&(Se.additionalTextEdits=Ht(u.additionalTextEdits));let Wg=u.commitCharacters!==void 0?on.stringArray(u.commitCharacters)?u.commitCharacters:void 0:D;Wg&&(Se.commitCharacters=Wg.slice()),u.command&&(Se.command=et(u.command)),(u.deprecated===!0||u.deprecated===!1)&&(Se.deprecated=u.deprecated,u.deprecated===!0&&be.push(L.CompletionItemTag.Deprecated)),(u.preselect===!0||u.preselect===!1)&&(Se.preselect=u.preselect);let zg=u.data??at;zg!==void 0&&(Se.data=zg),be.length>0&&(Se.tags=be);let Cu=u.insertTextMode??U;return Cu!==void 0&&(Se.insertTextMode=Cu,Cu===V.InsertTextMode.asIs&&(Se.keepWhitespace=!0)),Se}function ht(u){return V.CompletionItemLabelDetails.is(u.labelDetails)?{label:u.label,detail:u.labelDetails.detail,description:u.labelDetails.description}:u.label}function Et(u,D,E){let U=u.insertTextFormat??E;if(u.textEdit!==void 0||D!==void 0){let[Ot,at]=u.textEdit!==void 0?br(u.textEdit):[D,u.textEditText??u.label];return U===V.InsertTextFormat.Snippet?{text:new L.SnippetString(at),range:Ot,fromEdit:!0}:{text:at,range:Ot,fromEdit:!0}}else return u.insertText?U===V.InsertTextFormat.Snippet?{text:new L.SnippetString(u.insertText),fromEdit:!1}:{text:u.insertText,fromEdit:!1}:void 0}function br(u){return V.InsertReplaceEdit.is(u)?[{inserting:m(u.insert),replacing:m(u.replace)},u.newText]:[m(u.range),u.newText]}function An(u){if(!!u)return new L.TextEdit(m(u.range),u.newText)}async function Ft(u,D){if(!!u)return me.map(u,An,D)}function Ht(u){if(!u)return;let D=new Array(u.length);for(let E=0;E<u.length;E++)D[E]=An(u[E]);return D}async function Dr(u,D){if(!u)return;let E=new L.SignatureHelp;return on.number(u.activeSignature)?E.activeSignature=u.activeSignature:E.activeSignature=0,on.number(u.activeParameter)?E.activeParameter=u.activeParameter:E.activeParameter=0,u.signatures&&(E.signatures=await Ve(u.signatures,D)),E}async function Ve(u,D){return me.mapAsync(u,mn,D)}async function mn(u,D){let E=new L.SignatureInformation(u.label);return u.documentation!==void 0&&(E.documentation=y(u.documentation)),u.parameters!==void 0&&(E.parameters=await Zt(u.parameters,D)),u.activeParameter!==void 0&&(E.activeParameter=u.activeParameter),E}function Zt(u,D){return me.map(u,zr,D)}function zr(u){let D=new L.ParameterInformation(u.label);return u.documentation&&(D.documentation=y(u.documentation)),D}function vn(u){return u?new L.Location(i(u.uri),m(u.range)):void 0}async function Do(u,D){if(!!u)return Ur(u,D)}async function Si(u,D){if(!!u)return Ur(u,D)}function Kr(u){if(!u)return;let D={targetUri:i(u.targetUri),targetRange:m(u.targetRange),originSelectionRange:m(u.originSelectionRange),targetSelectionRange:m(u.targetSelectionRange)};if(!D.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return D}async function Ur(u,D){if(!!u)if(on.array(u)){if(u.length===0)return[];if(V.LocationLink.is(u[0])){let E=u;return me.map(E,Kr,D)}else{let E=u;return me.map(E,vn,D)}}else return V.LocationLink.is(u)?[Kr(u)]:vn(u)}async function Br(u,D){if(!!u)return me.map(u,vn,D)}async function Ro(u,D){if(!!u)return me.map(u,Ti,D)}function Ti(u){let D=new L.DocumentHighlight(m(u.range));return on.number(u.kind)&&(D.kind=Pi(u.kind)),D}function Pi(u){switch(u){case V.DocumentHighlightKind.Text:return L.DocumentHighlightKind.Text;case V.DocumentHighlightKind.Read:return L.DocumentHighlightKind.Read;case V.DocumentHighlightKind.Write:return L.DocumentHighlightKind.Write}return L.DocumentHighlightKind.Text}async function So(u,D){if(!!u)return me.map(u,jn,D)}function st(u){return u<=V.SymbolKind.TypeParameter?u-1:L.SymbolKind.Property}function qi(u){switch(u){case V.SymbolTag.Deprecated:return L.SymbolTag.Deprecated;default:return}}function Rr(u){if(u==null)return;let D=[];for(let E of u){let U=qi(E);U!==void 0&&D.push(U)}return D.length===0?void 0:D}function jn(u){let D=u.data,E=u.location,U=E.range===void 0||D!==void 0?new pP.default(u.name,st(u.kind),u.containerName??"",E.range===void 0?i(E.uri):new L.Location(i(u.location.uri),m(E.range)),D):new L.SymbolInformation(u.name,st(u.kind),u.containerName??"",new L.Location(i(u.location.uri),m(E.range)));return Gr(U,u),U}async function xi(u,D){if(u!=null)return me.map(u,$t,D)}function $t(u){let D=new L.DocumentSymbol(u.name,u.detail||"",st(u.kind),m(u.range),m(u.selectionRange));if(Gr(D,u),u.children!==void 0&&u.children.length>0){let E=[];for(let U of u.children)E.push($t(U));D.children=E}return D}function Gr(u,D){u.tags=Rr(D.tags),D.deprecated&&(u.tags?u.tags.includes(L.SymbolTag.Deprecated)||(u.tags=u.tags.concat(L.SymbolTag.Deprecated)):u.tags=[L.SymbolTag.Deprecated])}function et(u){let D={title:u.title,command:u.command};return u.arguments&&(D.arguments=u.arguments),D}async function Zn(u,D){if(!!u)return me.map(u,et,D)}let Wt=new Map;Wt.set(V.CodeActionKind.Empty,L.CodeActionKind.Empty),Wt.set(V.CodeActionKind.QuickFix,L.CodeActionKind.QuickFix),Wt.set(V.CodeActionKind.Refactor,L.CodeActionKind.Refactor),Wt.set(V.CodeActionKind.RefactorExtract,L.CodeActionKind.RefactorExtract),Wt.set(V.CodeActionKind.RefactorInline,L.CodeActionKind.RefactorInline),Wt.set(V.CodeActionKind.RefactorRewrite,L.CodeActionKind.RefactorRewrite),Wt.set(V.CodeActionKind.Source,L.CodeActionKind.Source),Wt.set(V.CodeActionKind.SourceOrganizeImports,L.CodeActionKind.SourceOrganizeImports);function Vr(u){if(u==null)return;let D=Wt.get(u);if(D)return D;let E=u.split(".");D=L.CodeActionKind.Empty;for(let U of E)D=D.append(U);return D}function er(u){if(u!=null)return u.map(D=>Vr(D))}async function Xr(u,D){if(u==null)return;let E=new dP.default(u.title,u.data);return u.kind!==void 0&&(E.kind=Vr(u.kind)),u.diagnostics!==void 0&&(E.diagnostics=c(u.diagnostics)),u.edit!==void 0&&(E.edit=await yn(u.edit,D)),u.command!==void 0&&(E.command=et(u.command)),u.isPreferred!==void 0&&(E.isPreferred=u.isPreferred),u.disabled!==void 0&&(E.disabled={reason:u.disabled.reason}),E}function ki(u,D){return me.mapAsync(u,async E=>V.Command.is(E)?et(E):Xr(E,D),D)}function en(u){if(!u)return;let D=new uP.default(m(u.range));return u.command&&(D.command=et(u.command)),u.data!==void 0&&u.data!==null&&(D.data=u.data),D}async function Ei(u,D){if(!!u)return me.map(u,en,D)}async function yn(u,D){if(!u)return;let E=new Map;if(u.changeAnnotations!==void 0){let at=u.changeAnnotations;await me.forEach(Object.keys(at),be=>{let $n=_(at[be]);E.set(be,$n)},D)}let U=at=>{if(at!==void 0)return E.get(at)},Ot=new L.WorkspaceEdit;if(u.documentChanges){let at=u.documentChanges;await me.forEach(at,be=>{if(V.CreateFile.is(be))Ot.createFile(i(be.uri),be.options,U(be.annotationId));else if(V.RenameFile.is(be))Ot.renameFile(i(be.oldUri),i(be.newUri),be.options,U(be.annotationId));else if(V.DeleteFile.is(be))Ot.deleteFile(i(be.uri),be.options,U(be.annotationId));else if(V.TextDocumentEdit.is(be)){let $n=i(be.textDocument.uri);for(let Se of be.edits)V.AnnotatedTextEdit.is(Se)?Ot.replace($n,m(Se.range),Se.newText,U(Se.annotationId)):Ot.replace($n,m(Se.range),Se.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(be,void 0,4)}`)},D)}else if(u.changes){let at=u.changes;await me.forEach(Object.keys(at),be=>{Ot.set(i(be),Ht(at[be]))},D)}return Ot}function _(u){if(u!==void 0)return{label:u.label,needsConfirmation:!!u.needsConfirmation,description:u.description}}function k(u){let D=m(u.range),E=u.target?o(u.target):void 0,U=new lP.default(D,E);return u.tooltip!==void 0&&(U.tooltip=u.tooltip),u.data!==void 0&&u.data!==null&&(U.data=u.data),U}async function N(u,D){if(!!u)return me.map(u,k,D)}function A(u){return new L.Color(u.red,u.green,u.blue,u.alpha)}function ye(u){return new L.ColorInformation(m(u.range),A(u.color))}async function ge(u,D){if(!!u)return me.map(u,ye,D)}function Re(u){let D=new L.ColorPresentation(u.label);return D.additionalTextEdits=Ht(u.additionalTextEdits),u.textEdit&&(D.textEdit=An(u.textEdit)),D}async function Ee(u,D){if(!!u)return me.map(u,Re,D)}function ie(u){if(u)switch(u){case V.FoldingRangeKind.Comment:return L.FoldingRangeKind.Comment;case V.FoldingRangeKind.Imports:return L.FoldingRangeKind.Imports;case V.FoldingRangeKind.Region:return L.FoldingRangeKind.Region}}function we(u){return new L.FoldingRange(u.startLine,u.endLine,ie(u.kind))}async function h(u,D){if(!!u)return me.map(u,we,D)}function P(u){return new L.SelectionRange(m(u.range),u.parent?P(u.parent):void 0)}async function I(u,D){return Array.isArray(u)?me.map(u,P,D):[]}function ne(u){return V.InlineValueText.is(u)?new L.InlineValueText(m(u.range),u.text):V.InlineValueVariableLookup.is(u)?new L.InlineValueVariableLookup(m(u.range),u.variableName,u.caseSensitiveLookup):new L.InlineValueEvaluatableExpression(m(u.range),u.expression)}async function Ce(u,D){return Array.isArray(u)?me.map(u,ne,D):[]}async function rt(u,D){let E=typeof u.label=="string"?u.label:await me.map(u.label,zt,D),U=new gP.default(g(u.position),E);return u.kind!==void 0&&(U.kind=u.kind),u.textEdits!==void 0&&(U.textEdits=await Ft(u.textEdits,D)),u.tooltip!==void 0&&(U.tooltip=Hn(u.tooltip)),u.paddingLeft!==void 0&&(U.paddingLeft=u.paddingLeft),u.paddingRight!==void 0&&(U.paddingRight=u.paddingRight),u.data!==void 0&&(U.data=u.data),U}function zt(u){let D=new L.InlayHintLabelPart(u.value);return u.location!==void 0&&(D.location=vn(u.location)),u.tooltip!==void 0&&(D.tooltip=Hn(u.tooltip)),u.command!==void 0&&(D.command=et(u.command)),D}function Hn(u){return typeof u=="string"?u:C(u)}async function Jb(u,D){if(!!Array.isArray(u))return me.mapAsync(u,rt,D)}function $s(u){if(u===null)return;let D=new fP.default(st(u.kind),u.name,u.detail||"",o(u.uri),m(u.range),m(u.selectionRange),u.data);return u.tags!==void 0&&(D.tags=Rr(u.tags)),D}async function Yb(u,D){if(u!==null)return me.map(u,$s,D)}async function Ag(u,D){return new L.CallHierarchyIncomingCall($s(u.from),await b(u.fromRanges,D))}async function Qb(u,D){if(u!==null)return me.mapAsync(u,Ag,D)}async function jg(u,D){return new L.CallHierarchyOutgoingCall($s(u.to),await b(u.fromRanges,D))}async function Zb(u,D){if(u!==null)return me.mapAsync(u,jg,D)}async function eD(u,D){if(u!=null)return new L.SemanticTokens(new Uint32Array(u.data),u.resultId)}function Hg(u){return new L.SemanticTokensEdit(u.start,u.deleteCount,u.data!==void 0?new Uint32Array(u.data):void 0)}async function tD(u,D){if(u!=null)return new L.SemanticTokensEdits(u.edits.map(Hg),u.resultId)}function nD(u){return u}async function rD(u,D){if(u!=null)return new L.LinkedEditingRanges(await b(u.ranges,D),iD(u.wordPattern))}function iD(u){if(u!=null)return new RegExp(u)}function $g(u){if(u===null)return;let D=new hP.default(st(u.kind),u.name,u.detail||"",o(u.uri),m(u.range),m(u.selectionRange),u.data);return u.tags!==void 0&&(D.tags=Rr(u.tags)),D}async function oD(u,D){if(u!==null)return me.map(u,$g,D)}function sD(u){if(on.string(u))return u;if(V.RelativePattern.is(u)){if(V.URI.is(u.baseUri))return new L.RelativePattern(o(u.baseUri),u.pattern);if(V.WorkspaceFolder.is(u.baseUri)){let D=L.workspace.getWorkspaceFolder(o(u.baseUri.uri));return D!==void 0?new L.RelativePattern(D,u.pattern):void 0}}}return{asUri:o,asDocumentSelector:s,asDiagnostics:a,asDiagnostic:l,asRange:m,asRanges:b,asPosition:g,asDiagnosticSeverity:R,asDiagnosticTag:f,asHover:T,asCompletionResult:z,asCompletionItem:wt,asTextEdit:An,asTextEdits:Ft,asSignatureHelp:Dr,asSignatureInformations:Ve,asSignatureInformation:mn,asParameterInformations:Zt,asParameterInformation:zr,asDeclarationResult:Do,asDefinitionResult:Si,asLocation:vn,asReferences:Br,asDocumentHighlights:Ro,asDocumentHighlight:Ti,asDocumentHighlightKind:Pi,asSymbolKind:st,asSymbolTag:qi,asSymbolTags:Rr,asSymbolInformations:So,asSymbolInformation:jn,asDocumentSymbols:xi,asDocumentSymbol:$t,asCommand:et,asCommands:Zn,asCodeAction:Xr,asCodeActionKind:Vr,asCodeActionKinds:er,asCodeActionResult:ki,asCodeLens:en,asCodeLenses:Ei,asWorkspaceEdit:yn,asDocumentLink:k,asDocumentLinks:N,asFoldingRangeKind:ie,asFoldingRange:we,asFoldingRanges:h,asColor:A,asColorInformation:ye,asColorInformations:ge,asColorPresentation:Re,asColorPresentations:Ee,asSelectionRange:P,asSelectionRanges:I,asInlineValue:ne,asInlineValues:Ce,asInlayHint:rt,asInlayHints:Jb,asSemanticTokensLegend:nD,asSemanticTokens:eD,asSemanticTokensEdit:Hg,asSemanticTokensEdits:tD,asCallHierarchyItem:$s,asCallHierarchyItems:Yb,asCallHierarchyIncomingCall:Ag,asCallHierarchyIncomingCalls:Qb,asCallHierarchyOutgoingCall:jg,asCallHierarchyOutgoingCalls:Zb,asLinkedEditingRanges:rD,asTypeHierarchyItem:$g,asTypeHierarchyItems:oD,asGlobPattern:sD}}Da.createConverter=mP});var $e=w(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.generateUuid=sn.parse=sn.isUUID=sn.v4=sn.empty=void 0;var Zo=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Z=class extends Zo{constructor(){super([Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),"-",Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),"-","4",Z._randomHex(),Z._randomHex(),Z._randomHex(),"-",Z._oneOf(Z._timeHighBits),Z._randomHex(),Z._randomHex(),Z._randomHex(),"-",Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Z._oneOf(Z._chars)}};Z._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Z._timeHighBits=["8","9","a","b"];sn.empty=new Zo("00000000-0000-0000-0000-000000000000");function Rv(){return new Z}sn.v4=Rv;var vP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Sv(t){return vP.test(t)}sn.isUUID=Sv;function yP(t){if(!Sv(t))throw new Error("invalid uuid");return new Zo(t)}sn.parse=yP;function CP(){return Rv().asHex()}sn.generateUuid=CP});var yf=w(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.ProgressPart=void 0;var Tv=require("vscode"),Pv=j(),qv=tn(),vf=class{constructor(e,n,r){this._client=e,this._token=n,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Pv.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Tv.window.withProgress({location:Tv.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=n,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Pv.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,o)=>{this._resolve=i,this._reject=o})})}report(e){if(this._infinite&&qv.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(qv.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,n-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Ra.ProgressPart=vf});var fe=w(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.WorkspaceFeature=Qe.TextDocumentLanguageFeature=Qe.TextDocumentEventFeature=Qe.DynamicDocumentFeature=Qe.DynamicFeature=Qe.StaticFeature=Qe.ensure=Qe.LSPCancellationError=void 0;var si=require("vscode"),Cf=j(),St=tn(),xv=$e(),_f=class extends si.CancellationError{constructor(e){super(),this.data=e}};Qe.LSPCancellationError=_f;function _P(t,e){return t[e]===void 0&&(t[e]={}),t[e]}Qe.ensure=_P;var wP;(function(t){function e(n){let r=n;return r!=null&&St.func(r.fillClientCapabilities)&&St.func(r.initialize)&&St.func(r.getState)&&St.func(r.dispose)&&(r.fillInitializeParams===void 0||St.func(r.fillInitializeParams))}t.is=e})(wP=Qe.StaticFeature||(Qe.StaticFeature={}));var bP;(function(t){function e(n){let r=n;return r!=null&&St.func(r.fillClientCapabilities)&&St.func(r.initialize)&&St.func(r.getState)&&St.func(r.dispose)&&(r.fillInitializeParams===void 0||St.func(r.fillInitializeParams))&&St.func(r.register)&&St.func(r.unregister)&&r.registrationType!==void 0}t.is=e})(bP=Qe.DynamicFeature||(Qe.DynamicFeature={}));var es=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),n=0;for(let i of e){n++;for(let o of si.workspace.textDocuments)if(si.languages.match(i,o)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=n>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};Qe.DynamicDocumentFeature=es;var wf=class extends es{constructor(e,n,r,i,o,s,a){super(e),this._event=n,this._type=r,this._middleware=i,this._createParams=o,this._textDocument=s,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new si.EventEmitter}static textDocumentFilter(e,n){for(let r of e)if(si.languages.match(r,n)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(n=>{this.callback(n).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let n=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(r),this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>n(i)):n(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({textDocument:e,type:n,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(si.languages.match(n,e)>0)return{send:r=>this.callback(r)}}};Qe.TextDocumentEventFeature=wf;var bf=class extends es{constructor(e,n){super(e),this._registrationType=n,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let n=e.data.registerOptions.documentSelector;n!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(n))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if(Cf.TextDocumentRegistrationOptions.is(n)){let r=Cf.StaticRegistrationOptions.hasId(n)?n.id:xv.generateUuid(),i=n.documentSelector??e;if(i)return[r,Object.assign({},n,{documentSelector:i})]}else if(St.boolean(n)&&n===!0||Cf.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let r=St.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[xv.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return St.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(r!==null&&si.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};Qe.TextDocumentLanguageFeature=bf;var Df=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};Qe.WorkspaceFeature=Df});var Ev=w((sI,kv)=>{var DP=typeof process=="object"&&process&&process.platform==="win32";kv.exports=DP?{sep:"\\"}:{sep:"/"}});var Mv=w((aI,Iv)=>{"use strict";Iv.exports=Ov;function Ov(t,e,n){t instanceof RegExp&&(t=Fv(t,n)),e instanceof RegExp&&(e=Fv(e,n));var r=Nv(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function Fv(t,e){var n=e.match(t);return n?n[0]:null}Ov.range=Nv;function Nv(t,e,n){var r,i,o,s,a,c=n.indexOf(t),l=n.indexOf(e,c+1),d=c;if(c>=0&&l>0){if(t===e)return[c,l];for(r=[],o=n.length;d>=0&&!a;)d==c?(r.push(d),c=n.indexOf(t,d+1)):r.length==1?a=[r.pop(),l]:(i=r.pop(),i<o&&(o=i,s=l),l=n.indexOf(e,d+1)),d=c<l&&c>=0?c:l;r.length&&(a=[o,s])}return a}});var Kv=w((cI,zv)=>{var Lv=Mv();zv.exports=TP;var Av="\0SLASH"+Math.random()+"\0",jv="\0OPEN"+Math.random()+"\0",Sf="\0CLOSE"+Math.random()+"\0",Hv="\0COMMA"+Math.random()+"\0",$v="\0PERIOD"+Math.random()+"\0";function Rf(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function RP(t){return t.split("\\\\").join(Av).split("\\{").join(jv).split("\\}").join(Sf).split("\\,").join(Hv).split("\\.").join($v)}function SP(t){return t.split(Av).join("\\").split(jv).join("{").split(Sf).join("}").split(Hv).join(",").split($v).join(".")}function Wv(t){if(!t)return[""];var e=[],n=Lv("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,o=n.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=Wv(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function TP(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),ts(RP(t),!0).map(SP)):[]}function PP(t){return"{"+t+"}"}function qP(t){return/^-?0\d/.test(t)}function xP(t,e){return t<=e}function kP(t,e){return t>=e}function ts(t,e){var n=[],r=Lv("{","}",t);if(!r)return[t];var i=r.pre,o=r.post.length?ts(r.post,!1):[""];if(/\$$/.test(r.pre))for(var s=0;s<o.length;s++){var a=i+"{"+r.body+"}"+o[s];n.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),d=c||l,p=r.body.indexOf(",")>=0;if(!d&&!p)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+Sf+r.post,ts(t)):[t];var f;if(d)f=r.body.split(/\.\./);else if(f=Wv(r.body),f.length===1&&(f=ts(f[0],!1).map(PP),f.length===1))return o.map(function(wt){return r.pre+f[0]+wt});var g;if(d){var m=Rf(f[0]),b=Rf(f[1]),R=Math.max(f[0].length,f[1].length),q=f.length==3?Math.abs(Rf(f[2])):1,y=xP,C=b<m;C&&(q*=-1,y=kP);var T=f.some(qP);g=[];for(var z=m;y(z,b);z+=q){var X;if(l)X=String.fromCharCode(z),X==="\\"&&(X="");else if(X=String(z),T){var B=R-X.length;if(B>0){var re=new Array(B+1).join("0");z<0?X="-"+re+X.slice(1):X=re+X}}g.push(X)}}else{g=[];for(var de=0;de<f.length;de++)g.push.apply(g,ts(f[de],!1))}for(var de=0;de<g.length;de++)for(var s=0;s<o.length;s++){var a=i+g[de]+o[s];(!e||d||a)&&n.push(a)}}return n}});var Ta=w((lI,kf)=>{var Ut=kf.exports=(t,e,n={})=>(Sa(e),!n.nocomment&&e.charAt(0)==="#"?!1:new Ji(e,n).match(t));kf.exports=Ut;var qf=Ev();Ut.sep=qf.sep;var Pn=Symbol("globstar **");Ut.GLOBSTAR=Pn;var EP=Kv(),Uv={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},xf="[^/]",Tf=xf+"*?",FP="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",OP="(?:(?!(?:\\/|^)\\.).)*?",Vv=t=>t.split("").reduce((e,n)=>(e[n]=!0,e),{}),Bv=Vv("().*{}+?[]^$\\!"),NP=Vv("[.("),Gv=/\/+/;Ut.filter=(t,e={})=>(n,r,i)=>Ut(n,t,e);var kr=(t,e={})=>{let n={};return Object.keys(t).forEach(r=>n[r]=t[r]),Object.keys(e).forEach(r=>n[r]=e[r]),n};Ut.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Ut;let e=Ut,n=(r,i,o)=>e(r,i,kr(t,o));return n.Minimatch=class extends e.Minimatch{constructor(i,o){super(i,kr(t,o))}},n.Minimatch.defaults=r=>e.defaults(kr(t,r)).Minimatch,n.filter=(r,i)=>e.filter(r,kr(t,i)),n.defaults=r=>e.defaults(kr(t,r)),n.makeRe=(r,i)=>e.makeRe(r,kr(t,i)),n.braceExpand=(r,i)=>e.braceExpand(r,kr(t,i)),n.match=(r,i,o)=>e.match(r,i,kr(t,o)),n};Ut.braceExpand=(t,e)=>Xv(t,e);var Xv=(t,e={})=>(Sa(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:EP(t)),IP=1024*64,Sa=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>IP)throw new TypeError("pattern is too long")},Pf=Symbol("subparse");Ut.makeRe=(t,e)=>new Ji(t,e||{}).makeRe();Ut.match=(t,e,n={})=>{let r=new Ji(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t};var MP=t=>t.replace(/\\(.)/g,"$1"),LP=t=>t.replace(/\\([^-\]])/g,"$1"),AP=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),jP=t=>t.replace(/[[\]\\]/g,"\\$&"),Ji=class{constructor(e,n){Sa(e),n||(n={}),this.options=n,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();n.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(Gv)),this.debug(this.pattern,r),r=r.map((i,o,s)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var o=0,s=0,a=e.length,c=n.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var l=n[s],d=e[o];if(this.debug(n,l,d),l===!1)return!1;if(l===Pn){this.debug("GLOBSTAR",[n,l,d]);var p=o,f=s+1;if(f===c){for(this.debug("** at the end");o<a;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;p<a;){var g=e[p];if(this.debug(`
globstar while`,e,p,n,f,g),this.matchOne(e.slice(p),n.slice(f),r))return this.debug("globstar found match!",p,a,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,p,n,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,p,n,f),p===a))}var m;if(typeof l=="string"?(m=d===l,this.debug("string match",l,d,m)):(m=d.match(l),this.debug("pattern match",l,d,m)),!m)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return Xv(this.pattern,this.options)}parse(e,n){Sa(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Pn;if(e==="")return"";let i="",o=!1,s=!1,a=[],c=[],l,d=!1,p=-1,f=-1,g,m,b,R=e.charAt(0)===".",q=r.dot||R,y=()=>R?"":q?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",C=B=>B.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",T=()=>{if(l){switch(l){case"*":i+=Tf,o=!0;break;case"?":i+=xf,o=!0;break;default:i+="\\"+l;break}this.debug("clearStateChar %j %j",l,i),l=!1}};for(let B=0,re;B<e.length&&(re=e.charAt(B));B++){if(this.debug("%s	%s %s %j",e,B,i,re),s){if(re==="/")return!1;Bv[re]&&(i+="\\"),i+=re,s=!1;continue}switch(re){case"/":return!1;case"\\":if(d&&e.charAt(B+1)==="-"){i+=re;continue}T(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,B,i,re),d){this.debug("  in class"),re==="!"&&B===f+1&&(re="^"),i+=re;continue}this.debug("call clearStateChar %j",l),T(),l=re,r.noext&&T();continue;case"(":{if(d){i+="(";continue}if(!l){i+="\\(";continue}let de={type:l,start:B-1,reStart:i.length,open:Uv[l].open,close:Uv[l].close};this.debug(this.pattern,"	",de),a.push(de),i+=de.open,de.start===0&&de.type!=="!"&&(R=!0,i+=C(e.slice(B+1))),this.debug("plType %j %j",l,i),l=!1;continue}case")":{let de=a[a.length-1];if(d||!de){i+="\\)";continue}a.pop(),T(),o=!0,m=de,i+=m.close,m.type==="!"&&c.push(Object.assign(m,{reEnd:i.length}));continue}case"|":{let de=a[a.length-1];if(d||!de){i+="\\|";continue}T(),i+="|",de.start===0&&de.type!=="!"&&(R=!0,i+=C(e.slice(B+1)));continue}case"[":if(T(),d){i+="\\"+re;continue}d=!0,f=B,p=i.length,i+=re;continue;case"]":if(B===f+1||!d){i+="\\"+re;continue}g=e.substring(f+1,B);try{RegExp("["+jP(LP(g))+"]"),i+=re}catch{i=i.substring(0,p)+"(?:$.)"}o=!0,d=!1;continue;default:T(),Bv[re]&&!(re==="^"&&d)&&(i+="\\"),i+=re;break}}for(d&&(g=e.slice(f+1),b=this.parse(g,Pf),i=i.substring(0,p)+"\\["+b[0],o=o||b[1]),m=a.pop();m;m=a.pop()){let B;B=i.slice(m.reStart+m.open.length),this.debug("setting tail",i,m),B=B.replace(/((?:\\{2}){0,64})(\\?)\|/g,(de,wt,ht)=>(ht||(ht="\\"),wt+wt+ht+"|")),this.debug(`tail=%j
   %s`,B,B,m,i);let re=m.type==="*"?Tf:m.type==="?"?xf:"\\"+m.type;o=!0,i=i.slice(0,m.reStart)+re+"\\("+B}T(),s&&(i+="\\\\");let z=NP[i.charAt(0)];for(let B=c.length-1;B>-1;B--){let re=c[B],de=i.slice(0,re.reStart),wt=i.slice(re.reStart,re.reEnd-8),ht=i.slice(re.reEnd),Et=i.slice(re.reEnd-8,re.reEnd)+ht,br=de.split(")").length,An=de.split("(").length-br,Ft=ht;for(let Dr=0;Dr<An;Dr++)Ft=Ft.replace(/\)[+*?]?/,"");ht=Ft;let Ht=ht===""&&n!==Pf?"(?:$|\\/)":"";i=de+wt+ht+Ht+Et}if(i!==""&&o&&(i="(?=.)"+i),z&&(i=y()+i),n===Pf)return[i,o];if(r.nocase&&!o&&(o=e.toUpperCase()!==e.toLowerCase()),!o)return MP(e);let X=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",X),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?Tf:n.dot?FP:OP,i=n.nocase?"i":"",o=e.map(s=>(s=s.map(a=>typeof a=="string"?AP(a):a===Pn?Pn:a._src).reduce((a,c)=>(a[a.length-1]===Pn&&c===Pn||a.push(c),a),[]),s.forEach((a,c)=>{a!==Pn||s[c-1]===Pn||(c===0?s.length>1?s[c+1]="(?:\\/|"+r+"\\/)?"+s[c+1]:s[c]=r:c===s.length-1?s[c-1]+="(?:\\/|"+r+")?":(s[c-1]+="(?:\\/|\\/"+r+"\\/)"+s[c+1],s[c+1]=Pn))}),s.filter(a=>a!==Pn).join("/"))).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch{this.regexp=!1}return this.regexp}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;qf.sep!=="/"&&(e=e.split(qf.sep).join("/")),e=e.split(Gv),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let o;for(let s=e.length-1;s>=0&&(o=e[s],!o);s--);for(let s=0;s<i.length;s++){let a=i[s],c=e;if(r.matchBase&&a.length===1&&(c=[o]),this.matchOne(c,a,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return Ut.defaults(e).Minimatch}};Ut.Minimatch=Ji});var Af=w(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.DiagnosticFeature=Bn.DiagnosticPullMode=Bn.vsdiag=void 0;var HP=Ta(),ue=require("vscode"),Be=j(),$P=$e(),Ef=fe();function Pa(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var qn;(function(t){let e;(function(n){n.full="full",n.unChanged="unChanged"})(e=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}))})(qn=Bn.vsdiag||(Bn.vsdiag={}));var Ff;(function(t){t.onType="onType",t.onSave="onSave"})(Ff=Bn.DiagnosticPullMode||(Bn.DiagnosticPullMode={}));var mt;(function(t){t.active="open",t.reschedule="reschedule",t.outDated="drop"})(mt||(mt={}));var ai=class{constructor(){this.open=new Set,this._onOpen=new ue.EventEmitter,this._onClose=new ue.EventEmitter,ai.fillTabResources(this.open);let e=n=>{if(n.closed.length===0&&n.opened.length===0)return;let r=this.open,i=new Set;ai.fillTabResources(i);let o=new Set,s=new Set(i);for(let a of r.values())i.has(a)?s.delete(a):o.add(a);if(this.open=i,o.size>0){let a=new Set;for(let c of o)a.add(ue.Uri.parse(c));this._onClose.fire(a)}if(s.size>0){let a=new Set;for(let c of s)a.add(ue.Uri.parse(c));this._onOpen.fire(a)}};ue.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=ue.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof ue.Uri?ue.window.activeTextEditor?.document.uri===e:ue.window.activeTextEditor?.document===e}isVisible(e){let n=e instanceof ue.Uri?e:e.uri;return this.open.has(n.toString())}getTabResources(){let e=new Set;return ai.fillTabResources(new Set,e),e}static fillTabResources(e,n){let r=e??new Set;for(let i of ue.window.tabGroups.all)for(let o of i.tabs){let s=o.input,a;s instanceof ue.TabInputText?a=s.uri:s instanceof ue.TabInputTextDiff&&(a=s.modified),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),n!==void 0&&n.add(a))}}},tt;(function(t){t[t.document=1]="document",t[t.workspace=2]="workspace"})(tt||(tt={}));var ar;(function(t){function e(n){return n instanceof ue.Uri?n.toString():n.uri.toString()}t.asKey=e})(ar||(ar={}));var Of=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,n,r){let i=e===tt.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=n instanceof ue.Uri?[n.toString(),n,r]:[n.uri.toString(),n.uri,n.version],c=i.get(o);return c===void 0&&(c={document:s,pulledVersion:a,resultId:void 0},i.set(o,c)),c}update(e,n,r,i){let o=e===tt.document?this.documentPullStates:this.workspacePullStates,[s,a,c,l]=n instanceof ue.Uri?[n.toString(),n,r,i]:[n.uri.toString(),n.uri,n.version,r],d=o.get(s);d===void 0?(d={document:a,pulledVersion:c,resultId:l},o.set(s,d)):(d.pulledVersion=c,d.resultId=l)}unTrack(e,n){let r=ar.asKey(n);(e===tt.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,n){let r=ar.asKey(n);return(e===tt.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,n){let r=ar.asKey(n);return(e===tt.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[n,r]of this.workspacePullStates)this.documentPullStates.has(n)&&(r=this.documentPullStates.get(n)),r.resultId!==void 0&&e.push({uri:n,value:r.resultId});return e}},Nf=class{constructor(e,n,r){this.client=e,this.tabs=n,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new ue.EventEmitter,this.provider=this.createProvider(),this.diagnostics=ue.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new Of,this.workspaceErrorCounter=0}knows(e,n){let r=n instanceof ue.Uri?n:n.uri;return this.documentStates.tracks(e,n)||this.openRequests.has(r.toString())}forget(e,n){this.documentStates.unTrack(e,n)}pull(e,n){if(this.isDisposed)return;let r=e instanceof ue.Uri?e:e.uri;this.pullAsync(e).then(()=>{n&&n()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,n){if(this.isDisposed)return;let r=e instanceof ue.Uri,i=r?e:e.uri,o=i.toString();n=r?n:e.version;let s=this.openRequests.get(o),a=r?this.documentStates.track(tt.document,e,n):this.documentStates.track(tt.document,e);if(s===void 0){let c=new ue.CancellationTokenSource;this.openRequests.set(o,{state:mt.active,document:e,version:n,tokenSource:c});let l,d;try{l=await this.provider.provideDiagnostics(e,a.resultId,c.token)??{kind:qn.DocumentDiagnosticReportKind.full,items:[]}}catch(p){if(p instanceof Ef.LSPCancellationError&&Be.DiagnosticServerCancellationData.is(p.data)&&p.data.retriggerRequest===!1&&(d={state:mt.outDated,document:e}),d===void 0&&p instanceof ue.CancellationError)d={state:mt.reschedule,document:e};else throw p}if(d=d??this.openRequests.get(o),d===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${o}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(o),!this.tabs.isVisible(e)){this.documentStates.unTrack(tt.document,e);return}if(d.state===mt.outDated)return;l!==void 0&&(l.kind===qn.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,l.items),a.pulledVersion=n,a.resultId=l.resultId),d.state===mt.reschedule&&this.pull(e)}else s.state===mt.active?(s.tokenSource.cancel(),this.openRequests.set(o,{state:mt.reschedule,document:s.document})):s.state===mt.outDated&&this.openRequests.set(o,{state:mt.reschedule,document:s.document})}forgetDocument(e){let n=e instanceof ue.Uri?e:e.uri,r=n.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:mt.reschedule,document:e}):this.pull(e,()=>{this.forget(tt.document,e)}):(i!==void 0&&(i.state===mt.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:mt.outDated,document:e})),this.diagnostics.delete(n),this.forget(tt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,Be.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Ef.LSPCancellationError)&&!Be.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,Be.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new ue.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(n=>({uri:this.client.protocol2CodeConverter.asUri(n.uri),value:n.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,n=>{if(!(!n||this.isDisposed))for(let r of n.items)r.kind===qn.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(tt.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(tt.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(n,r,i)=>{let o=(a,c,l)=>{let d={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof ue.Uri?a:a.uri)},previousResultId:c};return this.isDisposed===!0||!this.client.isRunning()?{kind:qn.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(Be.DocumentDiagnosticRequest.type,d,l).then(async p=>p==null||this.isDisposed||l.isCancellationRequested?{kind:qn.DocumentDiagnosticReportKind.full,items:[]}:p.kind===Be.DocumentDiagnosticReportKind.Full?{kind:qn.DocumentDiagnosticReportKind.full,resultId:p.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(p.items,l)}:{kind:qn.DocumentDiagnosticReportKind.unChanged,resultId:p.resultId},p=>this.client.handleFailedRequest(Be.DocumentDiagnosticRequest.type,l,p,{kind:qn.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.middleware;return s.provideDiagnostics?s.provideDiagnostics(n,r,i,o):o(n,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(n,r,i)=>{let o=async l=>l.kind===Be.DocumentDiagnosticReportKind.Full?{kind:qn.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(l.uri),resultId:l.resultId,version:l.version,items:await this.client.protocol2CodeConverter.asDiagnostics(l.items,r)}:{kind:qn.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(l.uri),resultId:l.resultId,version:l.version},s=l=>{let d=[];for(let p of l)d.push({uri:this.client.code2ProtocolConverter.asUri(p.uri),value:p.value});return d},a=(l,d)=>{let p=(0,$P.generateUuid)(),f=this.client.onProgress(Be.WorkspaceDiagnosticRequest.partialResult,p,async m=>{if(m==null){i(null);return}let b={items:[]};for(let R of m.items)try{b.items.push(await o(R))}catch(q){this.client.error("Converting workspace diagnostics failed.",q)}i(b)}),g={identifier:this.options.identifier,previousResultIds:s(l),partialResultToken:p};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(Be.WorkspaceDiagnosticRequest.type,g,d).then(async m=>{if(d.isCancellationRequested)return{items:[]};let b={items:[]};for(let R of m.items)b.items.push(await o(R));return f.dispose(),i(b),{items:[]}},m=>(f.dispose(),this.client.handleFailedRequest(Be.DocumentDiagnosticRequest.type,d,m,{items:[]})))},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(n,r,i,a):a(n,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,n]of this.openRequests)n.state===mt.active&&n.tokenSource.cancel(),this.openRequests.set(e,{state:mt.outDated,document:n.document});this.diagnostics.dispose()}},If=class{constructor(e){this.diagnosticRequestor=e,this.documents=new Be.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let n=ar.asKey(e);this.documents.has(n)||(this.documents.set(n,e,Be.Touch.Last),this.trigger())}remove(e){let n=ar.asKey(e);this.documents.delete(n),this.documents.size===0?this.stop():n===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,Be.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let n=ar.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(n,e,Be.Touch.Last),n===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?ar.asKey(this.endDocument):void 0}},Mf=class{constructor(e,n,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),s=[],a=m=>{let b=r.documentSelector;if(i.match!==void 0)return i.match(b,m);for(let R of b)if(!!Be.TextDocumentFilter.is(R)){if(typeof R=="string"||R.language!==void 0&&R.language!=="*"||R.scheme!==void 0&&R.scheme!=="*"&&R.scheme!==m.scheme)return!1;if(R.pattern!==void 0){let q=new HP.Minimatch(R.pattern,{noext:!0});if(!q.makeRe()||!q.match(m.fsPath))return!1}}return!0},c=m=>m instanceof ue.Uri?a(m):ue.languages.match(o,m)>0&&n.isVisible(m),l=m=>m instanceof ue.Uri?this.activeTextDocument?.uri.toString()===m.toString():this.activeTextDocument===m;this.diagnosticRequestor=new Nf(e,n,r),this.backgroundScheduler=new If(this.diagnosticRequestor);let d=m=>{!c(m)||!r.interFileDependencies||l(m)||this.backgroundScheduler.add(m)};this.activeTextDocument=ue.window.activeTextEditor?.document,ue.window.onDidChangeActiveTextEditor(m=>{let b=this.activeTextDocument;this.activeTextDocument=m?.document,b!==void 0&&d(b),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let p=e.getFeature(Be.DidOpenTextDocumentNotification.method);s.push(p.onNotificationSent(m=>{let b=m.textDocument;this.diagnosticRequestor.knows(tt.document,b)||c(b)&&this.diagnosticRequestor.pull(b,()=>{d(b)})})),n.onOpen(m=>{for(let b of m){if(this.diagnosticRequestor.knows(tt.document,b))continue;let R=b.toString(),q;for(let y of ue.workspace.textDocuments)if(R===y.uri.toString()){q=y;break}q!==void 0&&c(q)?this.diagnosticRequestor.pull(q,()=>{d(q)}):c(b)&&this.diagnosticRequestor.pull(b,()=>{d(b)})}});let f=new Set;for(let m of ue.workspace.textDocuments)c(m)&&(this.diagnosticRequestor.pull(m,()=>{d(m)}),f.add(m.uri.toString()));if(i.onTabs===!0)for(let m of n.getTabResources())!f.has(m.toString())&&c(m)&&this.diagnosticRequestor.pull(m,()=>{d(m)});if(i.onChange===!0){let m=e.getFeature(Be.DidChangeTextDocumentNotification.method);s.push(m.onNotificationSent(async b=>{let R=b.textDocument;(i.filter===void 0||!i.filter(R,Ff.onType))&&this.diagnosticRequestor.knows(tt.document,R)&&this.diagnosticRequestor.pull(R,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let m=e.getFeature(Be.DidSaveTextDocumentNotification.method);s.push(m.onNotificationSent(b=>{let R=b.textDocument;(i.filter===void 0||!i.filter(R,Ff.onSave))&&this.diagnosticRequestor.knows(tt.document,R)&&this.diagnosticRequestor.pull(b.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let g=e.getFeature(Be.DidCloseTextDocumentNotification.method);s.push(g.onNotificationSent(m=>{this.cleanUpDocument(m.textDocument)})),n.onClose(m=>{for(let b of m)this.cleanUpDocument(b)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let m of ue.workspace.textDocuments)c(m)&&this.diagnosticRequestor.pull(m)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=ue.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(tt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},Lf=class extends Ef.TextDocumentLanguageFeature{constructor(e){super(e,Be.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let n=Pa(Pa(e,"textDocument"),"diagnostic");n.dynamicRegistration=!0,n.relatedDocumentSupport=!1,Pa(Pa(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,n){this._client.onRequest(Be.DiagnosticRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(n,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new ai);let n=new Mf(this._client,this.tabs,e);return[n.disposable,n]}};Bn.DiagnosticFeature=Lf});var Qv=w(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.NotebookDocumentSyncFeature=void 0;var vt=require("vscode"),WP=Ta(),cr=j(),zP=$e(),Jv=tn();function Yv(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Yi;(function(t){let e;(function(n){function r(f,g){return{version:f.version,uri:g.asUri(f.uri)}}n.asVersionedNotebookDocumentIdentifier=r;function i(f,g,m){let b=cr.NotebookDocument.create(m.asUri(f.uri),f.notebookType,f.version,o(g,m));return Object.keys(f.metadata).length>0&&(b.metadata=s(f.metadata)),b}n.asNotebookDocument=i;function o(f,g){return f.map(m=>a(m,g))}n.asNotebookCells=o;function s(f){return l(new Set,f)}n.asMetadata=s;function a(f,g){let m=cr.NotebookCell.create(c(f.kind),g.asUri(f.document.uri));return Object.keys(f.metadata).length>0&&(m.metadata=s(f.metadata)),f.executionSummary!==void 0&&Jv.number(f.executionSummary.executionOrder)&&Jv.boolean(f.executionSummary.success)&&(m.executionSummary={executionOrder:f.executionSummary.executionOrder,success:f.executionSummary.success}),m}n.asNotebookCell=a;function c(f){switch(f){case vt.NotebookCellKind.Markup:return cr.NotebookCellKind.Markup;case vt.NotebookCellKind.Code:return cr.NotebookCellKind.Code}}function l(f,g){if(f.has(g))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(g)){let m=[];for(let b of g)if(b!==null&&typeof b=="object"||Array.isArray(b))m.push(l(f,b));else{if(b instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");m.push(b)}return m}else{let m=Object.keys(g),b=Object.create(null);for(let R of m){let q=g[R];if(q!==null&&typeof q=="object"||Array.isArray(q))b[R]=l(f,q);else{if(q instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");b[R]=q}}return b}}function d(f,g){let m=g.asChangeTextDocumentParams(f,f.document.uri,f.document.version);return{document:m.textDocument,changes:m.contentChanges}}n.asTextContentChange=d;function p(f,g){let m=Object.create(null);if(f.metadata&&(m.metadata=t.c2p.asMetadata(f.metadata)),f.cells!==void 0){let b=Object.create(null),R=f.cells;R.structure&&(b.structure={array:{start:R.structure.array.start,deleteCount:R.structure.array.deleteCount,cells:R.structure.array.cells!==void 0?R.structure.array.cells.map(q=>t.c2p.asNotebookCell(q,g)):void 0},didOpen:R.structure.didOpen!==void 0?R.structure.didOpen.map(q=>g.asOpenTextDocumentParams(q.document).textDocument):void 0,didClose:R.structure.didClose!==void 0?R.structure.didClose.map(q=>g.asCloseTextDocumentParams(q.document).textDocument):void 0}),R.data!==void 0&&(b.data=R.data.map(q=>t.c2p.asNotebookCell(q,g))),R.textContent!==void 0&&(b.textContent=R.textContent.map(q=>t.c2p.asTextContentChange(q,g))),Object.keys(b).length>0&&(m.cells=b)}return m}n.asNotebookDocumentChangeEvent=p})(e=t.c2p||(t.c2p={}))})(Yi||(Yi={}));var jf;(function(t){function e(a,c,l){let d=a.length,p=c.length,f=0;for(;f<p&&f<d&&n(a[f],c[f],l);)f++;if(f<p&&f<d){let g=d-1,m=p-1;for(;g>=0&&m>=0&&n(a[g],c[m],l);)g--,m--;let b=g+1-f,R=f===m+1?void 0:c.slice(f,m+1);return R!==void 0?{start:f,deleteCount:b,cells:R}:{start:f,deleteCount:b}}else return f<p?{start:f,deleteCount:0,cells:c.slice(f)}:f<d?{start:f,deleteCount:d-f}:void 0}t.computeDiff=e;function n(a,c,l=!0){return a.kind!==c.kind||a.document.uri.toString()!==c.document.uri.toString()||a.document.languageId!==c.document.languageId||!r(a.executionSummary,c.executionSummary)?!1:!l||l&&o(a.metadata,c.metadata)}function r(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.executionOrder===c.executionOrder&&a.success===c.success&&i(a.timing,c.timing)}function i(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.startTime===c.startTime&&a.endTime===c.endTime}function o(a,c){if(a===c)return!0;if(a==null||c===null||c===void 0||typeof a!=typeof c||typeof a!="object")return!1;let l=Array.isArray(a),d=Array.isArray(c);if(l!==d)return!1;if(l&&d){if(a.length!==c.length)return!1;for(let p=0;p<a.length;p++)if(!o(a[p],c[p]))return!1}if(s(a)&&s(c)){let p=Object.keys(a),f=Object.keys(c);if(p.length!==f.length||(p.sort(),f.sort(),!o(p,f)))return!1;for(let g=0;g<p.length;g++){let m=p[g];if(!o(a[m],c[m]))return!1}return!0}return!1}function s(a){return a!==null&&typeof a=="object"}t.isObjectLiteral=s})(jf||(jf={}));var Hf;(function(t){function e(n,r){if(typeof n=="string")return n==="*"||r.notebookType===n;if(n.notebookType!==void 0&&n.notebookType!=="*"&&r.notebookType!==n.notebookType)return!1;let i=r.uri;if(n.scheme!==void 0&&n.scheme!=="*"&&i.scheme!==n.scheme)return!1;if(n.pattern!==void 0){let o=new WP.Minimatch(n.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}t.matchNotebook=e})(Hf||(Hf={}));var qa;(function(t){function e(r){let i=r.notebookSelector,o=[];for(let s of i){let a=(typeof s.notebook=="string"?s.notebook:s.notebook?.notebookType)??"*",c=typeof s.notebook=="string"?void 0:s.notebook?.scheme,l=typeof s.notebook=="string"?void 0:s.notebook?.pattern;if(s.cells!==void 0)for(let d of s.cells)o.push(n(a,c,l,d.language));else o.push(n(a,c,l,void 0))}return o}t.asDocumentSelector=e;function n(r,i,o,s){return i===void 0&&o===void 0?{notebook:r,language:s}:{notebook:{notebookType:r,scheme:i,pattern:o},language:s}}})(qa||(qa={}));var xa;(function(t){function e(n){return{cells:n,uris:new Set(n.map(r=>r.document.uri.toString()))}}t.create=e})(xa||(xa={}));var Qi=class{constructor(e,n){this.client=e,this.options=n,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(qa.asDocumentSelector(n)),vt.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of vt.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);vt.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&vt.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),vt.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of vt.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return vt.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,n){if(vt.languages.match(this.selector,n.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,n);if(r!==void 0){let o=r.uris.has(n.document.uri.toString());if(i&&o||!i&&!o)return;if(i){let s=this.getMatchingCells(e);if(s!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,s);a!==void 0&&this.doSendChange(a,s).catch(()=>{})}}}else i&&this.doSendOpen(e,[n]).catch(()=>{})}didChangeNotebookCellTextDocument(e,n){vt.languages.match(this.selector,n.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[n]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,n){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=n.document.uri,o=r.cells.findIndex(s=>s.document.uri.toString()===i.toString());if(o!==-1)if(o===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let s=r.cells.slice(),a=s.splice(o,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:o,deleteCount:1},didClose:a}}},s).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,n=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(n!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,n);i!==void 0&&this.doSendChange(i,n).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(n===void 0)return;this.doSendOpen(e,n).catch(()=>{})}}didChangeNotebookDocument(e){let n=e.notebook,r=this.notebookSyncInfo.get(n.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(n);if(i===void 0)return;this.didOpen(n,i,r)}else{let i=this.getMatchingCells(n);if(i===void 0){this.didClose(n,r);return}let o=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);o!==void 0&&this.doSendChange(o,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,n=this.notebookSyncInfo.get(e.uri.toString())){if(n===void 0)return;let r=e.getCells().filter(i=>n.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let n=this.getMatchingCells(e);if(n!==void 0)return this.doSendOpen(e,n)}async doSendOpen(e,n){let r=async(o,s)=>{let a=Yi.c2p.asNotebookDocument(o,s,this.client.code2ProtocolConverter),c=s.map(l=>this.client.code2ProtocolConverter.asTextDocumentItem(l.document));try{await this.client.sendNotification(cr.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:c})}catch(l){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",l),l}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),xa.create(n)),i?.didOpen!==void 0?i.didOpen(e,n,r):r(e,n)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,n=this.getMatchingCells(e.notebook)){let r=async o=>{try{await this.client.sendNotification(cr.DidChangeNotebookDocumentNotification.type,{notebookDocument:Yi.c2p.asVersionedNotebookDocumentIdentifier(o.notebook,this.client.code2ProtocolConverter),change:Yi.c2p.asNotebookDocumentChangeEvent(o,this.client.code2ProtocolConverter)})}catch(s){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",s),s}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),xa.create(n??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let n=async i=>{try{await this.client.sendNotification(cr.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(o){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",o),o}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,n):n(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,n){let r=async(o,s)=>{try{await this.client.sendNotification(cr.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,n,r):r(e,n)}asNotebookDocumentChangeEvent(e,n,r,i){if(n!==void 0&&n.notebook!==e)throw new Error("Notebook must be identical");let o={notebook:e};n?.metadata!==void 0&&(o.metadata=Yi.c2p.asMetadata(n.metadata));let s;if(n?.cellChanges!==void 0&&n.cellChanges.length>0){let a=[];s=new Set(i.map(c=>c.document.uri.toString()));for(let c of n.cellChanges)s.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&a.push(c.cell);a.length>0&&(o.cells=o.cells??{},o.cells.data=a)}if((n?.contentChanges!==void 0&&n.contentChanges.length>0||n===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,c=i,l=jf.computeDiff(a,c,!1),d,p;if(l!==void 0){d=l.cells===void 0?new Map:new Map(l.cells.map(m=>[m.document.uri.toString(),m])),p=l.deleteCount===0?new Map:new Map(a.slice(l.start,l.start+l.deleteCount).map(m=>[m.document.uri.toString(),m]));for(let m of Array.from(p.keys()))d.has(m)&&(p.delete(m),d.delete(m));o.cells=o.cells??{};let f=[],g=[];if(d.size>0||p.size>0){for(let m of d.values())f.push(m);for(let m of p.values())g.push(m)}o.cells.structure={array:l,didOpen:f,didClose:g}}}return Object.keys(o).length>1?o:void 0}getMatchingCells(e,n=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||Hf.matchNotebook(r.notebook,e)){let i=this.filterCells(e,n,r.cells);return i.length===0?void 0:i}}}cellMatches(e,n){let r=this.getMatchingCells(e,[n]);return r!==void 0&&r[0]===n}filterCells(e,n,r){let i=r!==void 0?n.filter(o=>{let s=o.document.languageId;return r.some(a=>a.language==="*"||s===a.language)}):n;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},ur=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=cr.NotebookDocumentSyncRegistrationType.type,vt.workspace.onDidOpenTextDocument(n=>{if(n.uri.scheme!==ur.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Qi&&o.didOpenNotebookCellTextDocument(r,i)}),vt.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length===0)return;let r=n.document;if(r.uri.scheme!==ur.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof Qi&&o.didChangeNotebookCellTextDocument(i,n)}),vt.workspace.onDidCloseTextDocument(n=>{if(n.uri.scheme!==ur.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Qi&&o.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let n=e.getState();if(n.kind==="document"&&n.registrations===!0&&n.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let n=Yv(Yv(e,"notebookDocument"),"synchronization");n.dynamicRegistration=!0,n.executionSummarySupport=!0}preInitialize(e){let n=e.notebookDocumentSync;n!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(qa.asDocumentSelector(n)))}initialize(e){let n=e.notebookDocumentSync;if(n===void 0)return;let r=n.id??zP.generateUuid();this.register({id:r,registerOptions:n})}register(e){let n=new Qi(this.client,e.registerOptions);this.registrations.set(e.id,n)}unregister(e){let n=this.registrations.get(e);n&&n.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==ur.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&vt.languages.match(this.dedicatedChannel,e)>0)return!0;for(let n of this.registrations.values())if(n.handles(e))return!0;return!1}getProvider(e){for(let n of this.registrations.values())if(n.handles(e.document))return n}findNotebookDocumentAndCell(e){let n=e.uri.toString();for(let r of vt.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===n)return[r,i];return[void 0,void 0]}};ka.NotebookDocumentSyncFeature=ur;ur.CellScheme="vscode-notebook-cell"});var ey=w(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.SyncConfigurationFeature=Er.toJSONObject=Er.ConfigurationFeature=void 0;var Zi=require("vscode"),ns=j(),KP=tn(),UP=$e(),Zv=fe(),$f=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(ns.ConfigurationRequest.type,(n,r)=>{let i=s=>{let a=[];for(let c of s.items){let l=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(l,c.section!==null?c.section:void 0))}return a},o=e.middleware.workspace;return o&&o.configuration?o.configuration(n,r,i):i(n,r)})}getConfiguration(e,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=ci(Zi.workspace.getConfiguration(void 0,e).get(n));else{let o=Zi.workspace.getConfiguration(n.substr(0,i),e);o&&(r=ci(o.get(n.substr(i+1))))}}else{let i=Zi.workspace.getConfiguration(void 0,e);r={};for(let o of Object.keys(i))i.has(o)&&(r[o]=ci(i.get(o)))}return r===void 0&&(r=null),r}dispose(){}};Er.ConfigurationFeature=$f;function ci(t){if(t){if(Array.isArray(t))return t.map(ci);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=ci(t[n]));return e}}return t}Er.toJSONObject=ci;var Wf=class{constructor(e){this._client=e,this.isDisposed=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return ns.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,Zv.ensure)((0,Zv.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:UP.generateUuid(),registerOptions:{section:e}})}register(e){let n=Zi.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isDisposed=!0}onDidChangeConfiguration(e,n){if(this.isDisposed)return;let r;if(KP.string(e)?r=[e]:r=e,r!==void 0&&n!==void 0&&!r.some(a=>n.affectsConfiguration(a)))return;let i=async s=>s===void 0?this._client.sendNotification(ns.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(ns.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(s)}),o=this._client.middleware.workspace?.didChangeConfiguration;(o?o(r,i):i(r)).catch(s=>{this._client.error(`Sending notification ${ns.DidChangeConfigurationNotification.type.method} failed`,s)})}extractSettingsInformation(e){function n(o,s){let a=o;for(let c=0;c<s.length-1;c++){let l=a[s[c]];l||(l=Object.create(null),a[s[c]]=l),a=l}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),c=null;if(a>=0?c=Zi.workspace.getConfiguration(s.substr(0,a),r).get(s.substr(a+1)):c=Zi.workspace.getConfiguration(void 0,r).get(s),c){let l=e[o].split(".");n(i,l)[l[l.length-1]]=ci(c)}}return i}};Er.SyncConfigurationFeature=Wf});var ty=w(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.DidSaveTextDocumentFeature=Nt.WillSaveWaitUntilFeature=Nt.WillSaveFeature=Nt.DidChangeTextDocumentFeature=Nt.DidCloseTextDocumentFeature=Nt.DidOpenTextDocumentFeature=void 0;var Bt=require("vscode"),Te=j(),We=fe(),eo=$e(),zf=class extends We.TextDocumentEventFeature{constructor(e,n){super(e,Bt.workspace.onDidOpenTextDocument,Te.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,We.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,We.ensure)((0,We.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:eo.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return Te.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);Bt.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&Bt.languages.match(n,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));(o.didOpen?o.didOpen(r,s):s(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}getTextDocument(e){return e}notificationSent(e,n,r){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,n,r)}};Nt.DidOpenTextDocumentFeature=zf;var Kf=class extends We.TextDocumentEventFeature{constructor(e,n,r){super(e,Bt.workspace.onDidCloseTextDocument,Te.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,We.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n,this._pendingTextDocumentChanges=r}get registrationType(){return Te.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,We.ensure)((0,We.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:eo.generateUuid(),registerOptions:{documentSelector:n}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,n,r){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,n,r)}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(Bt.languages.match(n,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(o.didClose?o.didClose(i,s):s(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};Nt.DidCloseTextDocumentFeature=Kf;var Uf=class extends We.DynamicDocumentFeature{constructor(e,n){super(e),this._changeData=new Map,this._onNotificationSent=new Bt.EventEmitter,this._onPendingChangeAdded=new Bt.EventEmitter,this._pendingTextDocumentChanges=n,this._syncKind=Te.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return Te.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,We.ensure)((0,We.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==Te.TextDocumentSyncKind.None&&this.register({id:eo.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=Bt.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let n=e.document.uri,r=e.document.version,i=[];for(let o of this._changeData.values())if(Bt.languages.match(o.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let s=this._client.middleware;if(o.syncKind===Te.TextDocumentSyncKind.Incremental){let a=async c=>{let l=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c,n,r);await this._client.sendNotification(Te.DidChangeTextDocumentNotification.type,l),this.notificationSent(c.document,Te.DidChangeTextDocumentNotification.type,l)};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}else if(o.syncKind===Te.TextDocumentSyncKind.Full){let a=async c=>{let l=c.document.uri.toString();this._pendingTextDocumentChanges.set(l,c.document),this._onPendingChangeAdded.fire()};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}}return Promise.all(i).then(void 0,o=>{throw this._client.error(`Sending document notification ${Te.DidChangeTextDocumentNotification.type.method} failed`,o),o})}notificationSent(e,n,r){this._onNotificationSent.fire({textDocument:e,type:n,params:r})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=Te.TextDocumentSyncKind.None;else{this._syncKind=Te.TextDocumentSyncKind.None;for(let n of this._changeData.values())if(this.updateSyncKind(n.syncKind),this._syncKind===Te.TextDocumentSyncKind.Full)break}}dispose(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=Te.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let n;if(e.size===0)n=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{n=[];for(let r of this._pendingTextDocumentChanges)e.has(r[0])||(n.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return n}getProvider(e){for(let n of this._changeData.values())if(Bt.languages.match(n.documentSelector,e)>0)return{send:r=>this.callback(r)}}updateSyncKind(e){if(this._syncKind!==Te.TextDocumentSyncKind.Full)switch(e){case Te.TextDocumentSyncKind.Full:this._syncKind=e;break;case Te.TextDocumentSyncKind.Incremental:this._syncKind===Te.TextDocumentSyncKind.None&&(this._syncKind=Te.TextDocumentSyncKind.Incremental);break}}};Nt.DidChangeTextDocumentFeature=Uf;var Bf=class extends We.TextDocumentEventFeature{constructor(e){super(e,Bt.workspace.onWillSaveTextDocument,Te.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),n=>n.document,(n,r)=>We.TextDocumentEventFeature.textDocumentFilter(n,r.document))}get registrationType(){return Te.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=(0,We.ensure)((0,We.ensure)(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:eo.generateUuid(),registerOptions:{documentSelector:n}})}getTextDocument(e){return e.document}};Nt.WillSaveFeature=Bf;var Gf=class extends We.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return Te.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=(0,We.ensure)((0,We.ensure)(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:eo.generateUuid(),registerOptions:{documentSelector:n}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=Bt.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(We.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let n=this._client.middleware,r=i=>this._client.sendRequest(Te.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async o=>{let s=await this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};Nt.WillSaveWaitUntilFeature=Gf;var Vf=class extends We.TextDocumentEventFeature{constructor(e){super(e,Bt.workspace.onDidSaveTextDocument,Te.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),n=>n,We.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return Te.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,We.ensure)((0,We.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;if(n&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:eo.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};Nt.DidSaveTextDocumentFeature=Vf});var ny=w(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.CompletionItemFeature=void 0;var BP=require("vscode"),se=j(),Xf=fe(),GP=$e(),VP=[se.CompletionItemKind.Text,se.CompletionItemKind.Method,se.CompletionItemKind.Function,se.CompletionItemKind.Constructor,se.CompletionItemKind.Field,se.CompletionItemKind.Variable,se.CompletionItemKind.Class,se.CompletionItemKind.Interface,se.CompletionItemKind.Module,se.CompletionItemKind.Property,se.CompletionItemKind.Unit,se.CompletionItemKind.Value,se.CompletionItemKind.Enum,se.CompletionItemKind.Keyword,se.CompletionItemKind.Snippet,se.CompletionItemKind.Color,se.CompletionItemKind.File,se.CompletionItemKind.Reference,se.CompletionItemKind.Folder,se.CompletionItemKind.EnumMember,se.CompletionItemKind.Constant,se.CompletionItemKind.Struct,se.CompletionItemKind.Event,se.CompletionItemKind.Operator,se.CompletionItemKind.TypeParameter],Jf=class extends Xf.TextDocumentLanguageFeature{constructor(e){super(e,se.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let n=(0,Xf.ensure)((0,Xf.ensure)(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[se.MarkupKind.Markdown,se.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[se.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[se.InsertTextMode.asIs,se.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},n.insertTextMode=se.InsertTextMode.adjustIndentation,n.completionItemKind={valueSet:VP},n.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,n){let r=this.getRegistrationOptions(n,e.completionProvider);!r||this.register({id:GP.generateUuid(),registerOptions:r})}registerLanguageProvider(e,n){this.labelDetailsSupport.set(n,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,o=e.documentSelector,s={provideCompletionItems:(a,c,l,d)=>{let p=this._client,f=this._client.middleware,g=(m,b,R,q)=>p.sendRequest(se.CompletionRequest.type,p.code2ProtocolConverter.asCompletionParams(m,b,R),q).then(y=>q.isCancellationRequested?null:p.protocol2CodeConverter.asCompletionResult(y,i,q),y=>p.handleFailedRequest(se.CompletionRequest.type,q,y,null));return f.provideCompletionItem?f.provideCompletionItem(a,c,d,l,g):g(a,c,d,l)},resolveCompletionItem:e.resolveProvider?(a,c)=>{let l=this._client,d=this._client.middleware,p=(f,g)=>l.sendRequest(se.CompletionResolveRequest.type,l.code2ProtocolConverter.asCompletionItem(f,!!this.labelDetailsSupport.get(n)),g).then(m=>g.isCancellationRequested?null:l.protocol2CodeConverter.asCompletionItem(m),m=>l.handleFailedRequest(se.CompletionResolveRequest.type,g,m,f));return d.resolveCompletionItem?d.resolveCompletionItem(a,c,p):p(a,c)}:void 0};return[BP.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),s,...r),s]}};Ea.CompletionItemFeature=Jf});var ry=w(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.HoverFeature=void 0;var XP=require("vscode"),rs=j(),Yf=fe(),JP=$e(),Qf=class extends Yf.TextDocumentLanguageFeature{constructor(e){super(e,rs.HoverRequest.type)}fillClientCapabilities(e){let n=(0,Yf.ensure)((0,Yf.ensure)(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[rs.MarkupKind.Markdown,rs.MarkupKind.PlainText]}initialize(e,n){let r=this.getRegistrationOptions(n,e.hoverProvider);!r||this.register({id:JP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideHover:(i,o,s)=>{let a=this._client,c=(d,p,f)=>a.sendRequest(rs.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,p),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asHover(g),g=>a.handleFailedRequest(rs.HoverRequest.type,f,g,null)),l=a.middleware;return l.provideHover?l.provideHover(i,o,s,c):c(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return XP.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Fa.HoverFeature=Qf});var iy=w(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.DefinitionFeature=void 0;var YP=require("vscode"),Zf=j(),eh=fe(),QP=$e(),th=class extends eh.TextDocumentLanguageFeature{constructor(e){super(e,Zf.DefinitionRequest.type)}fillClientCapabilities(e){let n=(0,eh.ensure)((0,eh.ensure)(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.definitionProvider);!r||this.register({id:QP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDefinition:(i,o,s)=>{let a=this._client,c=(d,p,f)=>a.sendRequest(Zf.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,p),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(g,f),g=>a.handleFailedRequest(Zf.DefinitionRequest.type,f,g,null)),l=a.middleware;return l.provideDefinition?l.provideDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return YP.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Oa.DefinitionFeature=th});var sy=w(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.SignatureHelpFeature=void 0;var oy=require("vscode"),is=j(),nh=fe(),ZP=$e(),rh=class extends nh.TextDocumentLanguageFeature{constructor(e){super(e,is.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=(0,nh.ensure)((0,nh.ensure)(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[is.MarkupKind.Markdown,is.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.signatureHelpProvider);!r||this.register({id:ZP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideSignatureHelp:(r,i,o,s)=>{let a=this._client,c=(d,p,f,g)=>a.sendRequest(is.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(d,p,f),g).then(m=>g.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(m,g),m=>a.handleFailedRequest(is.SignatureHelpRequest.type,g,m,null)),l=a.middleware;return l.provideSignatureHelp?l.provideSignatureHelp(r,i,s,o,c):c(r,i,s,o)}};return[this.registerProvider(e,n),n]}registerProvider(e,n){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return oy.languages.registerSignatureHelpProvider(r,n,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return oy.languages.registerSignatureHelpProvider(r,n,i)}}};Na.SignatureHelpFeature=rh});var ay=w(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.DocumentHighlightFeature=void 0;var eq=require("vscode"),ih=j(),oh=fe(),tq=$e(),sh=class extends oh.TextDocumentLanguageFeature{constructor(e){super(e,ih.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,oh.ensure)((0,oh.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentHighlightProvider);!r||this.register({id:tq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentHighlights:(i,o,s)=>{let a=this._client,c=(d,p,f)=>a.sendRequest(ih.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,p),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(g,f),g=>a.handleFailedRequest(ih.DocumentHighlightRequest.type,f,g,null)),l=a.middleware;return l.provideDocumentHighlights?l.provideDocumentHighlights(i,o,s,c):c(i,o,s)}};return[eq.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Ia.DocumentHighlightFeature=sh});var uh=w(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.DocumentSymbolFeature=Gn.SupportedSymbolTags=Gn.SupportedSymbolKinds=void 0;var nq=require("vscode"),ve=j(),ah=fe(),rq=$e();Gn.SupportedSymbolKinds=[ve.SymbolKind.File,ve.SymbolKind.Module,ve.SymbolKind.Namespace,ve.SymbolKind.Package,ve.SymbolKind.Class,ve.SymbolKind.Method,ve.SymbolKind.Property,ve.SymbolKind.Field,ve.SymbolKind.Constructor,ve.SymbolKind.Enum,ve.SymbolKind.Interface,ve.SymbolKind.Function,ve.SymbolKind.Variable,ve.SymbolKind.Constant,ve.SymbolKind.String,ve.SymbolKind.Number,ve.SymbolKind.Boolean,ve.SymbolKind.Array,ve.SymbolKind.Object,ve.SymbolKind.Key,ve.SymbolKind.Null,ve.SymbolKind.EnumMember,ve.SymbolKind.Struct,ve.SymbolKind.Event,ve.SymbolKind.Operator,ve.SymbolKind.TypeParameter];Gn.SupportedSymbolTags=[ve.SymbolTag.Deprecated];var ch=class extends ah.TextDocumentLanguageFeature{constructor(e){super(e,ve.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=(0,ah.ensure)((0,ah.ensure)(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:Gn.SupportedSymbolKinds},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:Gn.SupportedSymbolTags},n.labelSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentSymbolProvider);!r||this.register({id:rq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentSymbols:(o,s)=>{let a=this._client,c=async(d,p)=>{try{let f=await a.sendRequest(ve.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(d),p);if(p.isCancellationRequested||f===void 0||f===null)return null;if(f.length===0)return[];{let g=f[0];return ve.DocumentSymbol.is(g)?await a.protocol2CodeConverter.asDocumentSymbols(f,p):await a.protocol2CodeConverter.asSymbolInformations(f,p)}}catch(f){return a.handleFailedRequest(ve.DocumentSymbolRequest.type,p,f,null)}},l=a.middleware;return l.provideDocumentSymbols?l.provideDocumentSymbols(o,s,c):c(o,s)}},i=e.label!==void 0?{label:e.label}:void 0;return[nq.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,i),r]}};Gn.DocumentSymbolFeature=ch});var uy=w(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.WorkspaceSymbolFeature=void 0;var iq=require("vscode"),os=j(),lh=fe(),cy=uh(),oq=$e(),dh=class extends lh.WorkspaceFeature{constructor(e){super(e,os.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=(0,lh.ensure)((0,lh.ensure)(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:cy.SupportedSymbolKinds},n.tagSupport={valueSet:cy.SupportedSymbolTags},n.resolveSupport={properties:["location.range"]}}initialize(e){!e.workspaceSymbolProvider||this.register({id:oq.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(r,i)=>{let o=this._client,s=(c,l)=>o.sendRequest(os.WorkspaceSymbolRequest.type,{query:c},l).then(d=>l.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformations(d,l),d=>o.handleFailedRequest(os.WorkspaceSymbolRequest.type,l,d,null)),a=o.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,s):s(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let o=this._client,s=(c,l)=>o.sendRequest(os.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(c),l).then(d=>l.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformation(d),d=>o.handleFailedRequest(os.WorkspaceSymbolResolveRequest.type,l,d,null)),a=o.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,s):s(r,i)}:void 0};return[iq.languages.registerWorkspaceSymbolProvider(n),n]}};Ma.WorkspaceSymbolFeature=dh});var ly=w(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.ReferencesFeature=void 0;var sq=require("vscode"),fh=j(),hh=fe(),aq=$e(),ph=class extends hh.TextDocumentLanguageFeature{constructor(e){super(e,fh.ReferencesRequest.type)}fillClientCapabilities(e){(0,hh.ensure)((0,hh.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.referencesProvider);!r||this.register({id:aq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideReferences:(i,o,s,a)=>{let c=this._client,l=(p,f,g,m)=>c.sendRequest(fh.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(p,f,g),m).then(b=>m.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(b,m),b=>c.handleFailedRequest(fh.ReferencesRequest.type,m,b,null)),d=c.middleware;return d.provideReferences?d.provideReferences(i,o,s,a,l):l(i,o,s,a)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return sq.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};La.ReferencesFeature=ph});var dy=w(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.CodeActionFeature=void 0;var cq=require("vscode"),Gt=j(),uq=$e(),gh=fe(),mh=class extends gh.TextDocumentLanguageFeature{constructor(e){super(e,Gt.CodeActionRequest.type)}fillClientCapabilities(e){let n=(0,gh.ensure)((0,gh.ensure)(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[Gt.CodeActionKind.Empty,Gt.CodeActionKind.QuickFix,Gt.CodeActionKind.Refactor,Gt.CodeActionKind.RefactorExtract,Gt.CodeActionKind.RefactorInline,Gt.CodeActionKind.RefactorRewrite,Gt.CodeActionKind.Source,Gt.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(e,n){let r=this.getRegistrationOptions(n,e.codeActionProvider);!r||this.register({id:uq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideCodeActions:(i,o,s,a)=>{let c=this._client,l=async(p,f,g,m)=>{let b={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(p),range:c.code2ProtocolConverter.asRange(f),context:await c.code2ProtocolConverter.asCodeActionContext(g,m)};return c.sendRequest(Gt.CodeActionRequest.type,b,m).then(R=>m.isCancellationRequested||R===null||R===void 0?null:c.protocol2CodeConverter.asCodeActionResult(R,m),R=>c.handleFailedRequest(Gt.CodeActionRequest.type,m,R,null))},d=c.middleware;return d.provideCodeActions?d.provideCodeActions(i,o,s,a,l):l(i,o,s,a)},resolveCodeAction:e.resolveProvider?(i,o)=>{let s=this._client,a=this._client.middleware,c=async(l,d)=>s.sendRequest(Gt.CodeActionResolveRequest.type,await s.code2ProtocolConverter.asCodeAction(l,d),d).then(p=>d.isCancellationRequested?l:s.protocol2CodeConverter.asCodeAction(p,d),p=>s.handleFailedRequest(Gt.CodeActionResolveRequest.type,d,p,l));return a.resolveCodeAction?a.resolveCodeAction(i,o,c):c(i,o)}:void 0};return[cq.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};Aa.CodeActionFeature=mh});var hy=w(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.CodeLensFeature=void 0;var fy=require("vscode"),to=j(),lq=$e(),ss=fe(),vh=class extends ss.TextDocumentLanguageFeature{constructor(e){super(e,to.CodeLensRequest.type)}fillClientCapabilities(e){(0,ss.ensure)((0,ss.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,ss.ensure)((0,ss.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(to.CodeLensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(n,e.codeLensProvider);!i||this.register({id:lq.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new fy.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(o,s)=>{let a=this._client,c=(d,p)=>a.sendRequest(to.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(d),p).then(f=>p.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(f,p),f=>a.handleFailedRequest(to.CodeLensRequest.type,p,f,null)),l=a.middleware;return l.provideCodeLenses?l.provideCodeLenses(o,s,c):c(o,s)},resolveCodeLens:e.resolveProvider?(o,s)=>{let a=this._client,c=(d,p)=>a.sendRequest(to.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(d),p).then(f=>p.isCancellationRequested?d:a.protocol2CodeConverter.asCodeLens(f),f=>a.handleFailedRequest(to.CodeLensResolveRequest.type,p,f,d)),l=a.middleware;return l.resolveCodeLens?l.resolveCodeLens(o,s,c):c(o,s)}:void 0};return[fy.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};ja.CodeLensFeature=vh});var py=w(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.DocumentOnTypeFormattingFeature=Fr.DocumentRangeFormattingFeature=Fr.DocumentFormattingFeature=void 0;var Ha=require("vscode"),lr=j(),wh=$e(),dr=fe(),as;(function(t){function e(n){let r=Ha.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}t.fromConfiguration=e})(as||(as={}));var yh=class extends dr.TextDocumentLanguageFeature{constructor(e){super(e,lr.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,dr.ensure)((0,dr.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentFormattingProvider);!r||this.register({id:wh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentFormattingEdits:(i,o,s)=>{let a=this._client,c=(d,p,f)=>{let g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),options:a.code2ProtocolConverter.asFormattingOptions(p,as.fromConfiguration(d))};return a.sendRequest(lr.DocumentFormattingRequest.type,g,f).then(m=>f.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(m,f),m=>a.handleFailedRequest(lr.DocumentFormattingRequest.type,f,m,null))},l=a.middleware;return l.provideDocumentFormattingEdits?l.provideDocumentFormattingEdits(i,o,s,c):c(i,o,s)}};return[Ha.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Fr.DocumentFormattingFeature=yh;var Ch=class extends dr.TextDocumentLanguageFeature{constructor(e){super(e,lr.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,dr.ensure)((0,dr.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);!r||this.register({id:wh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,o,s,a)=>{let c=this._client,l=(p,f,g,m)=>{let b={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(p),range:c.code2ProtocolConverter.asRange(f),options:c.code2ProtocolConverter.asFormattingOptions(g,as.fromConfiguration(p))};return c.sendRequest(lr.DocumentRangeFormattingRequest.type,b,m).then(R=>m.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(R,m),R=>c.handleFailedRequest(lr.DocumentRangeFormattingRequest.type,m,R,null))},d=c.middleware;return d.provideDocumentRangeFormattingEdits?d.provideDocumentRangeFormattingEdits(i,o,s,a,l):l(i,o,s,a)}};return[Ha.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Fr.DocumentRangeFormattingFeature=Ch;var _h=class extends dr.TextDocumentLanguageFeature{constructor(e){super(e,lr.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,dr.ensure)((0,dr.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);!r||this.register({id:wh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideOnTypeFormattingEdits:(o,s,a,c,l)=>{let d=this._client,p=(g,m,b,R,q)=>{let y={textDocument:d.code2ProtocolConverter.asTextDocumentIdentifier(g),position:d.code2ProtocolConverter.asPosition(m),ch:b,options:d.code2ProtocolConverter.asFormattingOptions(R,as.fromConfiguration(g))};return d.sendRequest(lr.DocumentOnTypeFormattingRequest.type,y,q).then(C=>q.isCancellationRequested?null:d.protocol2CodeConverter.asTextEdits(C,q),C=>d.handleFailedRequest(lr.DocumentOnTypeFormattingRequest.type,q,C,null))},f=d.middleware;return f.provideOnTypeFormattingEdits?f.provideOnTypeFormattingEdits(o,s,a,c,l,p):p(o,s,a,c,l)}},i=e.moreTriggerCharacter||[];return[Ha.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.firstTriggerCharacter,...i),r]}};Fr.DocumentOnTypeFormattingFeature=_h});var my=w($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.RenameFeature=void 0;var dq=require("vscode"),ui=j(),fq=$e(),gy=tn(),bh=fe(),Dh=class extends bh.TextDocumentLanguageFeature{constructor(e){super(e,ui.RenameRequest.type)}fillClientCapabilities(e){let n=(0,bh.ensure)((0,bh.ensure)(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=ui.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.renameProvider);!r||(gy.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:fq.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let n=e.documentSelector,r={provideRenameEdits:(i,o,s,a)=>{let c=this._client,l=(p,f,g,m)=>{let b={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(p),position:c.code2ProtocolConverter.asPosition(f),newName:g};return c.sendRequest(ui.RenameRequest.type,b,m).then(R=>m.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(R,m),R=>c.handleFailedRequest(ui.RenameRequest.type,m,R,null,!1))},d=c.middleware;return d.provideRenameEdits?d.provideRenameEdits(i,o,s,a,l):l(i,o,s,a)},prepareRename:e.prepareProvider?(i,o,s)=>{let a=this._client,c=(d,p,f)=>{let g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),position:a.code2ProtocolConverter.asPosition(p)};return a.sendRequest(ui.PrepareRenameRequest.type,g,f).then(m=>f.isCancellationRequested?null:ui.Range.is(m)?a.protocol2CodeConverter.asRange(m):this.isDefaultBehavior(m)?m.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):m&&ui.Range.is(m.range)?{range:a.protocol2CodeConverter.asRange(m.range),placeholder:m.placeholder}:Promise.reject(new Error("The element can't be renamed.")),m=>{throw typeof m.message=="string"?new Error(m.message):new Error("The element can't be renamed.")})},l=a.middleware;return l.prepareRename?l.prepareRename(i,o,s,c):c(i,o,s)}:void 0};return[this.registerProvider(n,r),r]}registerProvider(e,n){return dq.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}isDefaultBehavior(e){let n=e;return n&&gy.boolean(n.defaultBehavior)}};$a.RenameFeature=Dh});var vy=w(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.DocumentLinkFeature=void 0;var hq=require("vscode"),cs=j(),Rh=fe(),pq=$e(),Sh=class extends Rh.TextDocumentLanguageFeature{constructor(e){super(e,cs.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=(0,Rh.ensure)((0,Rh.ensure)(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentLinkProvider);!r||this.register({id:pq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentLinks:(i,o)=>{let s=this._client,a=(l,d)=>s.sendRequest(cs.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(l),d).then(p=>d.isCancellationRequested?null:s.protocol2CodeConverter.asDocumentLinks(p,d),p=>s.handleFailedRequest(cs.DocumentLinkRequest.type,d,p,null)),c=s.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(i,o,a):a(i,o)},resolveDocumentLink:e.resolveProvider?(i,o)=>{let s=this._client,a=(l,d)=>s.sendRequest(cs.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(l),d).then(p=>d.isCancellationRequested?l:s.protocol2CodeConverter.asDocumentLink(p),p=>s.handleFailedRequest(cs.DocumentLinkResolveRequest.type,d,p,l)),c=s.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(i,o,a):a(i,o)}:void 0};return[hq.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Wa.DocumentLinkFeature=Sh});var Cy=w(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.ExecuteCommandFeature=void 0;var gq=require("vscode"),Th=j(),mq=$e(),yy=fe(),Ph=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Th.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,yy.ensure)((0,yy.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:mq.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,r=n.middleware,i=(o,s)=>{let a={command:o,arguments:s};return n.sendRequest(Th.ExecuteCommandRequest.type,a).then(void 0,c=>n.handleFailedRequest(Th.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){let o=[];for(let s of e.registerOptions.commands)o.push(gq.commands.registerCommand(s,(...a)=>r.executeCommand?r.executeCommand(s,a,i):i(s,a)));this._commands.set(e.id,o)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}};za.ExecuteCommandFeature=Ph});var _y=w(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.FileSystemWatcherFeature=void 0;var vq=require("vscode"),li=j(),Ka=fe(),qh=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return li.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,Ka.ensure)((0,Ka.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Ka.ensure)((0,Ka.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let o=!0,s=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(o=(r.kind&li.WatchKind.Create)!==0,s=(r.kind&li.WatchKind.Change)!==0,a=(r.kind&li.WatchKind.Delete)!==0);let c=vq.workspace.createFileSystemWatcher(i,!o,!s,!a);this.hookListeners(c,o,s,a,n),n.push(c)}this._watchers.set(e.id,n)}registerRaw(e,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,n,r,i,o){n&&e.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:li.FileChangeType.Created}),null,o),r&&e.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:li.FileChangeType.Changed}),null,o),i&&e.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:li.FileChangeType.Deleted}),null,o)}unregister(e){let n=this._watchers.get(e);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}};Ua.FileSystemWatcherFeature=qh});var wy=w(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.ColorProviderFeature=void 0;var yq=require("vscode"),us=j(),xh=fe(),kh=class extends xh.TextDocumentLanguageFeature{constructor(e){super(e,us.DocumentColorRequest.type)}fillClientCapabilities(e){(0,xh.ensure)((0,xh.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideColorPresentations:(i,o,s)=>{let a=this._client,c=(d,p,f)=>{let g={color:d,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p.document),range:a.code2ProtocolConverter.asRange(p.range)};return a.sendRequest(us.ColorPresentationRequest.type,g,f).then(m=>f.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(m,f),m=>a.handleFailedRequest(us.ColorPresentationRequest.type,f,m,null))},l=a.middleware;return l.provideColorPresentations?l.provideColorPresentations(i,o,s,c):c(i,o,s)},provideDocumentColors:(i,o)=>{let s=this._client,a=(l,d)=>{let p={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(l)};return s.sendRequest(us.DocumentColorRequest.type,p,d).then(f=>d.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(f,d),f=>s.handleFailedRequest(us.DocumentColorRequest.type,d,f,null))},c=s.middleware;return c.provideDocumentColors?c.provideDocumentColors(i,o,a):a(i,o)}};return[yq.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Ba.ColorProviderFeature=kh});var by=w(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.ImplementationFeature=void 0;var Cq=require("vscode"),Eh=j(),Fh=fe(),Oh=class extends Fh.TextDocumentLanguageFeature{constructor(e){super(e,Eh.ImplementationRequest.type)}fillClientCapabilities(e){let n=(0,Fh.ensure)((0,Fh.ensure)(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideImplementation:(i,o,s)=>{let a=this._client,c=(d,p,f)=>a.sendRequest(Eh.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,p),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(g,f),g=>a.handleFailedRequest(Eh.ImplementationRequest.type,f,g,null)),l=a.middleware;return l.provideImplementation?l.provideImplementation(i,o,s,c):c(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return Cq.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Ga.ImplementationFeature=Oh});var Dy=w(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.TypeDefinitionFeature=void 0;var _q=require("vscode"),Nh=j(),ls=fe(),Ih=class extends ls.TextDocumentLanguageFeature{constructor(e){super(e,Nh.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,ls.ensure)((0,ls.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=(0,ls.ensure)((0,ls.ensure)(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideTypeDefinition:(i,o,s)=>{let a=this._client,c=(d,p,f)=>a.sendRequest(Nh.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,p),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(g,f),g=>a.handleFailedRequest(Nh.TypeDefinitionRequest.type,f,g,null)),l=a.middleware;return l.provideTypeDefinition?l.provideTypeDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return _q.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Va.TypeDefinitionFeature=Ih});var Ry=w(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.WorkspaceFoldersFeature=no.arrayDiff=void 0;var wq=$e(),Xa=require("vscode"),ds=j();function Mh(t,e){if(t!=null)return t[e]}function Lh(t,e){return t.filter(n=>e.indexOf(n)<0)}no.arrayDiff=Lh;var Ah=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return ds.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=Xa.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(ds.WorkspaceFoldersRequest.type,o=>{let s=()=>{let c=Xa.workspace.workspaceFolders;return c===void 0?null:c.map(d=>this.asProtocol(d))},a=n.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Mh(Mh(Mh(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=wq.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let n;if(this._initialFolders&&e){let r=Lh(this._initialFolders,e),i=Lh(e,this._initialFolders);(i.length>0||r.length>0)&&(n=this.doSendEvent(i,r))}else this._initialFolders?n=this.doSendEvent([],this._initialFolders):e&&(n=this.doSendEvent(e,[]));n!==void 0&&n.catch(r=>{this._client.error(`Sending notification ${ds.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,n){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};return this._client.sendNotification(ds.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let n=e.id,r=this._client,i=Xa.workspace.onDidChangeWorkspaceFolders(o=>{let s=l=>this.doSendEvent(l.added,l.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(l=>{this._client.error(`Sending notification ${ds.DidChangeWorkspaceFoldersNotification.type.method} failed`,l)})});this._listeners.set(n,i),this.sendInitialEvent(Xa.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};no.WorkspaceFoldersFeature=Ah});var Sy=w(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.FoldingRangeFeature=void 0;var bq=require("vscode"),ro=j(),jh=fe(),Hh=class extends jh.TextDocumentLanguageFeature{constructor(e){super(e,ro.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=(0,jh.ensure)((0,jh.ensure)(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0,n.foldingRangeKind={valueSet:[ro.FoldingRangeKind.Comment,ro.FoldingRangeKind.Imports,ro.FoldingRangeKind.Region]},n.foldingRange={collapsedText:!1}}initialize(e,n){let[r,i]=this.getRegistration(n,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideFoldingRanges:(i,o,s)=>{let a=this._client,c=(d,p,f)=>{let g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d)};return a.sendRequest(ro.FoldingRangeRequest.type,g,f).then(m=>f.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(m,f),m=>a.handleFailedRequest(ro.FoldingRangeRequest.type,f,m,null))},l=a.middleware;return l.provideFoldingRanges?l.provideFoldingRanges(i,o,s,c):c(i,o,s)}};return[bq.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Ja.FoldingRangeFeature=Hh});var Ty=w(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.DeclarationFeature=void 0;var Dq=require("vscode"),$h=j(),Wh=fe(),zh=class extends Wh.TextDocumentLanguageFeature{constructor(e){super(e,$h.DeclarationRequest.type)}fillClientCapabilities(e){let n=(0,Wh.ensure)((0,Wh.ensure)(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDeclaration:(i,o,s)=>{let a=this._client,c=(d,p,f)=>a.sendRequest($h.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,p),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(g,f),g=>a.handleFailedRequest($h.DeclarationRequest.type,f,g,null)),l=a.middleware;return l.provideDeclaration?l.provideDeclaration(i,o,s,c):c(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return Dq.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Ya.DeclarationFeature=zh});var Py=w(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.SelectionRangeFeature=void 0;var Rq=require("vscode"),Kh=j(),Uh=fe(),Bh=class extends Uh.TextDocumentLanguageFeature{constructor(e){super(e,Kh.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=(0,Uh.ensure)((0,Uh.ensure)(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideSelectionRanges:(i,o,s)=>{let a=this._client,c=async(d,p,f)=>{let g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),positions:await a.code2ProtocolConverter.asPositions(p,f)};return a.sendRequest(Kh.SelectionRangeRequest.type,g,f).then(m=>f.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(m,f),m=>a.handleFailedRequest(Kh.SelectionRangeRequest.type,f,m,null))},l=a.middleware;return l.provideSelectionRanges?l.provideSelectionRanges(i,o,s,c):c(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return Rq.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Qa.SelectionRangeFeature=Bh});var xy=w(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.ProgressFeature=void 0;var qy=j(),Sq=yf();function Tq(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Gh=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:qy.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){Tq(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new Sq.ProgressPart(this._client,i.token,n))};e.onRequest(qy.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Za.ProgressFeature=Gh});var ky=w(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.CallHierarchyFeature=void 0;var Pq=require("vscode"),di=j(),Vh=fe(),Xh=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,n,r){let i=this.client,o=this.middleware,s=(a,c,l)=>{let d=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(di.CallHierarchyPrepareRequest.type,d,l).then(p=>l.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(p,l),p=>i.handleFailedRequest(di.CallHierarchyPrepareRequest.type,l,p,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,n,r,s):s(e,n,r)}provideCallHierarchyIncomingCalls(e,n){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(di.CallHierarchyIncomingCallsRequest.type,c,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(l,a),l=>r.handleFailedRequest(di.CallHierarchyIncomingCallsRequest.type,a,l,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,n,o):o(e,n)}provideCallHierarchyOutgoingCalls(e,n){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(di.CallHierarchyOutgoingCallsRequest.type,c,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(l,a),l=>r.handleFailedRequest(di.CallHierarchyOutgoingCallsRequest.type,a,l,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,n,o):o(e,n)}},Jh=class extends Vh.TextDocumentLanguageFeature{constructor(e){super(e,di.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=e,r=(0,Vh.ensure)((0,Vh.ensure)(n,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new Xh(n);return[Pq.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};ec.CallHierarchyFeature=Jh});var Ey=w(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.SemanticTokensFeature=void 0;var tc=require("vscode"),Y=j(),fs=fe(),qq=tn(),Yh=class extends fs.TextDocumentLanguageFeature{constructor(e){super(e,Y.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=(0,fs.ensure)((0,fs.ensure)(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[Y.SemanticTokenTypes.namespace,Y.SemanticTokenTypes.type,Y.SemanticTokenTypes.class,Y.SemanticTokenTypes.enum,Y.SemanticTokenTypes.interface,Y.SemanticTokenTypes.struct,Y.SemanticTokenTypes.typeParameter,Y.SemanticTokenTypes.parameter,Y.SemanticTokenTypes.variable,Y.SemanticTokenTypes.property,Y.SemanticTokenTypes.enumMember,Y.SemanticTokenTypes.event,Y.SemanticTokenTypes.function,Y.SemanticTokenTypes.method,Y.SemanticTokenTypes.macro,Y.SemanticTokenTypes.keyword,Y.SemanticTokenTypes.modifier,Y.SemanticTokenTypes.comment,Y.SemanticTokenTypes.string,Y.SemanticTokenTypes.number,Y.SemanticTokenTypes.regexp,Y.SemanticTokenTypes.operator,Y.SemanticTokenTypes.decorator],n.tokenModifiers=[Y.SemanticTokenModifiers.declaration,Y.SemanticTokenModifiers.definition,Y.SemanticTokenModifiers.readonly,Y.SemanticTokenModifiers.static,Y.SemanticTokenModifiers.deprecated,Y.SemanticTokenModifiers.abstract,Y.SemanticTokenModifiers.async,Y.SemanticTokenModifiers.modification,Y.SemanticTokenModifiers.documentation,Y.SemanticTokenModifiers.defaultLibrary],n.formats=[Y.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,n.serverCancelSupport=!0,n.augmentsSyntaxTokens=!0,(0,fs.ensure)((0,fs.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(Y.SemanticTokensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(n,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let n=e.documentSelector,r=qq.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,o=new tc.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(g,m)=>{let b=this._client,R=b.middleware,q=(y,C)=>{let T={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(y)};return b.sendRequest(Y.SemanticTokensRequest.type,T,C).then(z=>C.isCancellationRequested?null:b.protocol2CodeConverter.asSemanticTokens(z,C),z=>b.handleFailedRequest(Y.SemanticTokensRequest.type,C,z,null))};return R.provideDocumentSemanticTokens?R.provideDocumentSemanticTokens(g,m,q):q(g,m)},provideDocumentSemanticTokensEdits:i?(g,m,b)=>{let R=this._client,q=R.middleware,y=(C,T,z)=>{let X={textDocument:R.code2ProtocolConverter.asTextDocumentIdentifier(C),previousResultId:T};return R.sendRequest(Y.SemanticTokensDeltaRequest.type,X,z).then(async B=>z.isCancellationRequested?null:Y.SemanticTokens.is(B)?await R.protocol2CodeConverter.asSemanticTokens(B,z):await R.protocol2CodeConverter.asSemanticTokensEdits(B,z),B=>R.handleFailedRequest(Y.SemanticTokensDeltaRequest.type,z,B,null))};return q.provideDocumentSemanticTokensEdits?q.provideDocumentSemanticTokensEdits(g,m,b,y):y(g,m,b)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(g,m,b)=>{let R=this._client,q=R.middleware,y=(C,T,z)=>{let X={textDocument:R.code2ProtocolConverter.asTextDocumentIdentifier(C),range:R.code2ProtocolConverter.asRange(T)};return R.sendRequest(Y.SemanticTokensRangeRequest.type,X,z).then(B=>z.isCancellationRequested?null:R.protocol2CodeConverter.asSemanticTokens(B,z),B=>R.handleFailedRequest(Y.SemanticTokensRangeRequest.type,z,B,null))};return q.provideDocumentRangeSemanticTokens?q.provideDocumentRangeSemanticTokens(g,m,b,y):y(g,m,b)}}:void 0,l=[],d=this._client,p=d.protocol2CodeConverter.asSemanticTokensLegend(e.legend),f=d.protocol2CodeConverter.asDocumentSelector(n);return s!==void 0&&l.push(tc.languages.registerDocumentSemanticTokensProvider(f,s,p)),c!==void 0&&l.push(tc.languages.registerDocumentRangeSemanticTokensProvider(f,c,p)),[new tc.Disposable(()=>l.forEach(g=>g.dispose())),{range:c,full:s,onDidChangeSemanticTokensEmitter:o}]}};nc.SemanticTokensFeature=Yh});var Ny=w(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.WillDeleteFilesFeature=It.WillRenameFilesFeature=It.WillCreateFilesFeature=It.DidDeleteFilesFeature=It.DidRenameFilesFeature=It.DidCreateFilesFeature=void 0;var an=require("vscode"),xq=Ta(),fr=j(),kq=$e();function Fy(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function Eq(t,e){return t[e]}function Oy(t,e,n){t[e]=n}var hr=class{constructor(e,n,r,i,o){this._client=e,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=o,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=Fy(Fy(e,"workspace"),"fileOperations");Oy(n,"dynamicRegistration",!0),Oy(n,this._clientCapability,!0)}initialize(e){let n=e.workspace?.fileOperations,r=n!==void 0?Eq(n,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:kq.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(r=>{let i=new xq.Minimatch(r.pattern.glob,hr.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return hr.getFileType(e)}async filter(e,n){let r=await Promise.all(e.files.map(async o=>{let s=n(o),a=s.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let l of c)if(!(l.scheme!==void 0&&l.scheme!==s.scheme)){if(l.matcher.match(a)){if(l.kind===void 0)return!0;let d=await this.getFileType(s);if(d===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(d===an.FileType.File&&l.kind===fr.FileOperationPatternKind.file||d===an.FileType.Directory&&l.kind===fr.FileOperationPatternKind.folder)return!0}else if(l.kind===fr.FileOperationPatternKind.folder&&await hr.getFileType(s)===an.FileType.Directory&&l.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=>r[s]);return{...e,files:i}}static async getFileType(e){try{return(await an.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},rc=class extends hr{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(n,r)}}},ic=class extends rc{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let n=e.fsPath;if(this._fsPathFileTypes.has(n))return this._fsPathFileTypes.get(n);let r=await hr.getFileType(e);return r&&this._fsPathFileTypes.set(n,r),r}async cacheFileTypes(e,n){await this.filter(e,n)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},Qh=class extends rc{constructor(e){super(e,an.workspace.onDidCreateFiles,fr.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,n):n(e)}};It.DidCreateFilesFeature=Qh;var Zh=class extends ic{constructor(e){super(e,an.workspace.onDidRenameFiles,fr.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=an.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,n=>n.oldUri))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,n):n(e)}};It.DidRenameFilesFeature=Zh;var ep=class extends ic{constructor(e){super(e,an.workspace.onDidDeleteFiles,fr.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=an.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,n=>n))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,n):n(e)}};It.DidDeleteFilesFeature=ep;var hs=class extends hr{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}},tp=class extends hs{constructor(e){super(e,an.workspace.onWillCreateFiles,fr.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,n):n(e)}};It.WillCreateFilesFeature=tp;var np=class extends hs{constructor(e){super(e,an.workspace.onWillRenameFiles,fr.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,n):n(e)}};It.WillRenameFilesFeature=np;var rp=class extends hs{constructor(e){super(e,an.workspace.onWillDeleteFiles,fr.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,n):n(e)}};It.WillDeleteFilesFeature=rp});var Iy=w(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.LinkedEditingFeature=void 0;var Fq=require("vscode"),ip=j(),op=fe(),sp=class extends op.TextDocumentLanguageFeature{constructor(e){super(e,ip.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=(0,op.ensure)((0,op.ensure)(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=>{let a=this._client,c=(d,p,f)=>a.sendRequest(ip.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,p),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(g,f),g=>a.handleFailedRequest(ip.LinkedEditingRangeRequest.type,f,g,null)),l=a.middleware;return l.provideLinkedEditingRange?l.provideLinkedEditingRange(i,o,s,c):c(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return Fq.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};oc.LinkedEditingFeature=sp});var My=w(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.TypeHierarchyFeature=void 0;var Oq=require("vscode"),fi=j(),ap=fe(),cp=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,n,r){let i=this.client,o=this.middleware,s=(a,c,l)=>{let d=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(fi.TypeHierarchyPrepareRequest.type,d,l).then(p=>l.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(p,l),p=>i.handleFailedRequest(fi.TypeHierarchyPrepareRequest.type,l,p,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,n,r,s):s(e,n,r)}provideTypeHierarchySupertypes(e,n){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(fi.TypeHierarchySupertypesRequest.type,c,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(l,a),l=>r.handleFailedRequest(fi.TypeHierarchySupertypesRequest.type,a,l,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,n,o):o(e,n)}provideTypeHierarchySubtypes(e,n){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(fi.TypeHierarchySubtypesRequest.type,c,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(l,a),l=>r.handleFailedRequest(fi.TypeHierarchySubtypesRequest.type,a,l,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,n,o):o(e,n)}},up=class extends ap.TextDocumentLanguageFeature{constructor(e){super(e,fi.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=(0,ap.ensure)((0,ap.ensure)(e,"textDocument"),"typeHierarchy");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new cp(n);return[Oq.languages.registerTypeHierarchyProvider(n.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};sc.TypeHierarchyFeature=up});var Ay=w(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.InlineValueFeature=void 0;var Ly=require("vscode"),ac=j(),ps=fe(),lp=class extends ps.TextDocumentLanguageFeature{constructor(e){super(e,ac.InlineValueRequest.type)}fillClientCapabilities(e){(0,ps.ensure)((0,ps.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,ps.ensure)((0,ps.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,n){this._client.onRequest(ac.InlineValueRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(n,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new Ly.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,c)=>{let l=this._client,d=(f,g,m,b)=>{let R={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(f),range:l.code2ProtocolConverter.asRange(g),context:l.code2ProtocolConverter.asInlineValueContext(m)};return l.sendRequest(ac.InlineValueRequest.type,R,b).then(q=>b.isCancellationRequested?null:l.protocol2CodeConverter.asInlineValues(q,b),q=>l.handleFailedRequest(ac.InlineValueRequest.type,b,q,null))},p=l.middleware;return p.provideInlineValues?p.provideInlineValues(o,s,a,c,d):d(o,s,a,c)}};return[this.registerProvider(n,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,n){return Ly.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};cc.InlineValueFeature=lp});var Hy=w(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.InlayHintsFeature=void 0;var jy=require("vscode"),io=j(),gs=fe(),dp=class extends gs.TextDocumentLanguageFeature{constructor(e){super(e,io.InlayHintRequest.type)}fillClientCapabilities(e){let n=(0,gs.ensure)((0,gs.ensure)(e,"textDocument"),"inlayHint");n.dynamicRegistration=!0,n.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,gs.ensure)((0,gs.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,n){this._client.onRequest(io.InlayHintRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(n,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new jy.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(o,s,a)=>{let c=this._client,l=async(p,f,g)=>{let m={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(p),range:c.code2ProtocolConverter.asRange(f)};try{let b=await c.sendRequest(io.InlayHintRequest.type,m,g);return g.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(b,g)}catch(b){return c.handleFailedRequest(io.InlayHintRequest.type,g,b,null)}},d=c.middleware;return d.provideInlayHints?d.provideInlayHints(o,s,a,l):l(o,s,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(o,s)=>{let a=this._client,c=async(d,p)=>{try{let f=await a.sendRequest(io.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(d),p);if(p.isCancellationRequested)return null;let g=a.protocol2CodeConverter.asInlayHint(f,p);return p.isCancellationRequested?null:g}catch(f){return a.handleFailedRequest(io.InlayHintResolveRequest.type,p,f,null)}},l=a.middleware;return l.resolveInlayHint?l.resolveInlayHint(o,s,c):c(o,s)}:void 0,[this.registerProvider(n,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,n){return jy.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};uc.InlayHintsFeature=dp});var gp=w(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.ProposedFeatures=Oe.BaseLanguageClient=Oe.MessageTransports=Oe.SuspendMode=Oe.State=Oe.CloseAction=Oe.ErrorAction=Oe.RevealOutputChannelOn=void 0;var _e=require("vscode"),F=j(),Nq=_v(),Iq=Dv(),Vn=tn(),lc=Ca(),$y=$e(),Mq=yf(),xn=fe(),Lq=Af(),Wy=Qv(),zy=ey(),oo=ty(),Aq=ny(),jq=ry(),Hq=iy(),$q=sy(),Wq=ay(),zq=uh(),Kq=uy(),Uq=ly(),Bq=dy(),Gq=hy(),fp=py(),Vq=my(),Xq=vy(),Jq=Cy(),Yq=_y(),Qq=wy(),Zq=by(),ex=Dy(),tx=Ry(),nx=Sy(),rx=Ty(),ix=Py(),ox=xy(),sx=ky(),ax=Ey(),so=Ny(),cx=Iy(),ux=My(),lx=Ay(),dx=Hy(),ms;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(ms=Oe.RevealOutputChannelOn||(Oe.RevealOutputChannelOn={}));var fc;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(fc=Oe.ErrorAction||(Oe.ErrorAction={}));var hi;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(hi=Oe.CloseAction||(Oe.CloseAction={}));var dc;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(dc=Oe.State||(Oe.State={}));var fx;(function(t){t.off="off",t.on="on"})(fx=Oe.SuspendMode||(Oe.SuspendMode={}));var hp=class{constructor(e,n){this.client=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,r){return r&&r<=3?{action:fc.Continue}:{action:fc.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:hi.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:hi.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:hi.Restart})}},oe;(function(t){t.Initial="initial",t.Starting="starting",t.StartFailed="startFailed",t.Running="running",t.Stopping="stopping",t.Stopped="stopped"})(oe||(oe={}));var hx;(function(t){function e(n){return n&&F.MessageReader.is(n.reader)&&F.MessageWriter.is(n.writer)}t.is=e})(hx=Oe.MessageTransports||(Oe.MessageTransports={}));var pr=class{constructor(e,n,r){this._traceFormat=F.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new lc.Semaphore(1),this._id=e,this._name=n,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??ms.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=oe.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new lc.Semaphore(1),this._pendingChangeDelayer=new lc.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new lc.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new F.Emitter,this._stateChangeEmitter=new F.Emitter,this._trace=F.Trace.Off,this._tracer={log:(o,s)=>{Vn.string(o)?this.logTrace(o,s):this.logObjectTrace(o)}},this._c2p=Nq.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=Iq.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=_e.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let n=this.getPublicState();this._state=e;let r=this.getPublicState();r!==n&&this._stateChangeEmitter.fire({oldState:n,newState:r})}getPublicState(){switch(this.$state){case oe.Starting:return dc.Starting;case oe.Running:return dc.Running;default:return dc.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...n){if(this.$state===oe.StartFailed||this.$state===oe.Stopping||this.$state===oe.Stopped)return Promise.reject(new F.ResponseError(F.ErrorCodes.ConnectionInactive,"Client is not running"));let r=await this.$start();return this._didChangeTextDocumentFeature.syncKind===F.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(r),r.sendRequest(e,...n)}onRequest(e,n){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,n);let i=this.activeConnection(),o;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,n)),o={dispose:()=>{let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,n),o={dispose:()=>{this._pendingRequestHandlers.delete(r);let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),o.dispose()}}}async sendNotification(e,n){if(this.$state===oe.StartFailed||this.$state===oe.Stopping||this.$state===oe.Stopped)return Promise.reject(new F.ResponseError(F.ErrorCodes.ConnectionInactive,"Client is not running"));let r=this._didChangeTextDocumentFeature.syncKind===F.TextDocumentSyncKind.Full,i;r&&typeof e!="string"&&e.method===F.DidOpenTextDocumentNotification.method&&(i=n?.textDocument.uri,this._pendingOpenNotifications.add(i));let o=await this.$start();return r&&await this.sendPendingFullTextDocumentChanges(o),i!==void 0&&this._pendingOpenNotifications.delete(i),o.sendNotification(e,n)}onNotification(e,n){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,n);let i=this.activeConnection(),o;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,n)),o={dispose:()=>{let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,n),o={dispose:()=>{this._pendingNotificationHandlers.delete(r);let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),o.dispose()}}}async sendProgress(e,n,r){if(this.$state===oe.StartFailed||this.$state===oe.Stopping||this.$state===oe.Stopped)return Promise.reject(new F.ResponseError(F.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,n,r)}catch(i){throw this.error(`Sending progress for token ${n} failed.`,i),i}}onProgress(e,n,r){this._progressHandlers.set(n,{type:e,handler:r});let i=this.activeConnection(),o,s=this._clientOptions.middleware?.handleWorkDoneProgress,a=F.WorkDoneProgress.is(e)&&s!==void 0?c=>{s(n,c,()=>r(c))}:r;return i!==void 0?(this._progressDisposables.set(n,i.onProgress(e,n,a)),o={dispose:()=>{let c=this._progressDisposables.get(n);c!==void 0&&(c.dispose(),this._progressDisposables.delete(n))}}):(this._pendingProgressHandlers.set(n,{type:e,handler:r}),o={dispose:()=>{this._pendingProgressHandlers.delete(n);let c=this._progressDisposables.get(n);c!==void 0&&(c.dispose(),this._progressDisposables.delete(n))}}),{dispose:()=>{this._progressHandlers.delete(n),o.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new hp(this,e??4)}async setTrace(e){this._trace=e;let n=this.activeConnection();n!==void 0&&await n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof F.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?Vn.string(e.stack)?e.stack:e.message:Vn.string(e)?e:e.toString()}info(e,n,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=ms.Info&&this.showNotificationMessage(F.MessageType.Info,e)}warn(e,n,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=ms.Warn&&this.showNotificationMessage(F.MessageType.Warning,e)}error(e,n,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),(r==="force"||r&&this._clientOptions.revealOutputChannelOn<=ms.Error)&&this.showNotificationMessage(F.MessageType.Error,e)}showNotificationMessage(e,n){n=n??"A request has failed. See the output for more information.",(e===F.MessageType.Error?_e.window.showErrorMessage:e===F.MessageType.Warning?_e.window.showWarningMessage:_e.window.showInformationMessage)(n,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===oe.Initial||this.$state===oe.Stopping||this.$state===oe.Stopped}needsStop(){return this.$state===oe.Starting||this.$state===oe.Running}activeConnection(){return this.$state===oe.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===oe.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===oe.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,n,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?_e.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):_e.languages.createDiagnosticCollection());for(let[i,o]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,o);for(let[i,o]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,o);for(let[i,o]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,o);this.$state=oe.Starting;try{let i=await this.createConnection();i.onNotification(F.LogMessageNotification.type,o=>{switch(o.type){case F.MessageType.Error:this.error(o.message,void 0,!1);break;case F.MessageType.Warning:this.warn(o.message,void 0,!1);break;case F.MessageType.Info:this.info(o.message,void 0,!1);break;default:this.outputChannel.appendLine(o.message)}}),i.onNotification(F.ShowMessageNotification.type,o=>{switch(o.type){case F.MessageType.Error:_e.window.showErrorMessage(o.message);break;case F.MessageType.Warning:_e.window.showWarningMessage(o.message);break;case F.MessageType.Info:_e.window.showInformationMessage(o.message);break;default:_e.window.showInformationMessage(o.message)}}),i.onRequest(F.ShowMessageRequest.type,o=>{let s;switch(o.type){case F.MessageType.Error:s=_e.window.showErrorMessage;break;case F.MessageType.Warning:s=_e.window.showWarningMessage;break;case F.MessageType.Info:s=_e.window.showInformationMessage;break;default:s=_e.window.showInformationMessage}let a=o.actions||[];return s(o.message,...a)}),i.onNotification(F.TelemetryEventNotification.type,o=>{this._telemetryEmitter.fire(o)}),i.onRequest(F.ShowDocumentRequest.type,async o=>{let s=async c=>{let l=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await _e.env.openExternal(l)};{let d={};return c.selection!==void 0&&(d.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?d.preserveFocus=!0:c.takeFocus===!0&&(d.preserveFocus=!1),await _e.window.showTextDocument(l,d),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(o,s):s(o)}),i.listen(),await this.initialize(i),n()}catch(i){this.$state=oe.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,n;return[new Promise((i,o)=>{e=i,n=o}),e,n]}async initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:_e.env.appName,version:_e.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(_e.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Vn.func(n)?n():n,trace:F.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=$y.generateUuid(),a=new Mq.ProgressPart(e,s);o.workDoneToken=s;try{let c=await this.doInitialize(e,o);return a.done(),c}catch(c){throw a.cancel(),c}}else return this.doInitialize(e,o)}async doInitialize(e,n){try{let r=await e.initialize(n);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==F.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=oe.Running;let i;Vn.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===F.TextDocumentSyncKind.None?i={openClose:!1,change:F.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(F.PublishDiagnosticsNotification.type,o=>this.handleDiagnostics(o)),e.onRequest(F.RegistrationRequest.type,o=>this.handleRegistrationRequest(o)),e.onRequest("client/registerFeature",o=>this.handleRegistrationRequest(o)),e.onRequest(F.UnregistrationRequest.type,o=>this.handleUnregistrationRequest(o)),e.onRequest("client/unregisterFeature",o=>this.handleUnregistrationRequest(o)),e.onRequest(F.ApplyWorkspaceEditRequest.type,o=>this.handleApplyWorkspaceEdit(o));for(let[o,s]of this._pendingNotificationHandlers)this._notificationDisposables.set(o,e.onNotification(o,s));this._pendingNotificationHandlers.clear();for(let[o,s]of this._pendingRequestHandlers)this._requestDisposables.set(o,e.onRequest(o,s));this._pendingRequestHandlers.clear();for(let[o,s]of this._pendingProgressHandlers)this._progressDisposables.set(o,e.onProgress(s.type,o,s.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(F.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof F.ResponseError&&r.data&&r.data.retry?_e.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&_e.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=_e.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,n){if(this.$state===oe.Stopped||this.$state===oe.Initial)return;if(this.$state===oe.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==oe.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=oe.Stopping,this.cleanUp(e);let i=new Promise(s=>{(0,F.RAL)().timer.setTimeout(s,n)}),o=(async s=>(await s.shutdown(),await s.exit(),s))(r);return this._onStop=Promise.race([i,o]).then(s=>{if(s!==void 0)s.end(),s.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},s=>{throw this.error("Stopping server failed",s,!1),s}).finally(()=>{this.$state=oe.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let n=this._listeners.splice(0,this._listeners.length);for(let r of n)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let n=this;async function r(o){return n._fileEvents.push(o),n._fileEventDelayer.trigger(async()=>{await n.sendNotification(F.DidChangeWatchedFilesNotification.type,{changes:n._fileEvents}),n._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=>{n.error("Notify file events failed.",o)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let n=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(n.length===0)return;for(let r of n){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(r);await e.sendNotification(F.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(r,F.DidChangeTextDocumentNotification.type,i)}}catch(n){throw this.error("Sending pending changes failed",n,!1),n}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let n=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===n&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,F.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[n,r]=e.value;this._diagnosticQueue.delete(n);let i=new _e.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:n,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(o=>{if(!i.token.isCancellationRequested){let s=this._p2c.asUri(n),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(s,o,(c,l)=>this.setDiagnostics(c,l)):this.setDiagnostics(s,o)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,n){!this._diagnostics||this._diagnostics.set(e,n)}getLocale(){return _e.env.language}async $start(){if(this.$state===oe.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,o,s)=>{this.handleConnectionError(i,o,s).catch(a=>this.error("Handling connection error failed",a))},n=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=px(r.reader,r.writer,e,n,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===oe.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:hi.DoNotRestart};if(this.$state!==oe.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===hi.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===oe.Starting?this.$state=oe.StartFailed:this.$state=oe.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===hi.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=oe.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(n=>this.error("Restarting server failed",n,"force")))}async handleConnectionError(e,n,r){let i=await this._clientOptions.errorHandler.error(e,n,r);i.action===fc.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(o=>{this.error("Stopping server failed",o,!1)}))}hookConfigurationChanged(e){this._listeners.push(_e.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,n=!1){let r=_e.workspace.getConfiguration(this._id),i=F.Trace.Off,o=F.TraceFormat.Text;if(r){let s=r.get("trace.server","off");typeof s=="string"?i=F.Trace.fromString(s):(i=F.Trace.fromString(r.get("trace.server.verbosity","off")),o=F.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat}).catch(s=>{this.error("Updating trace failed with error",s,!1)})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let r;Vn.array(n)?r=n:r=[n],r&&this._dynamicFeatures.get(F.DidChangeWatchedFilesNotification.type.method).registerRaw($y.generateUuid(),r)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),xn.DynamicFeature.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let n=this.getFeature(F.NotebookDocumentSyncRegistrationType.method);return n===void 0||!(n instanceof Wy.NotebookDocumentSyncFeature)?!1:n.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new zy.ConfigurationFeature(this)),this.registerFeature(new oo.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new oo.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new oo.WillSaveFeature(this)),this.registerFeature(new oo.WillSaveWaitUntilFeature(this)),this.registerFeature(new oo.DidSaveTextDocumentFeature(this)),this.registerFeature(new oo.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new Yq.FileSystemWatcherFeature(this,n=>this.notifyFileEvent(n))),this.registerFeature(new Aq.CompletionItemFeature(this)),this.registerFeature(new jq.HoverFeature(this)),this.registerFeature(new $q.SignatureHelpFeature(this)),this.registerFeature(new Hq.DefinitionFeature(this)),this.registerFeature(new Uq.ReferencesFeature(this)),this.registerFeature(new Wq.DocumentHighlightFeature(this)),this.registerFeature(new zq.DocumentSymbolFeature(this)),this.registerFeature(new Kq.WorkspaceSymbolFeature(this)),this.registerFeature(new Bq.CodeActionFeature(this)),this.registerFeature(new Gq.CodeLensFeature(this)),this.registerFeature(new fp.DocumentFormattingFeature(this)),this.registerFeature(new fp.DocumentRangeFormattingFeature(this)),this.registerFeature(new fp.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new Vq.RenameFeature(this)),this.registerFeature(new Xq.DocumentLinkFeature(this)),this.registerFeature(new Jq.ExecuteCommandFeature(this)),this.registerFeature(new zy.SyncConfigurationFeature(this)),this.registerFeature(new ex.TypeDefinitionFeature(this)),this.registerFeature(new Zq.ImplementationFeature(this)),this.registerFeature(new Qq.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new tx.WorkspaceFoldersFeature(this)),this.registerFeature(new nx.FoldingRangeFeature(this)),this.registerFeature(new rx.DeclarationFeature(this)),this.registerFeature(new ix.SelectionRangeFeature(this)),this.registerFeature(new ox.ProgressFeature(this)),this.registerFeature(new sx.CallHierarchyFeature(this)),this.registerFeature(new ax.SemanticTokensFeature(this)),this.registerFeature(new cx.LinkedEditingFeature(this)),this.registerFeature(new so.DidCreateFilesFeature(this)),this.registerFeature(new so.DidRenameFilesFeature(this)),this.registerFeature(new so.DidDeleteFilesFeature(this)),this.registerFeature(new so.WillCreateFilesFeature(this)),this.registerFeature(new so.WillRenameFilesFeature(this)),this.registerFeature(new so.WillDeleteFilesFeature(this)),this.registerFeature(new ux.TypeHierarchyFeature(this)),this.registerFeature(new lx.InlineValueFeature(this)),this.registerFeature(new dx.InlayHintsFeature(this)),this.registerFeature(new Lq.DiagnosticFeature(this)),this.registerFeature(new Wy.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Ky.createAll(this))}fillInitializeParams(e){for(let n of this._features)Vn.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,xn.ensure)(e,"workspace").applyEdit=!0;let n=(0,xn.ensure)((0,xn.ensure)(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[F.ResourceOperationKind.Create,F.ResourceOperationKind.Rename,F.ResourceOperationKind.Delete],n.failureHandling=F.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,xn.ensure)((0,xn.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[F.DiagnosticTag.Unnecessary,F.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,xn.ensure)(e,"window"),o=(0,xn.ensure)(i,"showMessage");o.messageActionItem={additionalPropertiesSupport:!0};let s=(0,xn.ensure)(i,"showDocument");s.support=!0;let a=(0,xn.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(pr.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let r of this._features)Vn.func(r.preInitialize)&&r.preInitialize(this._capabilities,n);for(let r of this._features)r.initialize(this._capabilities,n)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let n of e.registrations)this._ignoredRegistrations.add(n.id);return}for(let n of e.registrations){let r=this._dynamicFeatures.get(n.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Registration failed.`));let i=n.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let o={id:n.id,registerOptions:i};try{r.register(o)}catch(s){return Promise.reject(s)}}}async handleUnregistrationRequest(e){for(let n of e.unregisterations){if(this._ignoredRegistrations.has(n.id))continue;let r=this._dynamicFeatures.get(n.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Unregistration failed.`));r.unregister(n.id)}}async handleApplyWorkspaceEdit(e){let n=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(n)),i=new Map;_e.workspace.textDocuments.forEach(s=>i.set(s.uri.toString(),s));let o=!1;if(n.documentChanges){for(let s of n.documentChanges)if(F.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let a=this._p2c.asUri(s.textDocument.uri).toString(),c=i.get(a);if(c&&c.version!==s.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):Vn.asPromise(_e.workspace.applyEdit(r).then(s=>({applied:s})))}handleFailedRequest(e,n,r,i,o=!0){if(r instanceof F.ResponseError){if(r.code===F.ErrorCodes.PendingResponseRejected||r.code===F.ErrorCodes.ConnectionInactive)return i;if(r.code===F.LSPErrorCodes.RequestCancelled||r.code===F.LSPErrorCodes.ServerCancelled){if(n!==void 0&&n.isCancellationRequested)return i;throw r.data!==void 0?new xn.LSPCancellationError(r.data):new _e.CancellationError}else if(r.code===F.LSPErrorCodes.ContentModified){if(pr.RequestsToCancelOnContentModified.has(e.method)||pr.CancellableResolveCalls.has(e.method))throw new _e.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};Oe.BaseLanguageClient=pr;pr.RequestsToCancelOnContentModified=new Set([F.SemanticTokensRequest.method,F.SemanticTokensRangeRequest.method,F.SemanticTokensDeltaRequest.method]);pr.CancellableResolveCalls=new Set([F.CompletionResolveRequest.method,F.CodeLensResolveRequest.method,F.CodeActionResolveRequest.method,F.InlayHintResolveRequest.method,F.DocumentLinkResolveRequest.method,F.WorkspaceSymbolResolveRequest.method]);var pp=class{error(e){(0,F.RAL)().console.error(e)}warn(e){(0,F.RAL)().console.warn(e)}info(e){(0,F.RAL)().console.info(e)}log(e){(0,F.RAL)().console.log(e)}};function px(t,e,n,r,i){let o=new pp,s=(0,F.createProtocolConnection)(t,e,o,i);return s.onError(c=>{n(c[0],c[1],c[2])}),s.onClose(r),{listen:()=>s.listen(),sendRequest:s.sendRequest,onRequest:s.onRequest,hasPendingResponse:s.hasPendingResponse,sendNotification:s.sendNotification,onNotification:s.onNotification,onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(c,l,d)=>{let p={sendNotification:!1,traceFormat:F.TraceFormat.Text};return d===void 0?s.trace(c,l,p):(Vn.boolean(d),s.trace(c,l,d))},initialize:c=>s.sendRequest(F.InitializeRequest.type,c),shutdown:()=>s.sendRequest(F.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(F.ExitNotification.type),end:()=>s.end(),dispose:()=>s.dispose()}}var Ky;(function(t){function e(n){return[]}t.createAll=e})(Ky=Oe.ProposedFeatures||(Oe.ProposedFeatures={}))});var By=w(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.terminate=void 0;var Uy=require("child_process"),gx=require("path"),mx=process.platform==="win32",vx=process.platform==="darwin",yx=process.platform==="linux";function Cx(t,e){if(mx)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),Uy.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(yx||vx)try{var n=(0,gx.join)(__dirname,"terminateProcess.sh"),r=Uy.spawnSync(n,[t.pid.toString()]);return!r.error}catch{return!1}else return t.kill("SIGKILL"),!0}hc.terminate=Cx});var vs=w((GI,Gy)=>{"use strict";Gy.exports=j()});var ys=w((VI,Vy)=>{var _x=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Vy.exports=_x});var Cs=w((XI,Xy)=>{var wx="2.0.0",bx=Number.MAX_SAFE_INTEGER||9007199254740991,Dx=16,Rx=256-6,Sx=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Xy.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Dx,MAX_SAFE_BUILD_LENGTH:Rx,MAX_SAFE_INTEGER:bx,RELEASE_TYPES:Sx,SEMVER_SPEC_VERSION:wx,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ao=w((gr,Jy)=>{var{MAX_SAFE_COMPONENT_LENGTH:mp,MAX_SAFE_BUILD_LENGTH:Tx,MAX_LENGTH:Px}=Cs(),qx=ys();gr=Jy.exports={};var xx=gr.re=[],kx=gr.safeRe=[],H=gr.src=[],$=gr.t={},Ex=0,vp="[a-zA-Z0-9-]",Fx=[["\\s",1],["\\d",Px],[vp,Tx]],Ox=t=>{for(let[e,n]of Fx)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},ee=(t,e,n)=>{let r=Ox(e),i=Ex++;qx(t,i,e),$[t]=i,H[i]=e,xx[i]=new RegExp(e,n?"g":void 0),kx[i]=new RegExp(r,n?"g":void 0)};ee("NUMERICIDENTIFIER","0|[1-9]\\d*");ee("NUMERICIDENTIFIERLOOSE","\\d+");ee("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${vp}*`);ee("MAINVERSION",`(${H[$.NUMERICIDENTIFIER]})\\.(${H[$.NUMERICIDENTIFIER]})\\.(${H[$.NUMERICIDENTIFIER]})`);ee("MAINVERSIONLOOSE",`(${H[$.NUMERICIDENTIFIERLOOSE]})\\.(${H[$.NUMERICIDENTIFIERLOOSE]})\\.(${H[$.NUMERICIDENTIFIERLOOSE]})`);ee("PRERELEASEIDENTIFIER",`(?:${H[$.NUMERICIDENTIFIER]}|${H[$.NONNUMERICIDENTIFIER]})`);ee("PRERELEASEIDENTIFIERLOOSE",`(?:${H[$.NUMERICIDENTIFIERLOOSE]}|${H[$.NONNUMERICIDENTIFIER]})`);ee("PRERELEASE",`(?:-(${H[$.PRERELEASEIDENTIFIER]}(?:\\.${H[$.PRERELEASEIDENTIFIER]})*))`);ee("PRERELEASELOOSE",`(?:-?(${H[$.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${H[$.PRERELEASEIDENTIFIERLOOSE]})*))`);ee("BUILDIDENTIFIER",`${vp}+`);ee("BUILD",`(?:\\+(${H[$.BUILDIDENTIFIER]}(?:\\.${H[$.BUILDIDENTIFIER]})*))`);ee("FULLPLAIN",`v?${H[$.MAINVERSION]}${H[$.PRERELEASE]}?${H[$.BUILD]}?`);ee("FULL",`^${H[$.FULLPLAIN]}$`);ee("LOOSEPLAIN",`[v=\\s]*${H[$.MAINVERSIONLOOSE]}${H[$.PRERELEASELOOSE]}?${H[$.BUILD]}?`);ee("LOOSE",`^${H[$.LOOSEPLAIN]}$`);ee("GTLT","((?:<|>)?=?)");ee("XRANGEIDENTIFIERLOOSE",`${H[$.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ee("XRANGEIDENTIFIER",`${H[$.NUMERICIDENTIFIER]}|x|X|\\*`);ee("XRANGEPLAIN",`[v=\\s]*(${H[$.XRANGEIDENTIFIER]})(?:\\.(${H[$.XRANGEIDENTIFIER]})(?:\\.(${H[$.XRANGEIDENTIFIER]})(?:${H[$.PRERELEASE]})?${H[$.BUILD]}?)?)?`);ee("XRANGEPLAINLOOSE",`[v=\\s]*(${H[$.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H[$.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H[$.XRANGEIDENTIFIERLOOSE]})(?:${H[$.PRERELEASELOOSE]})?${H[$.BUILD]}?)?)?`);ee("XRANGE",`^${H[$.GTLT]}\\s*${H[$.XRANGEPLAIN]}$`);ee("XRANGELOOSE",`^${H[$.GTLT]}\\s*${H[$.XRANGEPLAINLOOSE]}$`);ee("COERCE",`(^|[^\\d])(\\d{1,${mp}})(?:\\.(\\d{1,${mp}}))?(?:\\.(\\d{1,${mp}}))?(?:$|[^\\d])`);ee("COERCERTL",H[$.COERCE],!0);ee("LONETILDE","(?:~>?)");ee("TILDETRIM",`(\\s*)${H[$.LONETILDE]}\\s+`,!0);gr.tildeTrimReplace="$1~";ee("TILDE",`^${H[$.LONETILDE]}${H[$.XRANGEPLAIN]}$`);ee("TILDELOOSE",`^${H[$.LONETILDE]}${H[$.XRANGEPLAINLOOSE]}$`);ee("LONECARET","(?:\\^)");ee("CARETTRIM",`(\\s*)${H[$.LONECARET]}\\s+`,!0);gr.caretTrimReplace="$1^";ee("CARET",`^${H[$.LONECARET]}${H[$.XRANGEPLAIN]}$`);ee("CARETLOOSE",`^${H[$.LONECARET]}${H[$.XRANGEPLAINLOOSE]}$`);ee("COMPARATORLOOSE",`^${H[$.GTLT]}\\s*(${H[$.LOOSEPLAIN]})$|^$`);ee("COMPARATOR",`^${H[$.GTLT]}\\s*(${H[$.FULLPLAIN]})$|^$`);ee("COMPARATORTRIM",`(\\s*)${H[$.GTLT]}\\s*(${H[$.LOOSEPLAIN]}|${H[$.XRANGEPLAIN]})`,!0);gr.comparatorTrimReplace="$1$2$3";ee("HYPHENRANGE",`^\\s*(${H[$.XRANGEPLAIN]})\\s+-\\s+(${H[$.XRANGEPLAIN]})\\s*$`);ee("HYPHENRANGELOOSE",`^\\s*(${H[$.XRANGEPLAINLOOSE]})\\s+-\\s+(${H[$.XRANGEPLAINLOOSE]})\\s*$`);ee("STAR","(<|>)?=?\\s*\\*");ee("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ee("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var pc=w((JI,Yy)=>{var Nx=Object.freeze({loose:!0}),Ix=Object.freeze({}),Mx=t=>t?typeof t!="object"?Nx:t:Ix;Yy.exports=Mx});var yp=w((YI,eC)=>{var Qy=/^[0-9]+$/,Zy=(t,e)=>{let n=Qy.test(t),r=Qy.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},Lx=(t,e)=>Zy(e,t);eC.exports={compareIdentifiers:Zy,rcompareIdentifiers:Lx}});var yt=w((QI,iC)=>{var gc=ys(),{MAX_LENGTH:tC,MAX_SAFE_INTEGER:mc}=Cs(),{safeRe:nC,t:rC}=ao(),Ax=pc(),{compareIdentifiers:co}=yp(),Vt=class{constructor(e,n){if(n=Ax(n),e instanceof Vt){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>tC)throw new TypeError(`version is longer than ${tC} characters`);gc("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?nC[rC.LOOSE]:nC[rC.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>mc||this.major<0)throw new TypeError("Invalid major version");if(this.minor>mc||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>mc||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<mc)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(gc("SemVer.compare",this.version,this.options,e),!(e instanceof Vt)){if(typeof e=="string"&&e===this.version)return 0;e=new Vt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Vt||(e=new Vt(e,this.options)),co(this.major,e.major)||co(this.minor,e.minor)||co(this.patch,e.patch)}comparePre(e){if(e instanceof Vt||(e=new Vt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(gc("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return co(r,i)}while(++n)}compareBuild(e){e instanceof Vt||(e=new Vt(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(gc("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return co(r,i)}while(++n)}inc(e,n,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),co(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};iC.exports=Vt});var Or=w((ZI,sC)=>{var oC=yt(),jx=(t,e,n=!1)=>{if(t instanceof oC)return t;try{return new oC(t,e)}catch(r){if(!n)return null;throw r}};sC.exports=jx});var cC=w((eM,aC)=>{"use strict";aC.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var lC=w((tM,uC)=>{"use strict";uC.exports=pe;pe.Node=pi;pe.create=pe;function pe(t){var e=this;if(e instanceof pe||(e=new pe),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}pe.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};pe.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};pe.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};pe.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)$x(this,arguments[t]);return this.length};pe.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Wx(this,arguments[t]);return this.length};pe.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};pe.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};pe.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};pe.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};pe.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};pe.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};pe.prototype.map=function(t,e){e=e||this;for(var n=new pe,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};pe.prototype.mapReverse=function(t,e){e=e||this;for(var n=new pe,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};pe.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};pe.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};pe.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};pe.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};pe.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new pe;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};pe.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new pe;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};pe.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var o=[],r=0;i&&r<e;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Hx(this,i,n[r]);return o};pe.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function Hx(t,e,n){var r=e===t.head?new pi(n,null,e,t):new pi(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function $x(t,e){t.tail=new pi(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Wx(t,e){t.head=new pi(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function pi(t,e,n,r){if(!(this instanceof pi))return new pi(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{cC()(pe)}catch{}});var gC=w((nM,pC)=>{"use strict";var zx=lC(),gi=Symbol("max"),vr=Symbol("length"),uo=Symbol("lengthCalculator"),ws=Symbol("allowStale"),mi=Symbol("maxAge"),mr=Symbol("dispose"),dC=Symbol("noDisposeOnSet"),ot=Symbol("lruList"),kn=Symbol("cache"),hC=Symbol("updateAgeOnGet"),Cp=()=>1,wp=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let n=this[gi]=e.max||1/0,r=e.length||Cp;if(this[uo]=typeof r!="function"?Cp:r,this[ws]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[mi]=e.maxAge||0,this[mr]=e.dispose,this[dC]=e.noDisposeOnSet||!1,this[hC]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[gi]=e||1/0,_s(this)}get max(){return this[gi]}set allowStale(e){this[ws]=!!e}get allowStale(){return this[ws]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[mi]=e,_s(this)}get maxAge(){return this[mi]}set lengthCalculator(e){typeof e!="function"&&(e=Cp),e!==this[uo]&&(this[uo]=e,this[vr]=0,this[ot].forEach(n=>{n.length=this[uo](n.value,n.key),this[vr]+=n.length})),_s(this)}get lengthCalculator(){return this[uo]}get length(){return this[vr]}get itemCount(){return this[ot].length}rforEach(e,n){n=n||this;for(let r=this[ot].tail;r!==null;){let i=r.prev;fC(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[ot].head;r!==null;){let i=r.next;fC(this,e,r,n),r=i}}keys(){return this[ot].toArray().map(e=>e.key)}values(){return this[ot].toArray().map(e=>e.value)}reset(){this[mr]&&this[ot]&&this[ot].length&&this[ot].forEach(e=>this[mr](e.key,e.value)),this[kn]=new Map,this[ot]=new zx,this[vr]=0}dump(){return this[ot].map(e=>vc(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[ot]}set(e,n,r){if(r=r||this[mi],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[uo](n,e);if(this[kn].has(e)){if(o>this[gi])return lo(this,this[kn].get(e)),!1;let c=this[kn].get(e).value;return this[mr]&&(this[dC]||this[mr](e,c.value)),c.now=i,c.maxAge=r,c.value=n,this[vr]+=o-c.length,c.length=o,this.get(e),_s(this),!0}let s=new bp(e,n,o,i,r);return s.length>this[gi]?(this[mr]&&this[mr](e,n),!1):(this[vr]+=s.length,this[ot].unshift(s),this[kn].set(e,this[ot].head),_s(this),!0)}has(e){if(!this[kn].has(e))return!1;let n=this[kn].get(e).value;return!vc(this,n)}get(e){return _p(this,e,!0)}peek(e){return _p(this,e,!1)}pop(){let e=this[ot].tail;return e?(lo(this,e),e.value):null}del(e){lo(this,this[kn].get(e))}load(e){this.reset();let n=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[kn].forEach((e,n)=>_p(this,n,!1))}},_p=(t,e,n)=>{let r=t[kn].get(e);if(r){let i=r.value;if(vc(t,i)){if(lo(t,r),!t[ws])return}else n&&(t[hC]&&(r.value.now=Date.now()),t[ot].unshiftNode(r));return i.value}},vc=(t,e)=>{if(!e||!e.maxAge&&!t[mi])return!1;let n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[mi]&&n>t[mi]},_s=t=>{if(t[vr]>t[gi])for(let e=t[ot].tail;t[vr]>t[gi]&&e!==null;){let n=e.prev;lo(t,e),e=n}},lo=(t,e)=>{if(e){let n=e.value;t[mr]&&t[mr](n.key,n.value),t[vr]-=n.length,t[kn].delete(n.key),t[ot].removeNode(e)}},bp=class{constructor(e,n,r,i,o){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}},fC=(t,e,n,r)=>{let i=n.value;vc(t,i)&&(lo(t,n),t[ws]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};pC.exports=wp});var cn=w((rM,vC)=>{var mC=yt(),Kx=(t,e,n)=>new mC(t,n).compare(new mC(e,n));vC.exports=Kx});var Dp=w((iM,yC)=>{var Ux=cn(),Bx=(t,e,n)=>Ux(t,e,n)===0;yC.exports=Bx});var Rp=w((oM,CC)=>{var Gx=cn(),Vx=(t,e,n)=>Gx(t,e,n)!==0;CC.exports=Vx});var bs=w((sM,_C)=>{var Xx=cn(),Jx=(t,e,n)=>Xx(t,e,n)>0;_C.exports=Jx});var yc=w((aM,wC)=>{var Yx=cn(),Qx=(t,e,n)=>Yx(t,e,n)>=0;wC.exports=Qx});var Cc=w((cM,bC)=>{var Zx=cn(),ek=(t,e,n)=>Zx(t,e,n)<0;bC.exports=ek});var _c=w((uM,DC)=>{var tk=cn(),nk=(t,e,n)=>tk(t,e,n)<=0;DC.exports=nk});var Sp=w((lM,RC)=>{var rk=Dp(),ik=Rp(),ok=bs(),sk=yc(),ak=Cc(),ck=_c(),uk=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return rk(t,n,r);case"!=":return ik(t,n,r);case">":return ok(t,n,r);case">=":return sk(t,n,r);case"<":return ak(t,n,r);case"<=":return ck(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};RC.exports=uk});var Rs=w((dM,kC)=>{var Ds=Symbol("SemVer ANY"),fo=class{static get ANY(){return Ds}constructor(e,n){if(n=SC(n),e instanceof fo){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Pp("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===Ds?this.value="":this.value=this.operator+this.semver.version,Pp("comp",this)}parse(e){let n=this.options.loose?TC[PC.COMPARATORLOOSE]:TC[PC.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new qC(r[2],this.options.loose):this.semver=Ds}toString(){return this.value}test(e){if(Pp("Comparator.test",e,this.options.loose),this.semver===Ds||e===Ds)return!0;if(typeof e=="string")try{e=new qC(e,this.options)}catch{return!1}return Tp(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof fo))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new xC(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new xC(this.value,n).test(e.semver):(n=SC(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Tp(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Tp(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};kC.exports=fo;var SC=pc(),{safeRe:TC,t:PC}=ao(),Tp=Sp(),Pp=ys(),qC=yt(),xC=un()});var un=w((fM,NC)=>{var vi=class{constructor(e,n){if(n=dk(n),e instanceof vi)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new vi(e.raw,n);if(e instanceof qp)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!FC(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&yk(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&mk)|(this.options.loose&&vk))+":"+e,i=EC.get(r);if(i)return i;let o=this.options.loose,s=o?Mt[Tt.HYPHENRANGELOOSE]:Mt[Tt.HYPHENRANGE];e=e.replace(s,qk(this.options.includePrerelease)),Ne("hyphen replace",e),e=e.replace(Mt[Tt.COMPARATORTRIM],hk),Ne("comparator trim",e),e=e.replace(Mt[Tt.TILDETRIM],pk),Ne("tilde trim",e),e=e.replace(Mt[Tt.CARETTRIM],gk),Ne("caret trim",e);let a=e.split(" ").map(p=>Ck(p,this.options)).join(" ").split(/\s+/).map(p=>Pk(p,this.options));o&&(a=a.filter(p=>(Ne("loose invalid filter",p,this.options),!!p.match(Mt[Tt.COMPARATORLOOSE])))),Ne("range list",a);let c=new Map,l=a.map(p=>new qp(p,this.options));for(let p of l){if(FC(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return EC.set(r,d),d}intersects(e,n){if(!(e instanceof vi))throw new TypeError("a Range is required");return this.set.some(r=>OC(r,n)&&e.set.some(i=>OC(i,n)&&r.every(o=>i.every(s=>o.intersects(s,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new fk(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(xk(this.set[n],e,this.options))return!0;return!1}};NC.exports=vi;var lk=gC(),EC=new lk({max:1e3}),dk=pc(),qp=Rs(),Ne=ys(),fk=yt(),{safeRe:Mt,t:Tt,comparatorTrimReplace:hk,tildeTrimReplace:pk,caretTrimReplace:gk}=ao(),{FLAG_INCLUDE_PRERELEASE:mk,FLAG_LOOSE:vk}=Cs(),FC=t=>t.value==="<0.0.0-0",yk=t=>t.value==="",OC=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(o=>i.intersects(o,e)),i=r.pop();return n},Ck=(t,e)=>(Ne("comp",t,e),t=bk(t,e),Ne("caret",t),t=_k(t,e),Ne("tildes",t),t=Rk(t,e),Ne("xrange",t),t=Tk(t,e),Ne("stars",t),t),Pt=t=>!t||t.toLowerCase()==="x"||t==="*",_k=(t,e)=>t.trim().split(/\s+/).map(n=>wk(n,e)).join(" "),wk=(t,e)=>{let n=e.loose?Mt[Tt.TILDELOOSE]:Mt[Tt.TILDE];return t.replace(n,(r,i,o,s,a)=>{Ne("tilde",t,r,i,o,s,a);let c;return Pt(i)?c="":Pt(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Pt(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Ne("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Ne("tilde return",c),c})},bk=(t,e)=>t.trim().split(/\s+/).map(n=>Dk(n,e)).join(" "),Dk=(t,e)=>{Ne("caret",t,e);let n=e.loose?Mt[Tt.CARETLOOSE]:Mt[Tt.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,o,s,a,c)=>{Ne("caret",t,i,o,s,a,c);let l;return Pt(o)?l="":Pt(s)?l=`>=${o}.0.0${r} <${+o+1}.0.0-0`:Pt(a)?o==="0"?l=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:c?(Ne("replaceCaret pr",c),o==="0"?s==="0"?l=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Ne("no pr"),o==="0"?s==="0"?l=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Ne("caret return",l),l})},Rk=(t,e)=>(Ne("replaceXRanges",t,e),t.split(/\s+/).map(n=>Sk(n,e)).join(" ")),Sk=(t,e)=>{t=t.trim();let n=e.loose?Mt[Tt.XRANGELOOSE]:Mt[Tt.XRANGE];return t.replace(n,(r,i,o,s,a,c)=>{Ne("xRange",t,r,i,o,s,a,c);let l=Pt(o),d=l||Pt(s),p=d||Pt(a),f=p;return i==="="&&f&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&f?(d&&(s=0),a=0,i===">"?(i=">=",d?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",d?o=+o+1:s=+s+1),i==="<"&&(c="-0"),r=`${i+o}.${s}.${a}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:p&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Ne("xRange return",r),r})},Tk=(t,e)=>(Ne("replaceStars",t,e),t.trim().replace(Mt[Tt.STAR],"")),Pk=(t,e)=>(Ne("replaceGTE0",t,e),t.trim().replace(Mt[e.includePrerelease?Tt.GTE0PRE:Tt.GTE0],"")),qk=t=>(e,n,r,i,o,s,a,c,l,d,p,f,g)=>(Pt(r)?n="":Pt(i)?n=`>=${r}.0.0${t?"-0":""}`:Pt(o)?n=`>=${r}.${i}.0${t?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Pt(l)?c="":Pt(d)?c=`<${+l+1}.0.0-0`:Pt(p)?c=`<${l}.${+d+1}.0-0`:f?c=`<=${l}.${d}.${p}-${f}`:t?c=`<${l}.${d}.${+p+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),xk=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Ne(t[r].semver),t[r].semver!==qp.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ho=w((hM,IC)=>{var kk=un(),Ek=(t,e,n)=>{try{e=new kk(e,n)}catch{return!1}return e.test(t)};IC.exports=Ek});var LC=w(Xt=>{"use strict";var Fk=Xt&&Xt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),xp=Xt&&Xt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Fk(e,t,n)};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DiagnosticPullMode=Xt.vsdiag=void 0;xp(j(),Xt);xp(fe(),Xt);var MC=Af();Object.defineProperty(Xt,"vsdiag",{enumerable:!0,get:function(){return MC.vsdiag}});Object.defineProperty(Xt,"DiagnosticPullMode",{enumerable:!0,get:function(){return MC.DiagnosticPullMode}});xp(gp(),Xt)});var Ap=w(qt=>{"use strict";var Ok=qt&&qt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),HC=qt&&qt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ok(e,t,n)};Object.defineProperty(qt,"__esModule",{value:!0});qt.SettingMonitor=qt.LanguageClient=qt.TransportKind=void 0;var yr=require("child_process"),kp=require("fs"),Ep=require("path"),Ir=require("vscode"),Ie=tn(),AC=gp(),Nk=By(),ze=vs(),Ik=Or(),Mk=ho();HC(vs(),qt);HC(LC(),qt);var jC="^1.67.0",Ge;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Ge=qt.TransportKind||(qt.TransportKind={}));var Nr;(function(t){function e(n){let r=n;return r&&r.kind===Ge.socket&&Ie.number(r.port)}t.isSocket=e})(Nr||(Nr={}));var Fp;(function(t){function e(n){return Ie.string(n.command)}t.is=e})(Fp||(Fp={}));var Op;(function(t){function e(n){return Ie.string(n.module)}t.is=e})(Op||(Op={}));var Np;(function(t){function e(n){let r=n;return r&&r.writer!==void 0&&r.reader!==void 0}t.is=e})(Np||(Np={}));var Ip;(function(t){function e(n){let r=n;return r&&r.process!==void 0&&typeof r.detached=="boolean"}t.is=e})(Ip||(Ip={}));var Mp=class extends AC.BaseLanguageClient{constructor(e,n,r,i,o){let s,a,c,l,d;Ie.string(n)?(s=e,a=n,c=r,l=i,d=!!o):(s=e.toLowerCase(),a=e,c=n,l=r,d=i),d===void 0&&(d=!1),super(s,a,l),this._serverOptions=c,this._forceDebug=d,this._isInDebugMode=d;try{this.checkVersion()}catch(p){throw Ie.string(p.message)&&this.outputChannel.appendLine(p.message),p}}checkVersion(){let e=Ik(Ir.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Ir.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!Mk(e,jC))throw new Error(`The language client requires VS Code version ${jC} but received version ${Ir.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let n=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(n),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,Nk.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(d,p){if(!d&&!p)return;let f=Object.create(null);return Object.keys(process.env).forEach(g=>f[g]=process.env[g]),p&&(f.ELECTRON_RUN_AS_NODE="1",f.ELECTRON_NO_ASAR="1"),d&&Object.keys(d).forEach(g=>f[g]=d[g]),f}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(){let d=process.execArgv;return d?d.some(p=>r.some(f=>p.startsWith(f))||i.some(f=>p===f)):!1}function s(d){if(d.stdin===null||d.stdout===null||d.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Ie.func(a))return a().then(d=>{if(AC.MessageTransports.is(d))return this._isDetached=!!d.detached,d;if(Np.is(d))return this._isDetached=!!d.detached,{reader:new ze.StreamMessageReader(d.reader),writer:new ze.StreamMessageWriter(d.writer)};{let p;return Ip.is(d)?(p=d.process,this._isDetached=d.detached):(p=d,this._isDetached=!1),p.stderr.on("data",f=>this.outputChannel.append(Ie.string(f)?f:f.toString(e))),{reader:new ze.StreamMessageReader(p.stdout),writer:new ze.StreamMessageWriter(p.stdin)}}});let c,l=a;return l.run||l.debug?this._forceDebug||o()?(c=l.debug,this._isInDebugMode=!0):(c=l.run,this._isInDebugMode=!1):c=a,this._getServerWorkingDir(c.options).then(d=>{if(Op.is(c)&&c.module){let p=c,f=p.transport||Ge.stdio;if(p.runtime){let g=[],m=p.options??Object.create(null);m.execArgv&&m.execArgv.forEach(y=>g.push(y)),g.push(p.module),p.args&&p.args.forEach(y=>g.push(y));let b=Object.create(null);b.cwd=d,b.env=n(m.env,!1);let R=this._getRuntimePath(p.runtime,d),q;if(f===Ge.ipc?(b.stdio=[null,null,null,"ipc"],g.push("--node-ipc")):f===Ge.stdio?g.push("--stdio"):f===Ge.pipe?(q=(0,ze.generateRandomPipeName)(),g.push(`--pipe=${q}`)):Nr.isSocket(f)&&g.push(`--socket=${f.port}`),g.push(`--clientProcessId=${process.pid.toString()}`),f===Ge.ipc||f===Ge.stdio){let y=yr.spawn(R,g,b);return!y||!y.pid?po(y,`Launching server using runtime ${R} failed.`):(this._serverProcess=y,y.stderr.on("data",C=>this.outputChannel.append(Ie.string(C)?C:C.toString(e))),f===Ge.ipc?(y.stdout.on("data",C=>this.outputChannel.append(Ie.string(C)?C:C.toString(e))),Promise.resolve({reader:new ze.IPCMessageReader(y),writer:new ze.IPCMessageWriter(y)})):Promise.resolve({reader:new ze.StreamMessageReader(y.stdout),writer:new ze.StreamMessageWriter(y.stdin)}))}else{if(f===Ge.pipe)return(0,ze.createClientPipeTransport)(q).then(y=>{let C=yr.spawn(R,g,b);return!C||!C.pid?po(C,`Launching server using runtime ${R} failed.`):(this._serverProcess=C,C.stderr.on("data",T=>this.outputChannel.append(Ie.string(T)?T:T.toString(e))),C.stdout.on("data",T=>this.outputChannel.append(Ie.string(T)?T:T.toString(e))),y.onConnected().then(T=>({reader:T[0],writer:T[1]})))});if(Nr.isSocket(f))return(0,ze.createClientSocketTransport)(f.port).then(y=>{let C=yr.spawn(R,g,b);return!C||!C.pid?po(C,`Launching server using runtime ${R} failed.`):(this._serverProcess=C,C.stderr.on("data",T=>this.outputChannel.append(Ie.string(T)?T:T.toString(e))),C.stdout.on("data",T=>this.outputChannel.append(Ie.string(T)?T:T.toString(e))),y.onConnected().then(T=>({reader:T[0],writer:T[1]})))})}}else{let g;return new Promise((m,b)=>{let R=(p.args&&p.args.slice())??[];f===Ge.ipc?R.push("--node-ipc"):f===Ge.stdio?R.push("--stdio"):f===Ge.pipe?(g=(0,ze.generateRandomPipeName)(),R.push(`--pipe=${g}`)):Nr.isSocket(f)&&R.push(`--socket=${f.port}`),R.push(`--clientProcessId=${process.pid.toString()}`);let q=p.options??Object.create(null);if(q.env=n(q.env,!0),q.execArgv=q.execArgv||[],q.cwd=d,q.silent=!0,f===Ge.ipc||f===Ge.stdio){let y=yr.fork(p.module,R||[],q);s(y),this._serverProcess=y,y.stderr.on("data",C=>this.outputChannel.append(Ie.string(C)?C:C.toString(e))),f===Ge.ipc?(y.stdout.on("data",C=>this.outputChannel.append(Ie.string(C)?C:C.toString(e))),m({reader:new ze.IPCMessageReader(this._serverProcess),writer:new ze.IPCMessageWriter(this._serverProcess)})):m({reader:new ze.StreamMessageReader(y.stdout),writer:new ze.StreamMessageWriter(y.stdin)})}else f===Ge.pipe?(0,ze.createClientPipeTransport)(g).then(y=>{let C=yr.fork(p.module,R||[],q);s(C),this._serverProcess=C,C.stderr.on("data",T=>this.outputChannel.append(Ie.string(T)?T:T.toString(e))),C.stdout.on("data",T=>this.outputChannel.append(Ie.string(T)?T:T.toString(e))),y.onConnected().then(T=>{m({reader:T[0],writer:T[1]})},b)},b):Nr.isSocket(f)&&(0,ze.createClientSocketTransport)(f.port).then(y=>{let C=yr.fork(p.module,R||[],q);s(C),this._serverProcess=C,C.stderr.on("data",T=>this.outputChannel.append(Ie.string(T)?T:T.toString(e))),C.stdout.on("data",T=>this.outputChannel.append(Ie.string(T)?T:T.toString(e))),y.onConnected().then(T=>{m({reader:T[0],writer:T[1]})},b)},b)})}}else if(Fp.is(c)&&c.command){let p=c,f=c.args!==void 0?c.args.slice(0):[],g,m=c.transport;if(m===Ge.stdio)f.push("--stdio");else if(m===Ge.pipe)g=(0,ze.generateRandomPipeName)(),f.push(`--pipe=${g}`);else if(Nr.isSocket(m))f.push(`--socket=${m.port}`);else if(m===Ge.ipc)throw new Error("Transport kind ipc is not support for command executable");let b=Object.assign({},p.options);if(b.cwd=b.cwd||d,m===void 0||m===Ge.stdio){let R=yr.spawn(p.command,f,b);return!R||!R.pid?po(R,`Launching server using command ${p.command} failed.`):(R.stderr.on("data",q=>this.outputChannel.append(Ie.string(q)?q:q.toString(e))),this._serverProcess=R,this._isDetached=!!b.detached,Promise.resolve({reader:new ze.StreamMessageReader(R.stdout),writer:new ze.StreamMessageWriter(R.stdin)}))}else{if(m===Ge.pipe)return(0,ze.createClientPipeTransport)(g).then(R=>{let q=yr.spawn(p.command,f,b);return!q||!q.pid?po(q,`Launching server using command ${p.command} failed.`):(this._serverProcess=q,this._isDetached=!!b.detached,q.stderr.on("data",y=>this.outputChannel.append(Ie.string(y)?y:y.toString(e))),q.stdout.on("data",y=>this.outputChannel.append(Ie.string(y)?y:y.toString(e))),R.onConnected().then(y=>({reader:y[0],writer:y[1]})))});if(Nr.isSocket(m))return(0,ze.createClientSocketTransport)(m.port).then(R=>{let q=yr.spawn(p.command,f,b);return!q||!q.pid?po(q,`Launching server using command ${p.command} failed.`):(this._serverProcess=q,this._isDetached=!!b.detached,q.stderr.on("data",y=>this.outputChannel.append(Ie.string(y)?y:y.toString(e))),q.stdout.on("data",y=>this.outputChannel.append(Ie.string(y)?y:y.toString(e))),R.onConnected().then(y=>({reader:y[0],writer:y[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,n){if(Ep.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Ep.join(r,e);if(kp.existsSync(i))return i}if(n!==void 0){let i=Ep.join(n,e);if(kp.existsSync(i))return i}return e}_mainGetRootPath(){let e=Ir.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(r=>{kp.lstat(n,(i,o)=>{r(!i&&o.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}};qt.LanguageClient=Mp;var Lp=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return Ir.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Ir.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?Ir.workspace.getConfiguration(n).get(r,!1):Ir.workspace.getConfiguration(n);i&&this._client.needsStart()?this._client.start().catch(o=>this._client.error("Start failed after configuration change",o,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(o=>this._client.error("Stop failed after configuration change",o,"force"))}};qt.SettingMonitor=Lp;function po(t,e){return t===null?Promise.reject(e):new Promise((n,r)=>{t.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var WC=w((mM,$C)=>{"use strict";$C.exports=Ap()});var jp=w(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.GetVirtualFileRequest=Me.GetVirtualFilesRequest=Me.ReloadProjectNotification=Me.WriteVirtualFilesNotification=Me.LoadedTSFilesMetaRequest=Me.AutoInsertRequest=Me.GetMatchTsConfigRequest=Me.FindFileReferenceRequest=Me.FsStatRequest=Me.FsReadDirectoryRequest=Me.FsReadFileRequest=void 0;var En=j(),zC;(function(t){t.type=new En.RequestType("volar/server/fs/readFile")})(zC||(Me.FsReadFileRequest=zC={}));var KC;(function(t){t.type=new En.RequestType("volar/server/fs/readDirectory")})(KC||(Me.FsReadDirectoryRequest=KC={}));var UC;(function(t){t.type=new En.RequestType("volar/server/fs/stat")})(UC||(Me.FsStatRequest=UC={}));var BC;(function(t){t.type=new En.RequestType("volar/client/findFileReference")})(BC||(Me.FindFileReferenceRequest=BC={}));var GC;(function(t){t.type=new En.RequestType("volar/client/tsconfig")})(GC||(Me.GetMatchTsConfigRequest=GC={}));var VC;(function(t){t.type=new En.RequestType("volar/client/autoInsert")})(VC||(Me.AutoInsertRequest=VC={}));var XC;(function(t){t.type=new En.RequestType0("volar/client/loadedTsFiles")})(XC||(Me.LoadedTSFilesMetaRequest=XC={}));var JC;(function(t){t.type=new En.NotificationType("volar/client/writeVirtualFiles")})(JC||(Me.WriteVirtualFilesNotification=JC={}));var YC;(function(t){t.type=new En.NotificationType("volar/client/reloadProject")})(YC||(Me.ReloadProjectNotification=YC={}));var QC;(function(t){t.type=new En.RequestType("volar/client/virtualFiles")})(QC||(Me.GetVirtualFilesRequest=QC={}));var ZC;(function(t){t.type=new En.RequestType("volar/client/virtualFile")})(ZC||(Me.GetVirtualFileRequest=ZC={}))});var Hp=w(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.DiagnosticModel=go.ServerMode=void 0;var e_;(function(t){t[t.Semantic=0]="Semantic",t[t.PartialSemantic=1]="PartialSemantic",t[t.Syntactic=2]="Syntactic"})(e_||(go.ServerMode=e_={}));var t_;(function(t){t[t.None=0]="None",t[t.Push=1]="Push",t[t.Pull=2]="Pull"})(t_||(go.DiagnosticModel=t_={}))});var wc=w(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.thenable=Ze.typedArray=Ze.stringArray=Ze.array=Ze.func=Ze.error=Ze.number=Ze.string=Ze.boolean=void 0;function Lk(t){return t===!0||t===!1}Ze.boolean=Lk;function n_(t){return typeof t=="string"||t instanceof String}Ze.string=n_;function Ak(t){return typeof t=="number"||t instanceof Number}Ze.number=Ak;function jk(t){return t instanceof Error}Ze.error=jk;function r_(t){return typeof t=="function"}Ze.func=r_;function i_(t){return Array.isArray(t)}Ze.array=i_;function Hk(t){return i_(t)&&t.every(e=>n_(e))}Ze.stringArray=Hk;function $k(t,e){return Array.isArray(t)&&t.every(e)}Ze.typedArray=$k;function Wk(t){return t&&r_(t.then)}Ze.thenable=Wk});var $p=w(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.generateUuid=ln.parse=ln.isUUID=ln.v4=ln.empty=void 0;var Ss=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},te=class extends Ss{constructor(){super([te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),"-",te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),"-","4",te._randomHex(),te._randomHex(),te._randomHex(),"-",te._oneOf(te._timeHighBits),te._randomHex(),te._randomHex(),te._randomHex(),"-",te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return te._oneOf(te._chars)}};te._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];te._timeHighBits=["8","9","a","b"];ln.empty=new Ss("00000000-0000-0000-0000-000000000000");function o_(){return new te}ln.v4=o_;var zk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s_(t){return zk.test(t)}ln.isUUID=s_;function Kk(t){if(!s_(t))throw new Error("invalid uuid");return new Ss(t)}ln.parse=Kk;function Uk(){return o_().asHex()}ln.generateUuid=Uk});var a_=w(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.attachPartialResult=Lr.ProgressFeature=Lr.attachWorkDone=void 0;var Mr=j(),Bk=$p(),Xn=class{constructor(e,n){this._connection=e,this._token=n,Xn.Instances.set(this._token,this)}begin(e,n,r,i){let o={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(Mr.WorkDoneProgress.type,this._token,o)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(Mr.WorkDoneProgress.type,this._token,r)}done(){Xn.Instances.delete(this._token),this._connection.sendProgress(Mr.WorkDoneProgress.type,this._token,{kind:"end"})}};Xn.Instances=new Map;var bc=class extends Xn{constructor(e,n){super(e,n),this._source=new Mr.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Ts=class{constructor(){}begin(){}report(){}done(){}},Dc=class extends Ts{constructor(){super(),this._source=new Mr.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Gk(t,e){if(e===void 0||e.workDoneToken===void 0)return new Ts;let n=e.workDoneToken;return delete e.workDoneToken,new Xn(t,n)}Lr.attachWorkDone=Gk;var Vk=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Mr.WorkDoneProgressCancelNotification.type,n=>{let r=Xn.Instances.get(n.token);(r instanceof bc||r instanceof Dc)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Ts:new Xn(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,Bk.generateUuid)();return this.connection.sendRequest(Mr.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new bc(this.connection,e))}else return Promise.resolve(new Dc)}};Lr.ProgressFeature=Vk;var Wp;(function(t){t.type=new Mr.ProgressType})(Wp||(Wp={}));var zp=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(Wp.type,this._token,e)}};function Xk(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new zp(t,n)}Lr.attachPartialResult=Xk});var c_=w(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.ConfigurationFeature=void 0;var Jk=j(),Yk=wc(),Qk=t=>class extends t{getConfiguration(e){return e?Yk.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Jk.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};Rc.ConfigurationFeature=Qk});var u_=w(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.WorkspaceFoldersFeature=void 0;var Sc=j(),Zk=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Sc.Emitter,this.connection.onNotification(Sc.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Sc.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Sc.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Tc.WorkspaceFoldersFeature=Zk});var l_=w(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.CallHierarchyFeature=void 0;var Kp=j(),eE=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Kp.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:e=>{let n=Kp.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=Kp.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Pc.CallHierarchyFeature=eE});var Bp=w(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.SemanticTokensBuilder=Ar.SemanticTokensDiff=Ar.SemanticTokensFeature=void 0;var qc=j(),tE=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(qc.SemanticTokensRefreshRequest.type),on:e=>{let n=qc.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=qc.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=qc.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ar.SemanticTokensFeature=tE;var xc=class{constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,o=n-1;for(;i>=r&&o>=r&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<r||o<r)&&(i++,o++);let s=i-r+1,a=this.modifiedSequence.slice(r,o+1);return a.length===1&&a[0]===this.originalSequence[i]?[{start:r,deleteCount:s-1}]:[{start:r,deleteCount:s,data:a}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};Ar.SemanticTokensDiff=xc;var Up=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,o){let s=e,a=n;this._dataLen>0&&(s-=this._prevLine,s===0&&(a-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=a,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new xc(this._prevData,this._data).computeDiff()}:this.build()}};Ar.SemanticTokensBuilder=Up});var d_=w(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.ShowDocumentFeature=void 0;var nE=j(),rE=t=>class extends t{showDocument(e){return this.connection.sendRequest(nE.ShowDocumentRequest.type,e)}};kc.ShowDocumentFeature=rE});var f_=w(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.FileOperationsFeature=void 0;var mo=j(),iE=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(mo.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(mo.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(mo.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(mo.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(mo.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(mo.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};Ec.FileOperationsFeature=iE});var h_=w(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.LinkedEditingRangeFeature=void 0;var oE=j(),sE=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(oE.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};Fc.LinkedEditingRangeFeature=sE});var p_=w(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.TypeHierarchyFeature=void 0;var Gp=j(),aE=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(Gp.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:e=>{let n=Gp.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:e=>{let n=Gp.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Oc.TypeHierarchyFeature=aE});var m_=w(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.InlineValueFeature=void 0;var g_=j(),cE=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(g_.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(g_.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n)))}}};Nc.InlineValueFeature=cE});var v_=w(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.InlayHintFeature=void 0;var Vp=j(),uE=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Vp.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(Vp.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),resolve:e=>this.connection.onRequest(Vp.InlayHintResolveRequest.type,(n,r)=>e(n,r))}}};Ic.InlayHintFeature=uE});var y_=w(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.DiagnosticFeature=void 0;var Ps=j(),lE=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Ps.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(Ps.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Ps.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(Ps.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Ps.WorkspaceDiagnosticRequest.partialResult,n)))}}};Mc.DiagnosticFeature=lE});var Jp=w(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.TextDocuments=void 0;var yi=j(),Xp=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new yi.Emitter,this._onDidOpen=new yi.Emitter,this._onDidClose=new yi.Emitter,this._onDidSave=new yi.Emitter,this._onWillSave=new yi.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=yi.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let s=Object.freeze({document:o});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges;if(o.length===0)return;let{version:s}=i;if(s==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let a=this._syncedDocuments.get(i.uri);a!==void 0&&(a=this._configuration.update(a,o,s),this._syncedDocuments.set(i.uri,a),this._onDidChangeContent.fire(Object.freeze({document:a})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let o=this._syncedDocuments.get(r.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),yi.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};Lc.TextDocuments=Xp});var Qp=w(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.NotebookDocuments=vo.NotebookSyncFeature=void 0;var dn=j(),C_=Jp(),dE=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(dn.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(dn.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(dn.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(dn.DidCloseNotebookDocumentNotification.type,n=>{e(n)})}}};vo.NotebookSyncFeature=dE;var jr=class{onDidOpenTextDocument(e){return this.openHandler=e,dn.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,dn.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,dn.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return jr.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return jr.NULL_DISPOSE}onDidSaveTextDocument(){return jr.NULL_DISPOSE}};jr.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var Yp=class{constructor(e){e instanceof C_.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new C_.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new dn.Emitter,this._onDidChange=new dn.Emitter,this._onDidSave=new dn.Emitter,this._onDidClose=new dn.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new jr,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)n.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let s=o.metadata,a=!1,c=i.change;c.metadata!==void 0&&(a=!0,o.metadata=c.metadata);let l=[],d=[],p=[],f=[];if(c.cells!==void 0){let q=c.cells;if(q.structure!==void 0){let y=q.structure.array;if(o.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),q.structure.didOpen!==void 0)for(let C of q.structure.didOpen)n.openTextDocument({textDocument:C}),l.push(C.uri);if(q.structure.didClose)for(let C of q.structure.didClose)n.closeTextDocument({textDocument:C}),d.push(C.uri)}if(q.data!==void 0){let y=new Map(q.data.map(C=>[C.document,C]));for(let C=0;C<=o.cells.length;C++){let T=y.get(o.cells[C].document);if(T!==void 0){let z=o.cells.splice(C,1,T);if(p.push({old:z[0],new:T}),y.delete(T.document),y.size===0)break}}}if(q.textContent!==void 0)for(let y of q.textContent)n.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),f.push(y.document.uri)}this.updateCellMap(o);let g={notebookDocument:o};a&&(g.metadata={old:s,new:o.metadata});let m=[];for(let q of l)m.push(this.getNotebookCell(q));let b=[];for(let q of d)b.push(this.getNotebookCell(q));let R=[];for(let q of f)R.push(this.getNotebookCell(q));(m.length>0||b.length>0||p.length>0||R.length>0)&&(g.cells={added:m,removed:b,changed:{data:p,textContent:R}}),(g.metadata!==void 0||g.cells!==void 0)&&this._onDidChange.fire(g)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let s of i.cellTextDocuments)n.closeTextDocument({textDocument:s});this.notebookDocuments.delete(i.notebookDocument.uri);for(let s of o.cells)this.notebookCellMap.delete(s.document)}})),dn.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};vo.NotebookDocuments=Yp});var __=w(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.MonikerFeature=void 0;var fE=j(),hE=t=>class extends t{get moniker(){return{on:e=>{let n=fE.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ac.MonikerFeature=hE});var ig=w(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.createConnection=le.combineFeatures=le.combineNotebooksFeatures=le.combineLanguagesFeatures=le.combineWorkspaceFeatures=le.combineWindowFeatures=le.combineClientFeatures=le.combineTracerFeatures=le.combineTelemetryFeatures=le.combineConsoleFeatures=le._NotebooksImpl=le._LanguagesImpl=le.BulkUnregistration=le.BulkRegistration=le.ErrorMessageTracker=void 0;var M=j(),fn=wc(),eg=$p(),J=a_(),pE=c_(),gE=u_(),mE=l_(),vE=Bp(),yE=d_(),CE=f_(),_E=h_(),wE=p_(),bE=m_(),DE=v_(),RE=y_(),SE=Qp(),TE=__();function Zp(t){if(t!==null)return t}var tg=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};le.ErrorMessageTracker=tg;var jc=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(M.MessageType.Error,e)}warn(e){this.send(M.MessageType.Warning,e)}info(e){this.send(M.MessageType.Info,e)}log(e){this.send(M.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(M.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,M.RAL)().console.error("Sending log message failed")})}},ng=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:M.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(M.ShowMessageRequest.type,r).then(Zp)}showWarningMessage(e,...n){let r={type:M.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(M.ShowMessageRequest.type,r).then(Zp)}showInformationMessage(e,...n){let r={type:M.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(M.ShowMessageRequest.type,r).then(Zp)}},w_=(0,yE.ShowDocumentFeature)((0,J.ProgressFeature)(ng)),PE;(function(t){function e(){return new Hc}t.create=e})(PE=le.BulkRegistration||(le.BulkRegistration={}));var Hc=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=fn.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=eg.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},qE;(function(t){function e(){return new qs(void 0,[])}t.create=e})(qE=le.BulkUnregistration||(le.BulkUnregistration={}));var qs=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(M.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=fn.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(M.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},$c=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof Hc?this.registerMany(e):e instanceof qs?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=fn.string(n)?n:n.method,o=eg.generateUuid(),s={registrations:[{id:o,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(M.RegistrationRequest.type,s).then(a=>(e.add({id:o,method:i}),e),a=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(a)))}registerSingle2(e,n){let r=fn.string(e)?e:e.method,i=eg.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(M.RegistrationRequest.type,o).then(s=>M.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),s=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(s)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(M.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(M.RegistrationRequest.type,n).then(()=>new qs(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},rg=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(M.ApplyWorkspaceEditRequest.type,r)}},b_=(0,CE.FileOperationsFeature)((0,gE.WorkspaceFoldersFeature)((0,pE.ConfigurationFeature)(rg))),Wc=class{constructor(){this._trace=M.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==M.Trace.Off&&this.connection.sendNotification(M.LogTraceNotification.type,{message:e,verbose:this._trace===M.Trace.Verbose?n:void 0}).catch(()=>{})}},zc=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(M.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Kc=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,J.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,J.attachPartialResult)(this.connection,n)}};le._LanguagesImpl=Kc;var D_=(0,TE.MonikerFeature)((0,RE.DiagnosticFeature)((0,DE.InlayHintFeature)((0,bE.InlineValueFeature)((0,wE.TypeHierarchyFeature)((0,_E.LinkedEditingRangeFeature)((0,vE.SemanticTokensFeature)((0,mE.CallHierarchyFeature)(Kc)))))))),Uc=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,J.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,J.attachPartialResult)(this.connection,n)}};le._NotebooksImpl=Uc;var R_=(0,SE.NotebookSyncFeature)(Uc);function S_(t,e){return function(n){return e(t(n))}}le.combineConsoleFeatures=S_;function T_(t,e){return function(n){return e(t(n))}}le.combineTelemetryFeatures=T_;function P_(t,e){return function(n){return e(t(n))}}le.combineTracerFeatures=P_;function q_(t,e){return function(n){return e(t(n))}}le.combineClientFeatures=q_;function x_(t,e){return function(n){return e(t(n))}}le.combineWindowFeatures=x_;function k_(t,e){return function(n){return e(t(n))}}le.combineWorkspaceFeatures=k_;function E_(t,e){return function(n){return e(t(n))}}le.combineLanguagesFeatures=E_;function F_(t,e){return function(n){return e(t(n))}}le.combineNotebooksFeatures=F_;function xE(t,e){function n(i,o,s){return i&&o?s(i,o):i||o}return{__brand:"features",console:n(t.console,e.console,S_),tracer:n(t.tracer,e.tracer,P_),telemetry:n(t.telemetry,e.telemetry,T_),client:n(t.client,e.client,q_),window:n(t.window,e.window,x_),workspace:n(t.workspace,e.workspace,k_),languages:n(t.languages,e.languages,E_),notebooks:n(t.notebooks,e.notebooks,F_)}}le.combineFeatures=xE;function kE(t,e,n){let r=n&&n.console?new(n.console(jc)):new jc,i=t(r);r.rawAttach(i);let o=n&&n.tracer?new(n.tracer(Wc)):new Wc,s=n&&n.telemetry?new(n.telemetry(zc)):new zc,a=n&&n.client?new(n.client($c)):new $c,c=n&&n.window?new(n.window(w_)):new w_,l=n&&n.workspace?new(n.workspace(b_)):new b_,d=n&&n.languages?new(n.languages(D_)):new D_,p=n&&n.notebooks?new(n.notebooks(R_)):new R_,f=[r,o,s,a,c,l,d,p];function g(y){return y instanceof Promise?y:fn.thenable(y)?new Promise((C,T)=>{y.then(z=>C(z),z=>T(z))}):Promise.resolve(y)}let m,b,R,q={listen:()=>i.listen(),sendRequest:(y,...C)=>i.sendRequest(fn.string(y)?y:y.method,...C),onRequest:(y,C)=>i.onRequest(y,C),sendNotification:(y,C)=>{let T=fn.string(y)?y:y.method;return arguments.length===1?i.sendNotification(T):i.sendNotification(T,C)},onNotification:(y,C)=>i.onNotification(y,C),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(b=y,{dispose:()=>{b=void 0}}),onInitialized:y=>i.onNotification(M.InitializedNotification.type,y),onShutdown:y=>(m=y,{dispose:()=>{m=void 0}}),onExit:y=>(R=y,{dispose:()=>{R=void 0}}),get console(){return r},get telemetry(){return s},get tracer(){return o},get client(){return a},get window(){return c},get workspace(){return l},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:y=>i.onNotification(M.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification(M.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification(M.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification(M.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification(M.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification(M.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest(M.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification(M.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification(M.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest(M.HoverRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),void 0)),onCompletion:y=>i.onRequest(M.CompletionRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onCompletionResolve:y=>i.onRequest(M.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest(M.SignatureHelpRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),void 0)),onDeclaration:y=>i.onRequest(M.DeclarationRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onDefinition:y=>i.onRequest(M.DefinitionRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onTypeDefinition:y=>i.onRequest(M.TypeDefinitionRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onImplementation:y=>i.onRequest(M.ImplementationRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onReferences:y=>i.onRequest(M.ReferencesRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onDocumentHighlight:y=>i.onRequest(M.DocumentHighlightRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onDocumentSymbol:y=>i.onRequest(M.DocumentSymbolRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onWorkspaceSymbol:y=>i.onRequest(M.WorkspaceSymbolRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onWorkspaceSymbolResolve:y=>i.onRequest(M.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest(M.CodeActionRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onCodeActionResolve:y=>i.onRequest(M.CodeActionResolveRequest.type,(C,T)=>y(C,T)),onCodeLens:y=>i.onRequest(M.CodeLensRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onCodeLensResolve:y=>i.onRequest(M.CodeLensResolveRequest.type,(C,T)=>y(C,T)),onDocumentFormatting:y=>i.onRequest(M.DocumentFormattingRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),void 0)),onDocumentRangeFormatting:y=>i.onRequest(M.DocumentRangeFormattingRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest(M.DocumentOnTypeFormattingRequest.type,(C,T)=>y(C,T)),onRenameRequest:y=>i.onRequest(M.RenameRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),void 0)),onPrepareRename:y=>i.onRequest(M.PrepareRenameRequest.type,(C,T)=>y(C,T)),onDocumentLinks:y=>i.onRequest(M.DocumentLinkRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onDocumentLinkResolve:y=>i.onRequest(M.DocumentLinkResolveRequest.type,(C,T)=>y(C,T)),onDocumentColor:y=>i.onRequest(M.DocumentColorRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onColorPresentation:y=>i.onRequest(M.ColorPresentationRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onFoldingRanges:y=>i.onRequest(M.FoldingRangeRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onSelectionRanges:y=>i.onRequest(M.SelectionRangeRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),(0,J.attachPartialResult)(i,C))),onExecuteCommand:y=>i.onRequest(M.ExecuteCommandRequest.type,(C,T)=>y(C,T,(0,J.attachWorkDone)(i,C),void 0)),dispose:()=>i.dispose()};for(let y of f)y.attach(q);return i.onRequest(M.InitializeRequest.type,y=>{e.initialize(y),fn.string(y.trace)&&(o.trace=M.Trace.fromString(y.trace));for(let C of f)C.initialize(y.capabilities);if(b){let C=b(y,new M.CancellationTokenSource().token,(0,J.attachWorkDone)(i,y),void 0);return g(C).then(T=>{if(T instanceof M.ResponseError)return T;let z=T;z||(z={capabilities:{}});let X=z.capabilities;X||(X={},z.capabilities=X),X.textDocumentSync===void 0||X.textDocumentSync===null?X.textDocumentSync=fn.number(q.__textDocumentSync)?q.__textDocumentSync:M.TextDocumentSyncKind.None:!fn.number(X.textDocumentSync)&&!fn.number(X.textDocumentSync.change)&&(X.textDocumentSync.change=fn.number(q.__textDocumentSync)?q.__textDocumentSync:M.TextDocumentSyncKind.None);for(let B of f)B.fillServerCapabilities(X);return z})}else{let C={capabilities:{textDocumentSync:M.TextDocumentSyncKind.None}};for(let T of f)T.fillServerCapabilities(C.capabilities);return C}}),i.onRequest(M.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,m)return m(new M.CancellationTokenSource().token)}),i.onNotification(M.ExitNotification.type,()=>{try{R&&R()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(M.SetTraceNotification.type,y=>{o.trace=M.Trace.fromString(y.value)}),q}le.createConnection=kE});var N_=w(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.resolveModulePath=xt.FileSystem=xt.resolveGlobalYarnPath=xt.resolveGlobalNodePath=xt.resolve=xt.uriToFilePath=void 0;var EE=require("url"),Fn=require("path"),og=require("fs"),cg=require("child_process");function FE(t){let e=EE.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let o=n[0],s=n[1];o.length===0&&s.length>1&&s[1]===":"&&n.shift()}return Fn.normalize(n.join("/"))}xt.uriToFilePath=FE;function sg(){return process.platform==="win32"}function Bc(t,e,n,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((s,a)=>{let c=process.env,l=Object.create(null);Object.keys(c).forEach(d=>l[d]=c[d]),e&&og.existsSync(e)&&(l[i]?l[i]=e+Fn.delimiter+l[i]:l[i]=e,r&&r(`NODE_PATH value is: ${l[i]}`)),l.ELECTRON_RUN_AS_NODE="1";try{let d=(0,cg.fork)("",[],{cwd:n,env:l,execArgv:["-e",o]});if(d.pid===void 0){a(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",f=>{a(f)}),d.on("message",f=>{f.c==="r"&&(d.send({c:"e"}),f.s?s(f.r):a(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){a(d)}})}xt.resolve=Bc;function ag(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(o=>n[o]=process.env[o]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};sg()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let o=(0,cg.spawnSync)(e,["config","get","prefix"],r).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let s=o.trim();return t&&t(`'npm config get prefix' value is: ${s}`),s.length>0?sg()?Fn.join(s,"node_modules"):Fn.join(s,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}xt.resolveGlobalNodePath=ag;function OE(t){let e="yarn",n={encoding:"utf8"};sg()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,cg.spawnSync)(e,["global","dir","--json"],n),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let s=o.trim().split(/\r?\n/);for(let a of s)try{let c=JSON.parse(a);if(c.type==="log")return Fn.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}xt.resolveGlobalYarnPath=OE;var O_;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!og.existsSync(__filename.toUpperCase())||!og.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,o){return n()?Fn.normalize(o).indexOf(Fn.normalize(i))===0:Fn.normalize(o).toLowerCase().indexOf(Fn.normalize(i).toLowerCase())===0}t.isParent=r})(O_=xt.FileSystem||(xt.FileSystem={}));function NE(t,e,n,r){return n?(Fn.isAbsolute(n)||(n=Fn.join(t,n)),Bc(e,n,n,r).then(i=>O_.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Bc(e,ag(r),t,r))):Bc(e,ag(r),t,r)}xt.resolveModulePath=NE});var M_=w(ft=>{"use strict";var IE=ft&&ft.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),I_=ft&&ft.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&IE(e,t,n)};Object.defineProperty(ft,"__esModule",{value:!0});ft.ProposedFeatures=ft.NotebookDocuments=ft.TextDocuments=ft.SemanticTokensBuilder=void 0;var ME=Bp();Object.defineProperty(ft,"SemanticTokensBuilder",{enumerable:!0,get:function(){return ME.SemanticTokensBuilder}});I_(j(),ft);var LE=Jp();Object.defineProperty(ft,"TextDocuments",{enumerable:!0,get:function(){return LE.TextDocuments}});var AE=Qp();Object.defineProperty(ft,"NotebookDocuments",{enumerable:!0,get:function(){return AE.NotebookDocuments}});I_(ig(),ft);var jE;(function(t){t.all={__brand:"features"}})(jE=ft.ProposedFeatures||(ft.ProposedFeatures={}))});var H_=w(Jt=>{"use strict";var HE=Jt&&Jt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),A_=Jt&&Jt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&HE(e,t,n)};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.createConnection=Jt.Files=void 0;var ug=wc(),$E=ig(),xs=N_(),Ci=vs();A_(vs(),Jt);A_(M_(),Jt);var WE;(function(t){t.uriToFilePath=xs.uriToFilePath,t.resolveGlobalNodePath=xs.resolveGlobalNodePath,t.resolveGlobalYarnPath=xs.resolveGlobalYarnPath,t.resolve=xs.resolve,t.resolveModulePath=xs.resolveModulePath})(WE=Jt.Files||(Jt.Files={}));var L_;function Gc(){if(L_!==void 0)try{L_.end()}catch{}}var yo=!1,j_;function zE(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(j_=setInterval(()=>{try{process.kill(r,0)}catch{Gc(),process.exit(yo?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}zE();var KE={initialize:t=>{let e=t.processId;ug.number(e)&&j_===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(yo?0:1)}},3e3)},get shutdownReceived(){return yo},set shutdownReceived(t){yo=t},exit:t=>{Gc(),process.exit(t)}};function UE(t,e,n,r){let i,o,s,a;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),Ci.ConnectionStrategy.is(t)||Ci.ConnectionOptions.is(t)?a=t:(o=t,s=e,a=n),BE(o,s,a,i)}Jt.createConnection=UE;function BE(t,e,n,r){if(!t&&!e&&process.argv.length>2){let a,c,l=process.argv.slice(2);for(let d=0;d<l.length;d++){let p=l[d];if(p==="--node-ipc"){t=new Ci.IPCMessageReader(process),e=new Ci.IPCMessageWriter(process);break}else if(p==="--stdio"){t=process.stdin,e=process.stdout;break}else if(p==="--socket"){a=parseInt(l[d+1]);break}else if(p==="--pipe"){c=l[d+1];break}else{var i=p.split("=");if(i[0]==="--socket"){a=parseInt(i[1]);break}else if(i[0]==="--pipe"){c=i[1];break}}}if(a){let d=(0,Ci.createServerSocketTransport)(a);t=d[0],e=d[1]}else if(c){let d=(0,Ci.createServerPipeTransport)(c);t=d[0],e=d[1]}}var o="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+o);if(!e)throw new Error("Connection output stream is not set. "+o);if(ug.func(t.read)&&ug.func(t.on)){let a=t;a.on("end",()=>{Gc(),process.exit(yo?0:1)}),a.on("close",()=>{Gc(),process.exit(yo?0:1)})}let s=a=>(0,Ci.createProtocolConnection)(t,e,a,n);return(0,$E.createConnection)(s,KE,r)}});var U_=w(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.FileKind=Jn.MirrorBehaviorCapabilities=Jn.FileRangeCapabilities=Jn.FileCapabilities=void 0;var $_;(function(t){t.full={diagnostic:!0,foldingRange:!0,documentFormatting:!0,documentSymbol:!0,codeAction:!0,inlayHint:!0}})($_||(Jn.FileCapabilities=$_={}));var W_;(function(t){t.full={hover:!0,references:!0,definition:!0,rename:!0,completion:!0,diagnostic:!0,semanticTokens:!0}})(W_||(Jn.FileRangeCapabilities=W_={}));var z_;(function(t){t.full={references:!0,definition:!0,rename:!0}})(z_||(Jn.MirrorBehaviorCapabilities=z_={}));var K_;(function(t){t[t.TextFile=0]="TextFile",t[t.TypeScriptHostFile=1]="TypeScriptHostFile"})(K_||(Jn.FileKind=K_={}))});var lg=w(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.RuleType=Co.FileType=void 0;var B_;(function(t){t[t.Unknown=0]="Unknown",t[t.File=1]="File",t[t.Directory=2]="Directory",t[t.SymbolicLink=64]="SymbolicLink"})(B_||(Co.FileType=B_={}));var G_;(function(t){t[t.Format=0]="Format",t[t.Syntax=1]="Syntax",t[t.Semantic=2]="Semantic"})(G_||(Co.RuleType=G_={}))});var _i=w(On=>{"use strict";var GE=On&&On.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ks=On&&On.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&GE(e,t,n)};Object.defineProperty(On,"__esModule",{value:!0});ks(jp(),On);ks(Hp(),On);ks(H_(),On);ks(U_(),On);ks(lg(),On)});var V_=w(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.activate=void 0;var Yt=require("vscode"),VE=_i();async function XE(t,e){let n=!1,r;s();let i=Yt.workspace.onDidChangeTextDocument(a,null),o=Yt.window.onDidChangeActiveTextEditor(s,null);return Yt.Disposable.from(i,o);function s(){n=!1;let l=Yt.window.activeTextEditor;if(!l)return;let d=l.document;!e(d)||(n=!0)}function a({document:l,contentChanges:d,reason:p}){if(!n||d.length===0||p===Yt.TextDocumentChangeReason.Undo||p===Yt.TextDocumentChangeReason.Redo)return;let f=Yt.window.activeTextEditor?.document;if(l!==f)return;let g=d[d.length-1];c(l,g,async(m,b,R,q)=>{for(let y of t){let C={...y.code2ProtocolConverter.asTextDocumentPositionParams(m,b),options:{lastChange:{...R,range:y.code2ProtocolConverter.asRange(R.range)}}};if(q())return;let T=await y.sendRequest(VE.AutoInsertRequest.type,C);if(T!=null)return typeof T=="string"?T:y.protocol2CodeConverter.asTextEdit(T)}})}function c(l,d,p){r&&(clearTimeout(r),r=void 0);let f=l.version;r=setTimeout(()=>{let g=d.range.start,m=new Yt.Position(g.line,g.character+d.text.length);p(l,m,d,()=>Yt.window.activeTextEditor?.document.version!==f).then(b=>{if(b&&n){let R=Yt.window.activeTextEditor;if(R){let q=R.document;if(l===q&&q.version===f)if(typeof b=="string"){let y=R.selections;y.length&&y.some(C=>C.active.isEqual(m))?R.insertSnippet(new Yt.SnippetString(b),y.map(C=>C.active)):R.insertSnippet(new Yt.SnippetString(b),m)}else R.insertSnippet(new Yt.SnippetString(b.newText),b.range)}}}),r=void 0},100)}}Vc.activate=XE});var X_=w(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.activate=void 0;var dg=require("vscode"),JE=_i();async function YE(t,e){return dg.commands.registerCommand(t,()=>{dg.window.activeTextEditor&&e.sendNotification(JE.WriteVirtualFilesNotification.type,e.code2ProtocolConverter.asTextDocumentIdentifier(dg.window.activeTextEditor.document))})}Xc.activate=YE});var gg=w(pg=>{"use strict";Object.defineProperty(pg,"__esModule",{value:!0});var fg;function hg(){if(fg===void 0)throw new Error("No runtime abstraction layer installed");return fg}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");fg=n}t.install=e})(hg||(hg={}));pg.default=hg});var vg=w(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.config=Le.loadMessageBundle=Le.localize=Le.format=Le.setPseudo=Le.isPseudo=Le.isDefined=Le.BundleFormat=Le.MessageFormat=void 0;var Y_=gg(),QE;(function(t){t.file="file",t.bundle="bundle",t.both="both"})(QE=Le.MessageFormat||(Le.MessageFormat={}));var ZE;(function(t){t.standalone="standalone",t.languagePack="languagePack"})(ZE=Le.BundleFormat||(Le.BundleFormat={}));var J_;(function(t){function e(n){var r=n;return r&&mg(r.key)&&mg(r.comment)}t.is=e})(J_||(J_={}));function mg(t){return typeof t<"u"}Le.isDefined=mg;Le.isPseudo=!1;function e0(t){Le.isPseudo=t}Le.setPseudo=e0;function Q_(t,e){var n;return Le.isPseudo&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),e.length===0?n=t:n=t.replace(/\{(\d+)\}/g,function(r,i){var o=i[0],s=e[o],a=r;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),n}Le.format=Q_;function t0(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return Q_(e,n)}Le.localize=t0;function n0(t){return(0,Y_.default)().loadMessageBundle(t)}Le.loadMessageBundle=n0;function r0(t){return(0,Y_.default)().config(t)}Le.config=r0});var rw=w(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.config=Yn.loadMessageBundle=Yn.BundleFormat=Yn.MessageFormat=void 0;var Nn=require("path"),hn=require("fs"),i0=gg(),Lt=vg(),ew=vg();Object.defineProperty(Yn,"MessageFormat",{enumerable:!0,get:function(){return ew.MessageFormat}});Object.defineProperty(Yn,"BundleFormat",{enumerable:!0,get:function(){return ew.BundleFormat}});var tw=Object.prototype.toString;function o0(t){return tw.call(t)==="[object Number]"}function Cr(t){return tw.call(t)==="[object String]"}function s0(t){return t===!0||t===!1}function _o(t){return JSON.parse(hn.readFileSync(t,"utf8"))}var Jc,ae;function a0(){if(ae={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:Lt.MessageFormat.bundle},Cr(process.env.VSCODE_NLS_CONFIG))try{var t=JSON.parse(process.env.VSCODE_NLS_CONFIG),e=void 0;if(t.availableLanguages){var n=t.availableLanguages["*"];Cr(n)&&(e=n)}if(Cr(t.locale)&&(ae.locale=t.locale.toLowerCase()),e===void 0?ae.language=ae.locale:e!=="en"&&(ae.language=e),s0(t._languagePackSupport)&&(ae.languagePackSupport=t._languagePackSupport),Cr(t._cacheRoot)&&(ae.cacheRoot=t._cacheRoot),Cr(t._languagePackId)&&(ae.languagePackId=t._languagePackId),Cr(t._translationsConfigFile)){ae.translationsConfigFile=t._translationsConfigFile;try{ae.translationsConfig=_o(ae.translationsConfigFile)}catch{if(t._corruptedFile){var r=Nn.dirname(t._corruptedFile);hn.exists(r,function(o){o&&hn.writeFile(t._corruptedFile,"corrupted","utf8",function(s){console.error(s)})})}}}}catch{}(0,Lt.setPseudo)(ae.locale==="pseudo"),Jc=Object.create(null)}a0();function c0(){return ae.languagePackSupport===!0&&ae.cacheRoot!==void 0&&ae.languagePackId!==void 0&&ae.translationsConfigFile!==void 0&&ae.translationsConfig!==void 0}function yg(t){return function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(o0(e)){if(e>=t.length){console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack));return}return(0,Lt.format)(t[e],r)}else{if(Cr(n))return console.warn("Message ".concat(n," didn't get externalized correctly.")),(0,Lt.format)(n,r);console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}}function u0(t){var e;if(ae.cacheLanguageResolution&&e)e=e;else{if(Lt.isPseudo||!ae.language)e=".nls.json";else for(var n=ae.language;n;){var r=".nls."+n+".json";if(hn.existsSync(t+r)){e=r;break}else{var i=n.lastIndexOf("-");i>0?n=n.substring(0,i):(e=".nls.json",n=null)}}ae.cacheLanguageResolution&&(e=e)}return t+e}function l0(t){for(var e=ae.language;e;){var n=Nn.join(t,"nls.bundle.".concat(e,".json"));if(hn.existsSync(n))return n;var r=e.lastIndexOf("-");r>0?e=e.substring(0,r):e=void 0}if(e===void 0){var n=Nn.join(t,"nls.bundle.json");if(hn.existsSync(n))return n}}function d0(t){var e=_o(Nn.join(t,"nls.metadata.json")),n=Object.create(null);for(var r in e){var i=e[r];n[r]=i.messages}return n}function f0(t,e){var n=ae.translationsConfig[t.id];if(!!n){var r=_o(n).contents,i=_o(Nn.join(e,"nls.metadata.json")),o=Object.create(null);for(var s in i){var a=i[s],c=r["".concat(t.outDir,"/").concat(s)];if(c){for(var l=[],d=0;d<a.keys.length;d++){var p=a.keys[d],f=Cr(p)?p:p.key,g=c[f];g===void 0&&(g=a.messages[d]),l.push(g)}o[s]=l}else o[s]=a.messages}return o}}function h0(t){var e=new Date;hn.utimes(t,e,e,function(){})}function Cg(t,e){return Jc[t]=e,e}function p0(t,e){var n,r=Nn.join(ae.cacheRoot,"".concat(t.id,"-").concat(t.hash,".json")),i=!1,o=!1;try{return n=JSON.parse(hn.readFileSync(r,{encoding:"utf8",flag:"r"})),h0(r),n}catch(s){if(s.code==="ENOENT")o=!0;else if(s instanceof SyntaxError)console.log("Syntax error parsing message bundle: ".concat(s.message,".")),hn.unlink(r,function(a){a&&console.error("Deleting corrupted bundle ".concat(r," failed."))}),i=!0;else throw s}if(n=f0(t,e),!n||i)return n;if(o)try{hn.writeFileSync(r,JSON.stringify(n),{encoding:"utf8",flag:"wx"})}catch(s){if(s.code==="EEXIST")return n;throw s}return n}function Z_(t){try{return d0(t)}catch(e){console.log("Generating default bundle from meta data failed.",e);return}}function g0(t,e){var n;if(c0())try{n=p0(t,e)}catch(i){console.log("Load or create bundle failed ",i)}if(!n){if(ae.languagePackSupport)return Z_(e);var r=l0(e);if(r)try{return _o(r)}catch(i){console.log("Loading in the box message bundle failed.",i)}n=Z_(e)}return n}function m0(t){for(var e,n=Nn.dirname(t);e=Nn.join(n,"nls.metadata.header.json"),!hn.existsSync(e);){var r=Nn.dirname(n);if(r===n){e=void 0;break}else n=r}return e}function _g(t){if(!t)return Lt.localize;var e=Nn.extname(t);if(e&&(t=t.substr(0,t.length-e.length)),ae.messageFormat===Lt.MessageFormat.both||ae.messageFormat===Lt.MessageFormat.bundle){var n=m0(t);if(n){var r=Nn.dirname(n),i=Jc[r];if(i===void 0)try{var o=JSON.parse(hn.readFileSync(n,"utf8"));try{var s=g0(o,r);i=Cg(r,s?{header:o,nlsBundle:s}:null)}catch(d){console.error("Failed to load nls bundle",d),i=Cg(r,null)}}catch(d){console.error("Failed to read header file",d),i=Cg(r,null)}if(i){var a=t.substr(r.length+1).replace(/\\/g,"/"),c=i.nlsBundle[a];return c===void 0?(console.error("Messages for file ".concat(t," not found. See console for details.")),function(){return"Messages not found."}):yg(c)}}}if(ae.messageFormat===Lt.MessageFormat.both||ae.messageFormat===Lt.MessageFormat.file)try{var l=_o(u0(t));return Array.isArray(l)?yg(l):(0,Lt.isDefined)(l.messages)&&(0,Lt.isDefined)(l.keys)?yg(l.messages):(console.error("String bundle '".concat(t,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(d){d.code!=="ENOENT"&&console.error("Failed to load single file bundle",d)}return console.error("Failed to load message bundle for file ".concat(t)),function(){return"Failed to load message bundle. See console for details."}}Yn.loadMessageBundle=_g;function nw(t){return t&&(Cr(t.locale)&&(ae.locale=t.locale.toLowerCase(),ae.language=ae.locale,Jc=Object.create(null)),t.messageFormat!==void 0&&(ae.messageFormat=t.messageFormat),t.bundleFormat===Lt.BundleFormat.standalone&&ae.languagePackSupport===!0&&(ae.languagePackSupport=!1)),(0,Lt.setPseudo)(ae.locale==="pseudo"),_g}Yn.config=nw;i0.default.install(Object.freeze({loadMessageBundle:_g,config:nw}))});var iw=w(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.activate=void 0;var wi=require("vscode"),v0=rw(),y0=_i(),C0=v0.loadMessageBundle();async function _0(t,e){return wi.commands.registerCommand(t,async n=>{await wi.window.withProgress({location:wi.ProgressLocation.Window,title:C0("progress.title","Finding file references")},async r=>{if(!n){let c=wi.window.activeTextEditor;if(!c)return;n=c.document.uri}let i=await e.sendRequest(y0.FindFileReferenceRequest.type,{textDocument:{uri:n.toString()}});if(!i)return;let o=i.map(c=>e.protocol2CodeConverter.asLocation(c)),s=wi.workspace.getConfiguration("references"),a=s.inspect("preferredLocation");await s.update("preferredLocation","view");try{await wi.commands.executeCommand("editor.action.showReferences",n,new wi.Position(0,0),o)}finally{await s.update("preferredLocation",a?.workspaceFolderValue??a?.workspaceValue)}})})}Yc.activate=_0});var ow=w(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.activate=void 0;var wg=require("vscode"),w0=_i();async function b0(t,e){return wg.commands.registerCommand(t,()=>{if(wg.window.activeTextEditor)for(let n of e)n.sendNotification(w0.ReloadProjectNotification.type,n.code2ProtocolConverter.asTextDocumentIdentifier(wg.window.activeTextEditor.document))})}Qc.activate=b0});var bg=w((lL,sw)=>{sw.exports=require("path")});var aw=w(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.activate=void 0;var In=require("vscode"),D0=_i(),R0=bg();async function S0(t,e,n){let r=[],i=In.window.createStatusBarItem(In.StatusBarAlignment.Right),o;s(),In.window.onDidChangeActiveTextEditor(s,void 0,r),r.push(In.commands.registerCommand(t,async()=>{if(o){let a=await In.workspace.openTextDocument(o);await In.window.showTextDocument(a)}})),r.push(...r);async function s(){if(!In.window.activeTextEditor||!n(In.window.activeTextEditor.document))i.hide();else{let a=await e.sendRequest(D0.GetMatchTsConfigRequest.type,e.code2ProtocolConverter.asTextDocumentIdentifier(In.window.activeTextEditor.document));a?.uri?(o=In.Uri.parse(a.uri),i.text=R0.relative(In.workspace.rootPath||"/",o.fsPath),i.command=t):(i.text="No tsconfig",i.command=void 0),i.show()}}}Zc.activate=S0});var cw=w(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.activate=void 0;var eu=require("vscode"),Dg=_i();async function T0(t){let e=[],n=new TextDecoder;return r(),e.push(t.onDidChangeState(()=>{t.state===2&&r()})),eu.Disposable.from(...e);function r(){e.push(t.onRequest(Dg.FsStatRequest.type,async i=>{let o=t.protocol2CodeConverter.asUri(i);try{return await eu.workspace.fs.stat(o)}catch{}})),e.push(t.onRequest(Dg.FsReadFileRequest.type,async i=>{let o=t.protocol2CodeConverter.asUri(i);try{let s=await eu.workspace.fs.readFile(o);return n.decode(s)}catch{}})),e.push(t.onRequest(Dg.FsReadDirectoryRequest.type,async i=>{try{let o=t.protocol2CodeConverter.asUri(i),s=await eu.workspace.fs.readDirectory(o);return s=s.filter(([a])=>!a.startsWith(".")),s}catch{return[]}}))}}tu.activate=T0});var Rg=w(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.quickPick=void 0;var uw=require("vscode");function P0(t,e){return new Promise(n=>{let r=uw.window.createQuickPick(),i=[];for(let o of Array.isArray(t)?t:[t]){let s=Object.values(o);if(s.length){i.length&&i.push({label:"",kind:uw.QuickPickItemKind.Separator});for(let a of s)a&&i.push(a)}}r.items=i,r.placeholder=e,r.onDidChangeSelection(o=>{if(o[0])for(let s of Array.isArray(t)?t:[t])for(let a in s){let c=s[a];if(o[0]===c){n(a),r.hide();break}}}),r.onDidHide(()=>{r.dispose(),n(void 0)}),r.show()})}nu.quickPick=P0});var fw=w(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.getTsdk=wo.activate=void 0;var iu=bg(),nt=require("vscode"),q0=Rg(),Es="node_modules/typescript/lib";async function x0(t,e,n,r,i,o){let s=[],a=nt.window.createStatusBarItem(nt.StatusBarAlignment.Right);return a.command=t,s.push({dispose:()=>a.dispose()}),s.push(nt.commands.registerCommand(t,c)),nt.workspace.onDidChangeConfiguration(l,void 0,s),nt.window.onDidChangeActiveTextEditor(d,void 0,s),d(),nt.Disposable.from(...s);async function c(){let f=await ru(e),g=dw(),m=await lw(),b=await(0,q0.quickPick)([{useVSCodeTsdk:{label:(f.isWorkspacePath?"":"\u2022 ")+"Use VS Code's Version",description:m.version,detail:m.isWeb?m.path:void 0},useConfigWorkspaceTsdk:g&&!m.isWeb?{label:(f.isWorkspacePath?"\u2022 ":"")+"Use Workspace Version",description:await Fs(Sg(g)??"/")??"Could not load the TypeScript version at this path",detail:g}:void 0,useDefaultWorkspaceTsdk:g!==Es&&!m.isWeb?{label:(f.isWorkspacePath?"\u2022 ":"")+"Use Workspace Version",description:await Fs(Sg(Es)??"/")??"Could not load the TypeScript version at this path",detail:Es}:void 0},...o?[]:[{takeover:{label:"What is Takeover Mode?"}}]]);if(b===void 0)return;if(b==="takeover"){nt.env.openExternal(nt.Uri.parse("https://vuejs.org/guide/typescript/overview.html#volar-takeover-mode"));return}b==="useDefaultWorkspaceTsdk"&&await nt.workspace.getConfiguration("typescript").update("tsdk",Es);let R=b==="useConfigWorkspaceTsdk"||b==="useDefaultWorkspaceTsdk";R!==Tg(e)&&(e.workspaceState.update("typescript.useWorkspaceTsdk",R),p()),d()}function l(f){f.affectsConfiguration("typescript.tsdk")&&Tg(e)&&p()}async function d(){if(!nt.window.activeTextEditor||!r(nt.window.activeTextEditor.document))a.hide();else{let f=(await ru(e)).version;a.text=f??"x.x.x",a.text=i(a.text),a.show()}}async function p(){let f=await ru(e),g={...n.clientOptions.initializationOptions,typescript:f};n.clientOptions.initializationOptions=g,nt.commands.executeCommand("volar.action.restartServer")}}wo.activate=x0;async function ru(t){if(Tg(t)){let n=Sg(dw()||Es);if(n)return{tsdk:n,version:await Fs(n),isWorkspacePath:!0}}let e=await lw();return{tsdk:e.path,version:e.version,isWorkspacePath:!1}}wo.getTsdk=ru;function Sg(t){if(iu.isAbsolute(t))try{if(require.resolve("./typescript.js",{paths:[t]}))return t.replace(/\\/g,"/")}catch{}let e=(nt.workspace.workspaceFolders??[]).map(n=>n.uri.fsPath);for(let n of e){let r=iu.join(n,t);try{if(require.resolve("./typescript.js",{paths:[r]}))return r.replace(/\\/g,"/")}catch{}}}async function lw(){let t=nt.extensions.getExtension("ms-vscode.vscode-typescript-next");if(t){let n=iu.join(t.extensionPath,"node_modules/typescript/lib").replace(/\\/g,"/");return{path:n,version:await Fs(n),isWeb:!1}}if(nt.env.appRoot){let n=iu.join(nt.env.appRoot,"extensions/node_modules/typescript/lib").replace(/\\/g,"/");return{path:n,version:await Fs(n),isWeb:!1}}let e=require("typescript/package.json").version;return{path:`/node_modules/typescript@${e}/lib`,version:e,isWeb:!0}}function dw(){return nt.workspace.getConfiguration("typescript").get("tsdk")}function Tg(t){return t.workspaceState.get("typescript.useWorkspaceTsdk",!1)}async function Fs(t){let i=t.toString().split("/").slice(0,-1).join("/")+"/package.json",o=await k0(i);if(o===void 0)return;let s=null;try{s=JSON.parse(o)}catch{return}if(!(!s||!s.version))return s.version}async function k0(t){try{let e=await nt.workspace.fs.readFile(nt.Uri.file(t));return new TextDecoder("utf8").decode(e)}catch{}}});var Os=w(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.supportLabsVersion=qe.parseServerCommand=qe.middleware=qe.takeOverModeActive=qe.getTsdk=qe.activateTsVersionStatusItem=qe.activateServerSys=qe.activateTsConfigStatusItem=qe.activateReloadProjects=qe.activateFindFileReferences=qe.activateWriteVirtualFiles=qe.activateAutoInsertion=void 0;var Mn=require("vscode"),E0=V_();Object.defineProperty(qe,"activateAutoInsertion",{enumerable:!0,get:function(){return E0.activate}});var F0=X_();Object.defineProperty(qe,"activateWriteVirtualFiles",{enumerable:!0,get:function(){return F0.activate}});var O0=iw();Object.defineProperty(qe,"activateFindFileReferences",{enumerable:!0,get:function(){return O0.activate}});var N0=ow();Object.defineProperty(qe,"activateReloadProjects",{enumerable:!0,get:function(){return N0.activate}});var I0=aw();Object.defineProperty(qe,"activateTsConfigStatusItem",{enumerable:!0,get:function(){return I0.activate}});var M0=cw();Object.defineProperty(qe,"activateServerSys",{enumerable:!0,get:function(){return M0.activate}});var hw=fw();Object.defineProperty(qe,"activateTsVersionStatusItem",{enumerable:!0,get:function(){return hw.activate}});Object.defineProperty(qe,"getTsdk",{enumerable:!0,get:function(){return hw.getTsdk}});function L0(t){return Mn.workspace.getConfiguration("volar").get("takeOverMode.extension")===t.extension.id?!Mn.extensions.getExtension("vscode.typescript-language-features"):!1}qe.takeOverModeActive=L0;qe.middleware={async provideHover(t,e,n,r){let i=await r(t,e,n);for(let o of i?.contents??[])o instanceof Mn.MarkdownString&&(o.isTrusted=!0,o.supportHtml=!0);return i},async provideCodeActions(t,e,n,r,i){let o=await i(t,e,n,r);return o=o?.map(s=>s instanceof Mn.CodeAction?(s.command&&(s.command=bo(s.command)),s):bo(s)),o},async resolveCodeAction(t,e,n){let r=await n(t,e);return r?.command&&(r.command=bo(r.command)),r},async provideCodeLenses(t,e,n){let r=await n(t,e);return r=r?.map(i=>(i.command&&(i.command=bo(i.command)),i)),r},async resolveCodeLens(t,e,n){let r=await n(t,e);return r?.command&&(r.command=bo(r.command)),r}};function bo(t){return t.command==="editor.action.rename"&&t.arguments?{...t,arguments:[[Mn.Uri.parse(t.arguments[0]),new Mn.Position(t.arguments[1].line,t.arguments[1].character)]]}:t.command==="editor.action.showReferences"&&t.arguments?{...t,arguments:[Mn.Uri.parse(t.arguments[0]),new Mn.Position(t.arguments[1].line,t.arguments[1].character),t.arguments[2].map(e=>new Mn.Location(Mn.Uri.parse(e.uri),new Mn.Range(e.range.start.line,e.range.start.character,e.range.end.line,e.range.end.character)))]}:t}qe.parseServerCommand=bo;qe.supportLabsVersion="1.9.0"});var Cw=w(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.ParseSFCRequest=pn.GetConvertAttrCasingEditsRequest=pn.GetConvertTagCasingEditsRequest=pn.DetectNameCasingRequest=pn.GetComponentMeta=void 0;var Ns=j(),pw;(function(t){t.type=new Ns.RequestType("vue/componentMeta")})(pw||(pn.GetComponentMeta=pw={}));var gw;(function(t){t.type=new Ns.RequestType("vue/detectTagCasing")})(gw||(pn.DetectNameCasingRequest=gw={}));var mw;(function(t){t.type=new Ns.RequestType("vue/convertTagNameCasing")})(mw||(pn.GetConvertTagCasingEditsRequest=mw={}));var vw;(function(t){t.type=new Ns.RequestType("vue/convertPropNameCasing")})(vw||(pn.GetConvertAttrCasingEditsRequest=vw={}));var yw;(function(t){t.type=new Ns.RequestType("vue/parseSfc")})(yw||(pn.ParseSFCRequest=yw={}))});var ww=w(_w=>{"use strict";Object.defineProperty(_w,"__esModule",{value:!0})});var Dw=w(bw=>{"use strict";Object.defineProperty(bw,"__esModule",{value:!0})});var Pw=w(gn=>{"use strict";var A0=gn&&gn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Tw=gn&&gn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&A0(e,t,n)};Object.defineProperty(gn,"__esModule",{value:!0});gn.AttrNameCasing=gn.TagNameCasing=void 0;var Rw;(function(t){t[t.Kebab=0]="Kebab",t[t.Pascal=1]="Pascal"})(Rw||(gn.TagNameCasing=Rw={}));var Sw;(function(t){t[t.Kebab=0]="Kebab",t[t.Camel=1]="Camel"})(Sw||(gn.AttrNameCasing=Sw={}));Tw(lg(),gn);Tw(Dw(),gn)});var Hr=w(Ln=>{"use strict";var j0=Ln&&Ln.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Is=Ln&&Ln.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&j0(e,t,n)};Object.defineProperty(Ln,"__esModule",{value:!0});Is(Cw(),Ln);Is(ww(),Ln);Is(jp(),Ln);Is(Hp(),Ln);Is(Pw(),Ln)});var bi=w(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.config=void 0;var H0=require("vscode"),$r=()=>H0.workspace.getConfiguration("vue");ou.config={update:(t,e)=>$r().update(t,e),get splitEditors(){return $r().get("splitEditors")},get doctor(){return $r().get("doctor")},get server(){return $r().get("server")},get updateImportsOnFileMove(){return $r().get("updateImportsOnFileMove")},get codeActions(){return $r().get("codeActions")},get codeLens(){return $r().get("codeLens")},get complete(){return $r().get("complete")}}});var xw=w(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.register=void 0;var _r=require("vscode"),$0=Hr(),qw="vue-component-meta";async function W0(t,e){let n=new Map,r=new Map,i=new _r.EventEmitter,o;t.subscriptions.push(_r.workspace.onDidChangeTextDocument(s=>{let a=n.get(s.document.uri.toString());a&&(clearTimeout(o),o=setTimeout(()=>{i.fire(_r.Uri.parse(a))},100))})),t.subscriptions.push(_r.workspace.registerTextDocumentContentProvider(qw,{onDidChange:i.event,async provideTextDocumentContent(s){let a=r.get(s.toString());if(a){let c=await e.sendRequest($0.GetComponentMeta.type,{uri:a.document.uri.toString()});return JSON.stringify(c,void 0,"	")}}})),t.subscriptions.push(_r.commands.registerCommand("volar.action.showComponentMeta",async()=>{let s=_r.window.activeTextEditor;if(s){let a=s.document.uri.with({scheme:qw}).toString()+".meta.json";n.set(s.document.uri.toString(),a),r.set(a,s),_r.window.showTextDocument(_r.Uri.parse(a),{viewColumn:_r.ViewColumn.Two,preview:!1})}}))}su.register=W0});var Ew=w((DL,kw)=>{var z0=Or(),K0=(t,e)=>{let n=z0(t,e);return n?n.version:null};kw.exports=K0});var Ow=w((RL,Fw)=>{var U0=Or(),B0=(t,e)=>{let n=U0(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};Fw.exports=B0});var Mw=w((SL,Iw)=>{var Nw=yt(),G0=(t,e,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new Nw(t instanceof Nw?t.version:t,n).inc(e,r,i).version}catch{return null}};Iw.exports=G0});var jw=w((TL,Aw)=>{var Lw=Or(),V0=(t,e)=>{let n=Lw(t,null,!0),r=Lw(e,null,!0),i=n.compare(r);if(i===0)return null;let o=i>0,s=o?n:r,a=o?r:n,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let d=c?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"};Aw.exports=V0});var $w=w((PL,Hw)=>{var X0=yt(),J0=(t,e)=>new X0(t,e).major;Hw.exports=J0});var zw=w((qL,Ww)=>{var Y0=yt(),Q0=(t,e)=>new Y0(t,e).minor;Ww.exports=Q0});var Uw=w((xL,Kw)=>{var Z0=yt(),eF=(t,e)=>new Z0(t,e).patch;Kw.exports=eF});var Gw=w((kL,Bw)=>{var tF=Or(),nF=(t,e)=>{let n=tF(t,e);return n&&n.prerelease.length?n.prerelease:null};Bw.exports=nF});var Xw=w((EL,Vw)=>{var rF=cn(),iF=(t,e,n)=>rF(e,t,n);Vw.exports=iF});var Yw=w((FL,Jw)=>{var oF=cn(),sF=(t,e)=>oF(t,e,!0);Jw.exports=sF});var au=w((OL,Zw)=>{var Qw=yt(),aF=(t,e,n)=>{let r=new Qw(t,n),i=new Qw(e,n);return r.compare(i)||r.compareBuild(i)};Zw.exports=aF});var tb=w((NL,eb)=>{var cF=au(),uF=(t,e)=>t.sort((n,r)=>cF(n,r,e));eb.exports=uF});var rb=w((IL,nb)=>{var lF=au(),dF=(t,e)=>t.sort((n,r)=>lF(r,n,e));nb.exports=dF});var ob=w((ML,ib)=>{var fF=yt(),hF=Or(),{safeRe:cu,t:uu}=ao(),pF=(t,e)=>{if(t instanceof fF)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(cu[uu.COERCE]);else{let r;for(;(r=cu[uu.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),cu[uu.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;cu[uu.COERCERTL].lastIndex=-1}return n===null?null:hF(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};ib.exports=pF});var ab=w((LL,sb)=>{var gF=un(),mF=(t,e)=>new gF(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));sb.exports=mF});var ub=w((AL,cb)=>{var vF=yt(),yF=un(),CF=(t,e,n)=>{let r=null,i=null,o=null;try{o=new yF(e,n)}catch{return null}return t.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new vF(r,n))}),r};cb.exports=CF});var db=w((jL,lb)=>{var _F=yt(),wF=un(),bF=(t,e,n)=>{let r=null,i=null,o=null;try{o=new wF(e,n)}catch{return null}return t.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new _F(r,n))}),r};lb.exports=bF});var pb=w((HL,hb)=>{var Pg=yt(),DF=un(),fb=bs(),RF=(t,e)=>{t=new DF(t,e);let n=new Pg("0.0.0");if(t.test(n)||(n=new Pg("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],o=null;i.forEach(s=>{let a=new Pg(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||fb(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!n||fb(n,o))&&(n=o)}return n&&t.test(n)?n:null};hb.exports=RF});var mb=w(($L,gb)=>{var SF=un(),TF=(t,e)=>{try{return new SF(t,e).range||"*"}catch{return null}};gb.exports=TF});var lu=w((WL,_b)=>{var PF=yt(),Cb=Rs(),{ANY:qF}=Cb,xF=un(),kF=ho(),vb=bs(),yb=Cc(),EF=_c(),FF=yc(),OF=(t,e,n,r)=>{t=new PF(t,r),e=new xF(e,r);let i,o,s,a,c;switch(n){case">":i=vb,o=EF,s=yb,a=">",c=">=";break;case"<":i=yb,o=FF,s=vb,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(kF(t,e,r))return!1;for(let l=0;l<e.set.length;++l){let d=e.set[l],p=null,f=null;if(d.forEach(g=>{g.semver===qF&&(g=new Cb(">=0.0.0")),p=p||g,f=f||g,i(g.semver,p.semver,r)?p=g:s(g.semver,f.semver,r)&&(f=g)}),p.operator===a||p.operator===c||(!f.operator||f.operator===a)&&o(t,f.semver))return!1;if(f.operator===c&&s(t,f.semver))return!1}return!0};_b.exports=OF});var bb=w((zL,wb)=>{var NF=lu(),IF=(t,e,n)=>NF(t,e,">",n);wb.exports=IF});var Rb=w((KL,Db)=>{var MF=lu(),LF=(t,e,n)=>MF(t,e,"<",n);Db.exports=LF});var Pb=w((UL,Tb)=>{var Sb=un(),AF=(t,e,n)=>(t=new Sb(t,n),e=new Sb(e,n),t.intersects(e,n));Tb.exports=AF});var xb=w((BL,qb)=>{var jF=ho(),HF=cn();qb.exports=(t,e,n)=>{let r=[],i=null,o=null,s=t.sort((d,p)=>HF(d,p,n));for(let d of s)jF(d,e,n)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let a=[];for(let[d,p]of r)d===p?a.push(d):!p&&d===s[0]?a.push("*"):p?d===s[0]?a.push(`<=${p}`):a.push(`${d} - ${p}`):a.push(`>=${d}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var Ib=w((GL,Nb)=>{var kb=un(),xg=Rs(),{ANY:qg}=xg,Ms=ho(),kg=cn(),$F=(t,e,n={})=>{if(t===e)return!0;t=new kb(t,n),e=new kb(e,n);let r=!1;e:for(let i of t.set){for(let o of e.set){let s=zF(i,o,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},WF=[new xg(">=0.0.0-0")],Eb=[new xg(">=0.0.0")],zF=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===qg){if(e.length===1&&e[0].semver===qg)return!0;n.includePrerelease?t=WF:t=Eb}if(e.length===1&&e[0].semver===qg){if(n.includePrerelease)return!0;e=Eb}let r=new Set,i,o;for(let g of t)g.operator===">"||g.operator===">="?i=Fb(i,g,n):g.operator==="<"||g.operator==="<="?o=Ob(o,g,n):r.add(g.semver);if(r.size>1)return null;let s;if(i&&o){if(s=kg(i.semver,o.semver,n),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let g of r){if(i&&!Ms(g,String(i),n)||o&&!Ms(g,String(o),n))return null;for(let m of e)if(!Ms(g,String(m),n))return!1;return!0}let a,c,l,d,p=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,f=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let g of e){if(d=d||g.operator===">"||g.operator===">=",l=l||g.operator==="<"||g.operator==="<=",i){if(f&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===f.major&&g.semver.minor===f.minor&&g.semver.patch===f.patch&&(f=!1),g.operator===">"||g.operator===">="){if(a=Fb(i,g,n),a===g&&a!==i)return!1}else if(i.operator===">="&&!Ms(i.semver,String(g),n))return!1}if(o){if(p&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===p.major&&g.semver.minor===p.minor&&g.semver.patch===p.patch&&(p=!1),g.operator==="<"||g.operator==="<="){if(c=Ob(o,g,n),c===g&&c!==o)return!1}else if(o.operator==="<="&&!Ms(o.semver,String(g),n))return!1}if(!g.operator&&(o||i)&&s!==0)return!1}return!(i&&l&&!o&&s!==0||o&&d&&!i&&s!==0||f||p)},Fb=(t,e,n)=>{if(!t)return e;let r=kg(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},Ob=(t,e,n)=>{if(!t)return e;let r=kg(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};Nb.exports=$F});var jb=w((VL,Ab)=>{var Eg=ao(),Mb=Cs(),KF=yt(),Lb=yp(),UF=Or(),BF=Ew(),GF=Ow(),VF=Mw(),XF=jw(),JF=$w(),YF=zw(),QF=Uw(),ZF=Gw(),eO=cn(),tO=Xw(),nO=Yw(),rO=au(),iO=tb(),oO=rb(),sO=bs(),aO=Cc(),cO=Dp(),uO=Rp(),lO=yc(),dO=_c(),fO=Sp(),hO=ob(),pO=Rs(),gO=un(),mO=ho(),vO=ab(),yO=ub(),CO=db(),_O=pb(),wO=mb(),bO=lu(),DO=bb(),RO=Rb(),SO=Pb(),TO=xb(),PO=Ib();Ab.exports={parse:UF,valid:BF,clean:GF,inc:VF,diff:XF,major:JF,minor:YF,patch:QF,prerelease:ZF,compare:eO,rcompare:tO,compareLoose:nO,compareBuild:rO,sort:iO,rsort:oO,gt:sO,lt:aO,eq:cO,neq:uO,gte:lO,lte:dO,cmp:fO,coerce:hO,Comparator:pO,Range:gO,satisfies:mO,toComparators:vO,maxSatisfying:yO,minSatisfying:CO,minVersion:_O,validRange:wO,outside:bO,gtr:DO,ltr:RO,intersects:SO,simplifyRange:TO,subset:PO,SemVer:KF,re:Eg.re,src:Eg.src,tokens:Eg.t,SEMVER_SPEC_VERSION:Mb.SEMVER_SPEC_VERSION,RELEASE_TYPES:Mb.RELEASE_TYPES,compareIdentifiers:Lb.compareIdentifiers,rcompareIdentifiers:Lb.rcompareIdentifiers}});var Wb=w(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.register=void 0;var Ct=require("vscode"),Ls=jb(),qO=Hr(),xO=Os(),kO=bi(),Hb="vue-doctor",$b={postcss:["cpylua.language-postcss","vunguyentuan.vscode-postcss","csstools.postcss"],stylus:["sysoev.language-stylus"],sass:["Syler.sass-indented"]};async function EO(t,e){let n=Ct.window.createStatusBarItem(Ct.StatusBarAlignment.Right);n.backgroundColor=new Ct.ThemeColor("statusBarItem.warningBackground"),n.command="volar.action.doctor";let r=new Ct.EventEmitter;o(Ct.window.activeTextEditor),t.subscriptions.push(Ct.window.onDidChangeActiveTextEditor(o)),t.subscriptions.push(Ct.workspace.registerTextDocumentContentProvider(Hb,{onDidChange:r.event,async provideTextDocumentContent(a){let c=a.with({scheme:"file",path:a.path.substring(0,a.path.length-10)}),l=await s(c),d=`# ${c.path.split("/").pop()} Doctor

`;for(let p of l)d+="## \u2757 "+p.title+`

`,d+=p.message+`

`;return d+=`---

`,d+=`> Have any questions about the report message? You can see how it is composed by inspecting the [source code](https://github.com/vuejs/language-tools/blob/master/packages/vscode-vue/src/features/doctor.ts).

`,d.trim()}})),t.subscriptions.push(Ct.commands.registerCommand("volar.action.doctor",()=>{let a=Ct.window.activeTextEditor?.document;a&&(a.languageId==="vue"||a.uri.toString().endsWith(".vue"))&&a.uri.scheme==="file"&&Ct.commands.executeCommand("markdown.showPreviewToSide",i(a.uri))}));function i(a){return a.with({scheme:Hb,path:a.path+"/Doctor.md"})}async function o(a){if(kO.config.doctor.status&&a&&(a.document.languageId==="vue"||a.document.uri.toString().endsWith(".vue"))&&a.document.uri.scheme==="file"){let c=await s(a.document.uri);c.length&&Ct.window.activeTextEditor?.document===a.document&&(n.show(),n.text=c.length+(c.length===1?" known issue":" known issues"),r.fire(i(a.document.uri)))}else n.hide()}async function s(a){let c=Ct.workspace.textDocuments.find(y=>y.fileName===a.fsPath),l=await(c?e.sendRequest(qO.ParseSFCRequest.type,c.getText()):void 0),d=du(a.fsPath,"vue"),p=du(a.fsPath,"@vue/runtime-dom"),f=[];d&&Ls.lt(d.json.version,"2.7.0")&&!p&&f.push({title:"`@vue/runtime-dom` missing for Vue 2",message:["Vue 2 does not have JSX types definitions, so template type checking will not work correctly. You can resolve this problem by installing `@vue/runtime-dom` and adding it to your project's `devDependencies`.","","- vue: "+d.path].join(`
`)}),d&&Ls.gte(d.json.version,"2.7.0")&&Ls.lt(d.json.version,"3.0.0")&&p&&f.push({title:"Unnecessary `@vue/runtime-dom`",message:["Vue 2.7 already includes JSX type definitions. You can remove the `@vue/runtime-dom` dependency from package.json.","","- vue: "+d.path,"- @vue/runtime-dom: "+p.path].join(`
`)});let g=du(a.fsPath,"@types/node");if(g&&Ls.gte(g.json.version,"18.8.1")&&Ls.lte(g.json.version,"18.11.0")&&f.push({title:"Incompatible `@types/node` version",message:["`@types/node`'s version `"+g.json.version+"` is incompatible with Vue. It will cause broken DOM event types in template.","","You can update `@types/node` to `18.11.1` or later to resolve.","","- @types/node: "+g.path,"- Issue: https://github.com/vuejs/language-tools/issues/1985"].join(`
`)}),Ct.extensions.getExtension("octref.vetur")?.isActive&&f.push({title:"Use volar-service-vetur instead of Vetur",message:"Detected Vetur enabled. Consider disabling Vetur and use [volar-service-vetur](https://github.com/volarjs/services/tree/master/packages/vetur) instead."}),l?.descriptor.template?.lang==="pug"&&!await du(a.fsPath,"@vue/language-plugin-pug")&&f.push({title:"`@vue/language-plugin-pug` missing",message:['For `<template lang="pug">`, the `@vue/language-plugin-pug` plugin is required. Install it using `$ npm install -D @vue/language-plugin-pug` and add it to `vueCompilerOptions.plugins` to support TypeScript intellisense in Pug templates.',"","- package.json","```json",JSON.stringify({devDependencies:{"@vue/language-plugin-pug":"latest"}},void 0,2),"```","","- tsconfig.json / jsconfig.json","```jsonc",JSON.stringify({vueCompilerOptions:{plugins:["@vue/language-plugin-pug"]}},void 0,2),"```"].join(`
`)}),l){let y=[l.descriptor.template,l.descriptor.script,l.descriptor.scriptSetup,...l.descriptor.styles,...l.descriptor.customBlocks];for(let C of y)if(!!C&&C.lang&&C.lang in $b){let T=$b[C.lang];T.some(X=>!!Ct.extensions.getExtension(X))||f.push({title:"Syntax Highlighting for "+C.lang,message:`Did not find a valid syntax highlighter extension for ${C.lang} language block; you can choose to install one of the following:

`+T.map(X=>`- [${X}](https://marketplace.visualstudio.com/items?itemName=${X})
`)})}}return Ct.workspace.getConfiguration("emmet").get("includeLanguages")?.vue&&f.push({title:"Unnecessary `emmet.includeLanguages.vue`",message:"Vue language server already supports Emmet. You can remove `emmet.includeLanguages.vue` from `.vscode/settings.json`."}),Ct.workspace.getConfiguration("files").get("associations")?.["*.vue"]==="html"&&f.push({title:'Unnecessary `files.associations["*.vue"]`',message:'With `"files.associations": { "*.vue": html }`, language server cannot to recognize Vue files. You can remove `files.associations["*.vue"]` from `.vscode/settings.json`.'}),(await(0,xO.getTsdk)(t))?.version?.startsWith("4.9")&&f.push({title:"Bad TypeScript version",message:["TS 4.9 has a bug that will cause auto import to fail. Please downgrade to TS 4.8 or upgrade to TS 5.0+.","","Issue: https://github.com/vuejs/language-tools/issues/2190"].join(`
`)}),f}}fu.register=EO;function du(t,e){try{let n=require.resolve(e+"/package.json",{paths:[t]});return{path:n,json:require(n)}}catch{}}});var Fg=w(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.activate=ke.tagNameCasings=ke.attrNameCasings=void 0;var kt=require("vscode"),FO=Rg(),OO=Ap(),xe=Hr(),As=bi();ke.attrNameCasings=new Map;ke.tagNameCasings=new Map;async function NO(t,e){await e.start();let n=kt.window.createStatusBarItem(kt.StatusBarAlignment.Right);n.command="volar.action.nameCasing",l(kt.window.activeTextEditor?.document);let r=kt.window.onDidChangeActiveTextEditor(f=>{l(f?.document)}),i=kt.workspace.onDidChangeConfiguration(()=>{ke.attrNameCasings.clear(),ke.tagNameCasings.clear(),l(kt.window.activeTextEditor?.document)}),o=kt.workspace.onDidCloseTextDocument(f=>{ke.attrNameCasings.delete(f.uri.toString()),ke.tagNameCasings.delete(f.uri.toString())}),s=kt.commands.registerCommand("volar.action.nameCasing",async()=>{if(!kt.window.activeTextEditor?.document)return;let f=kt.window.activeTextEditor.document,g=ke.attrNameCasings.get(f.uri.toString()),m=ke.tagNameCasings.get(f.uri.toString()),b=await(0,FO.quickPick)([{1:{label:(m===xe.TagNameCasing.Kebab?"\u2022 ":"")+"Component Name Using kebab-case"},2:{label:(m===xe.TagNameCasing.Pascal?"\u2022 ":"")+"Component Name Using PascalCase"},3:{label:"Convert Component Name to kebab-case"},4:{label:"Convert Component Name to PascalCase"}},{5:{label:(g===xe.AttrNameCasing.Kebab?"\u2022 ":"")+"Prop Name Using kebab-case"},6:{label:(g===xe.AttrNameCasing.Camel?"\u2022 ":"")+"Prop Name Using camelCase"},7:{label:"Convert Prop Name to kebab-case"},8:{label:"Convert Prop Name to camelCase"}}]);b!==void 0&&(b==="1"&&ke.tagNameCasings.set(f.uri.toString(),xe.TagNameCasing.Kebab),b==="2"&&ke.tagNameCasings.set(f.uri.toString(),xe.TagNameCasing.Pascal),b==="3"&&await a(kt.window.activeTextEditor,xe.TagNameCasing.Kebab),b==="4"&&await a(kt.window.activeTextEditor,xe.TagNameCasing.Pascal),b==="5"&&ke.attrNameCasings.set(f.uri.toString(),xe.AttrNameCasing.Kebab),b==="6"&&ke.attrNameCasings.set(f.uri.toString(),xe.AttrNameCasing.Camel),b==="7"&&await c(kt.window.activeTextEditor,xe.AttrNameCasing.Kebab),b==="8"&&await c(kt.window.activeTextEditor,xe.AttrNameCasing.Camel),p())});e.onDidChangeState(f=>{f.newState===OO.State.Stopped&&(r.dispose(),i.dispose(),o.dispose(),s.dispose(),n.dispose())});async function a(f,g){let m=await e.sendRequest(xe.GetConvertTagCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(f.document),casing:g}),b=await e.protocol2CodeConverter.asTextEdits(m);b&&f.edit(R=>{for(let q of b)R.replace(q.range,q.newText)}),ke.tagNameCasings.set(f.document.uri.toString(),g),p()}async function c(f,g){let m=await e.sendRequest(xe.GetConvertAttrCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(f.document),casing:g}),b=await e.protocol2CodeConverter.asTextEdits(m);b&&f.edit(R=>{for(let q of b)R.replace(q.range,q.newText)}),ke.attrNameCasings.set(f.document.uri.toString(),g),p()}async function l(f){if(As.config.complete.casing.status&&(f?.languageId==="vue"||As.config.server.vitePress.supportMdFile&&f?.languageId==="markdown"||As.config.server.petiteVue.supportHtmlFile&&f?.languageId==="html")){let g,m=ke.attrNameCasings.get(f.uri.toString()),b=ke.tagNameCasings.get(f.uri.toString());if(!m){let R=As.config.complete.casing.props;R==="kebab"?m=xe.AttrNameCasing.Kebab:R==="camel"?m=xe.AttrNameCasing.Camel:(g??=await d(f),g?.attr.length===1?m=g.attr[0]:R==="autoCamel"?m=xe.AttrNameCasing.Camel:m=xe.AttrNameCasing.Kebab),ke.attrNameCasings.set(f.uri.toString(),m)}if(!b){let R=As.config.complete.casing.tags;R==="kebab"?b=xe.TagNameCasing.Kebab:R==="pascal"?b=xe.TagNameCasing.Pascal:(g??=await d(f),g?.tag.length===1?b=g.tag[0]:b=xe.TagNameCasing.Pascal),ke.tagNameCasings.set(f.uri.toString(),b)}p(),n.show()}else n.hide()}function d(f){return e.sendRequest(xe.DetectNameCasingRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(f)})}function p(){let f=kt.window.activeTextEditor?.document;if(!f)return;let g=ke.attrNameCasings.get(f.uri.toString()),m=ke.tagNameCasings.get(f.uri.toString()),b="<";m===xe.TagNameCasing.Kebab?b+="tag-name ":m===xe.TagNameCasing.Pascal?b+="TagName ":b+="? ",g===xe.AttrNameCasing.Kebab?b+="prop-name":g===xe.AttrNameCasing.Camel?b+="propName":b+="?",b+=" />",n.text=b}}ke.activate=NO});var zb=w(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.register=void 0;var Di=require("vscode"),hu=bi();function IO(){let t,e=!1,n=0;return[Di.workspace.onWillSaveTextDocument(r=>{r.document.languageId==="vue"&&(t!==void 0&&(e=!0),t=Date.now())}),Di.workspace.onDidSaveTextDocument(async()=>{if(e&&(e=!1,t=void 0),t===void 0)return;let r=Date.now()-t;if(t=void 0,hu.config.codeActions.enabled&&r>hu.config.codeActions.savingTimeLimit?n++:n=0,n>=2){let i=["Disable codeActions","Increase saveTimeLimit","What is this?"],o=await Di.window.showInformationMessage(`Saving time is too long. (${r} ms > ${hu.config.codeActions.savingTimeLimit} ms), `,...i);o===i[0]?(hu.config.update("codeActions.enabled",!1),Di.window.showInformationMessage("Code Actions is disabled. (You can enable it in .vscode/settings.json)")):o===i[1]?Di.commands.executeCommand("workbench.action.openSettings2",{query:"vue.codeActions.savingTimeLimit"}):o===i[2]&&Di.env.openExternal(Di.Uri.parse("https://github.com/vuejs/language-tools/discussions/2740"))}})]}pu.register=IO});var Kb=w(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.register=void 0;var At=require("vscode"),MO=Hr(),LO=bi();function AO(t,e){let n=i();t.subscriptions.push(At.commands.registerCommand("volar.action.splitEditors",r));async function r(){let o=At.window.activeTextEditor;if(!o)return;let s=LO.config.splitEditors.layout,a=o.document,{descriptor:c}=await n(a.getText()),l=[],d=[];c.script&&(s.left.includes("script")&&l.push(c.script),s.right.includes("script")&&d.push(c.script)),c.scriptSetup&&(s.left.includes("scriptSetup")&&l.push(c.scriptSetup),s.right.includes("scriptSetup")&&d.push(c.scriptSetup)),c.template&&(s.left.includes("template")&&l.push(c.template),s.right.includes("template")&&d.push(c.template)),s.left.includes("styles")&&(l=l.concat(c.styles)),s.right.includes("styles")&&(d=d.concat(c.styles)),s.left.includes("customBlocks")&&(l=l.concat(c.customBlocks)),s.right.includes("customBlocks")&&(d=d.concat(c.customBlocks)),await At.commands.executeCommand("workbench.action.joinEditorInGroup"),At.window.activeTextEditor===o?(await p(l),await At.commands.executeCommand("workbench.action.toggleSplitEditorInGroup"),await p(d)):await At.commands.executeCommand("editor.unfoldAll");async function p(f){let g=At.window.activeTextEditor;if(!g)return;g.selections=f.length?f.map(b=>new At.Selection(a.positionAt(b.loc.start.offset),a.positionAt(b.loc.start.offset))):[new At.Selection(a.positionAt(a.getText().length),a.positionAt(a.getText().length))],await At.commands.executeCommand("editor.unfoldAll"),await At.commands.executeCommand("editor.foldLevel1");let m=f.sort((b,R)=>b.loc.start.offset-R.loc.start.offset)[0];m&&g.revealRange(new At.Range(a.positionAt(m.loc.start.offset),new At.Position(g.document.lineCount,0)),At.TextEditorRevealType.AtTop)}}function i(){let o,s;return a;async function a(c){return c!==o&&(o=c,s=await e.sendRequest(MO.ParseSFCRequest.type,c)),s}}}gu.register=AO});var Ub=w(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.getDocumentSelector=Wr.deactivate=Wr.activate=void 0;var Qt=Os(),Qn=Hr(),wr=require("vscode"),_t=bi(),jO=xw(),HO=Wb(),$O=Fg(),WO=zb(),zO=Kb(),jt,Ri;async function KO(t,e){let n=wr.window.onDidChangeActiveTextEditor(r);r();function r(){if(!wr.window.activeTextEditor){Og(t,e),n.dispose();return}let i=wr.window.activeTextEditor.document.languageId;(i==="vue"||i==="markdown"&&_t.config.server.vitePress.supportMdFile||i==="html"&&_t.config.server.petiteVue.supportHtmlFile)&&(Og(t,e),n.dispose()),(0,Qt.takeOverModeActive)(t)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(i)&&(Og(t,e),n.dispose())}}Wr.activate=KO;async function Og(t,e){wr.commands.executeCommand("setContext","volar.activated",!0);let n=wr.window.createOutputChannel("Vue Semantic Server"),r=wr.window.createOutputChannel("Vue Syntactic Server");[jt,Ri]=await Promise.all([e("vue-semantic-server","Vue Semantic Server",Ng(t,Qn.ServerMode.PartialSemantic),await mu(Qn.ServerMode.PartialSemantic,t),6009,n),e("vue-syntactic-server","Vue Syntactic Server",Ng(t,Qn.ServerMode.Syntactic),await mu(Qn.ServerMode.Syntactic,t),6011,r)]);let i=[jt,Ri];s(),a(),c(),t.subscriptions.push(...WO.register()),zO.register(t,Ri),HO.register(t,jt),jO.register(t,jt);let o={vue:!0,markdown:!0,javascript:!0,typescript:!0,javascriptreact:!0,typescriptreact:!0};(0,Qt.activateAutoInsertion)([Ri,jt],l=>o[l.languageId]),(0,Qt.activateWriteVirtualFiles)("volar.action.writeVirtualFiles",jt),(0,Qt.activateFindFileReferences)("volar.vue.findAllFileReferences",jt),(0,Qt.activateTsConfigStatusItem)("volar.openTsconfig",jt,l=>l.languageId==="vue"||_t.config.server.vitePress.supportMdFile&&l.languageId==="markdown"||_t.config.server.petiteVue.supportHtmlFile&&l.languageId==="html"||(0,Qt.takeOverModeActive)(t)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(l.languageId)),(0,Qt.activateReloadProjects)("volar.action.reloadProject",[jt]),(0,Qt.activateTsVersionStatusItem)("volar.selectTypeScriptVersion",t,jt,l=>l.languageId==="vue"||_t.config.server.vitePress.supportMdFile&&l.languageId==="markdown"||_t.config.server.petiteVue.supportHtmlFile&&l.languageId==="html"||(0,Qt.takeOverModeActive)(t)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(l.languageId),l=>((0,Qt.takeOverModeActive)(t)&&(l+=" (takeover)"),l),!1);for(let l of i)(0,Qt.activateServerSys)(l);function s(){wr.workspace.onDidChangeConfiguration(l=>{l.affectsConfiguration("vue")&&wr.commands.executeCommand("volar.action.restartServer")})}async function a(){t.subscriptions.push(wr.commands.registerCommand("volar.action.restartServer",async()=>{await Promise.all(i.map(l=>l.stop())),n.clear(),r.clear(),jt.clientOptions.initializationOptions=await mu(Qn.ServerMode.PartialSemantic,t,jt.clientOptions.initializationOptions),Ri.clientOptions.initializationOptions=await mu(Qn.ServerMode.Syntactic,t,Ri.clientOptions.initializationOptions),await Promise.all(i.map(l=>l.start())),c()}))}function c(){$O.activate(t,jt)}}function UO(){return Promise.all([jt?.stop(),Ri?.stop()])}Wr.deactivate=UO;function Ng(t,e){let n=(0,Qt.takeOverModeActive)(t),r=[];return r.push({language:"vue"}),n&&(r.push({language:"javascript"}),r.push({language:"typescript"}),r.push({language:"javascriptreact"}),r.push({language:"typescriptreact"}),(e===Qn.ServerMode.Semantic||e===Qn.ServerMode.PartialSemantic)&&r.push({language:"json"})),_t.config.server.petiteVue.supportHtmlFile&&r.push({language:"html"}),_t.config.server.vitePress.supportMdFile&&r.push({language:"markdown"}),r}Wr.getDocumentSelector=Ng;async function mu(t,e,n={}){return n.configFilePath=_t.config.server.configFilePath,n.serverMode=t,n.diagnosticModel=_t.config.server.diagnosticModel==="pull"?Qn.DiagnosticModel.Pull:Qn.DiagnosticModel.Push,n.typescript={tsdk:(await(0,Qt.getTsdk)(e)).tsdk},n.reverseConfigFilePriority=_t.config.server.reverseConfigFilePriority,n.maxFileSize=_t.config.server.maxFileSize,n.semanticTokensLegend={tokenTypes:["component"],tokenModifiers:[]},n.fullCompletionList=_t.config.server.fullCompletionList,n.additionalExtensions=[..._t.config.server.additionalExtensions,..._t.config.server.petiteVue.supportHtmlFile?["html"]:[],..._t.config.server.vitePress.supportMdFile?["md"]:[]],n}});var Vb=w(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.middleware=void 0;var vu=Hr(),Bb=Os(),Ig=require("vscode"),Gb=Fg();yu.middleware={...Bb.middleware,async resolveCodeAction(t,e,n){if(t.kind?.value==="refactor.move.newFile.dumb"){let r=await Ig.window.showInputBox({value:t.data.original.data.newName});if(!r)return t;t.data.original.data.newName=r}return await(Bb.middleware.resolveCodeAction?.(t,e,n)??n(t,e))},workspace:{configuration(t,e,n){return t.items.some(r=>r.section==="vue.complete.casing.props"||r.section==="vue.complete.casing.tags")?t.items.map(r=>{if(r.scopeUri){if(r.section==="vue.complete.casing.tags"){let i=Gb.tagNameCasings.get(r.scopeUri);if(i===vu.TagNameCasing.Kebab)return"kebab";if(i===vu.TagNameCasing.Pascal)return"pascal"}if(r.section==="vue.complete.casing.props"){let i=Gb.attrNameCasings.get(r.scopeUri);if(i===vu.AttrNameCasing.Kebab)return"kebab";if(i===vu.AttrNameCasing.Camel)return"camel"}}return Ig.workspace.getConfiguration(r.section,r.scopeUri?Ig.Uri.parse(r.scopeUri):void 0)}):n(t,e)}}}});Object.defineProperty(exports,"__esModule",{value:!0});exports.deactivate=exports.activate=void 0;var BO=require("fs"),GO=require("os"),VO=require("path"),Mg=require("vscode"),js=WC(),Lg=Ub(),XO=Vb(),Xb=Hr(),Hs=bi(),JO=Os();async function YO(t){let e=VO.join(GO.tmpdir(),`vscode-${t.extension.id}-cancellation-pipe.tmp`),n=(0,Lg.getDocumentSelector)(t,Xb.ServerMode.Semantic),r,i=[];return Mg.workspace.onDidChangeTextDocument(o=>{let s=o.document.uri.toString()+"|"+o.document.version;if(r===void 0){r=s;return}n.some(a=>a.language===o.document.languageId)&&r!==s&&(r=s,BO.writeFileSync(e,""))}),await(0,Lg.activate)(t,(o,s,a,c,l,d)=>{c.cancellationPipeName=e;class p extends js.LanguageClient{fillInitializeParams(T){T.locale=Mg.env.language}}let f=Mg.Uri.joinPath(t.extensionUri,"server.js"),g={};Hs.config.server.maxOldSpaceSize&&(g.execArgv??=[],g.execArgv.push("--max-old-space-size="+Hs.config.server.maxOldSpaceSize));let m={execArgv:["--nolazy","--inspect="+l]},b={run:{module:f.fsPath,transport:js.TransportKind.ipc,options:g},debug:{module:f.fsPath,transport:js.TransportKind.ipc,options:m}},R=void 0;R&&(b={run:{transport:{kind:js.TransportKind.socket,port:l+10},options:g,command:R,args:["--bun","run",f.fsPath]},debug:{transport:{kind:js.TransportKind.socket,port:l+10},options:m,command:R,args:["--bun","run",f.fsPath]}});let q={middleware:XO.middleware,documentSelector:a,initializationOptions:c,outputChannel:d},y=new p(o,s,b,q);return y.start(),i.push(y),ZO(y),y}),{volarLabs:{version:JO.supportLabsVersion,codegenStackSupport:!0,languageClients:i,languageServerProtocol:Xb}}}exports.activate=YO;function QO(){return(0,Lg.deactivate)()}exports.deactivate=QO;function ZO(t){let e=t.initializeFeatures;t.initializeFeatures=(...n)=>{let r=t._capabilities;return Hs.config.codeActions.enabled||(r.codeActionProvider=void 0),Hs.config.codeLens.enabled||(r.codeLensProvider=void 0),!Hs.config.updateImportsOnFileMove.enabled&&r.workspace?.fileOperations?.willRename&&(r.workspace.fileOperations.willRename=void 0),e.call(t,...n)}}
